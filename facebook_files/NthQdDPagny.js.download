if (self.CavalryLogger) { CavalryLogger.start_js(["qwV+m"]); }

__d("MessengerView",[],(function(a,b,c,d,e,f){e.exports={DETAIL:{COMPOSE:"detail/compose",GALLERY:"detail/gallery",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SEE_ALL_GROUPS:"master/sagroups",SEE_ALL_PAGES:"master/sapages",SEE_ALL_PEOPLE:"master/sapeople",SEE_ALL_UNREAD:"master/saunread",SEARCH:"master/search",SEARCH_MESSAGES:"master/search_messages",SUPPORT:"master/support"}}}),null);
__d("StickersStoreDialogPackDetailQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"packID",type:"ID!"},{defaultValue:null,kind:"LocalArgument",name:"profileSize",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"previewWidth",type:"Int"}],b=[{kind:"Variable",name:"id",variableName:"packID"}],c={alias:null,args:null,kind:"ScalarField",name:"is_ghost_pack",storageKey:null},d=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StickersStoreDialogPackDetailQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[c,{args:[{kind:"Variable",name:"packID",variableName:"packID"},{kind:"Variable",name:"previewWidth",variableName:"previewWidth"},{kind:"Variable",name:"profileSize",variableName:"profileSize"}],kind:"FragmentSpread",name:"StickersStoreDetailView_stickerPack"}],type:"StickerPack"}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StickersStoreDialogPackDetailQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[c,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_image",plural:!1,selections:d,storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:100}],concreteType:"Image",kind:"LinkedField",name:"preview_image",plural:!1,selections:d,storageKey:"preview_image(height:100)"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"artist",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"copyrights",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_download",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"in_sticker_tray",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_purchased",storageKey:null}],type:"StickerPack"}],storageKey:null}]},params:{id:"2696647197015163",metadata:{},name:"StickersStoreDialogPackDetailQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("StickersStoreDialogStoreQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"count",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"size",type:"Int"}],b=[{kind:"Variable",name:"first",variableName:"count"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StickersStoreDialogStoreQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"size",variableName:"size"}],kind:"FragmentSpread",name:"StickersStoreView_packList"}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StickersStoreDialogStoreQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"StickerStore",kind:"LinkedField",name:"sticker_store",plural:!1,selections:[{alias:null,args:b,concreteType:"AvailableStickerPacksConnection",kind:"LinkedField",name:"available_packs",plural:!1,selections:[{alias:null,args:null,concreteType:"AvailableStickerPacksEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"node",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"is_composer_capable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_messenger_capable",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"thumbnail_image",plural:!1,selections:d,storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:8}],concreteType:"StickersInPackConnection",kind:"LinkedField",name:"stickers",plural:!1,selections:[{alias:null,args:null,concreteType:"StickersInPackEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Sticker",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"height",variableName:"size"},{kind:"Variable",name:"width",variableName:"size"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:d,storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:"stickers(first:8)"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"artist",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_download",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"in_sticker_tray",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_purchased",storageKey:null},e],storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:b,filters:null,handle:"connection",key:"StickersStoreView_available_packs",kind:"LinkedHandle",name:"available_packs"}],storageKey:null}],storageKey:null}]},params:{id:"2424375857610449",metadata:{},name:"StickersStoreDialogStoreQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("wrapNullableForReact",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!=null)return a;else return void 0}e.exports=a}),null);
__d("PhotoResizeMath",[],(function(a,b,c,d,e,f){a={getScaledPhotoDimensions:function(a,b,c,d,e){var f=a/b,g=c/d;if(c&&d&&e==="stretch")return{width:c,height:d};if(!c&&d||e==="contain"!==f>=g)return{width:d*f,height:d};return c?{width:c,height:c/f}:{width:a,height:b}}};e.exports=a}),null);
__d("PixelzFocus",[],(function(a,b,c,d,e,f){"use strict";var g={search:function(a,b){var c=0,d=a.length-1;while(c<=d){var e=c+Math.floor((d-c)/2),f=a[e];if(f>b)d=e-1;else if(f<b)c=e+1;else return e}return Math.min(c,d)},forceSpecificPoint:function(a,b,c){var d=1e-9;d=g.search(a,b-c-d)+1;b=g.search(a,b+c);return a.slice(d,b+1)},findBiggestSets:function(a,b){var c=[],d=-1;for(var e=0;e<a.length;++e){var f=a[e],h=e;f=g.search(a,f+b);var i=f-h;i>d&&(c=[]);i>=d&&(d=i,c.push({low:h,high:f}))}return c},getBestSet:function(a,b,c){var d=-1,e=null;for(var f=0;f<b.length;++f){var g=b[f],h=a[g.low],i=a[g.high],j=h+(i-h)/2;h=Math.min(h-(j-c),j+c-i);h>d&&(d=h,e=g)}return e},getFocusFromSet:function(a,b){var c=a[b.low];a=a[b.high];return c+(a-c)/2},clampFocus:function(a,b){var c=b/2;b=1-b/2;if(a<c)return c;return a>b?b:a},convertFromCenterToCSS:function(a,b){return Math.abs(1-b)<1e-5?0:(a-b/2)/(1-b)},convertFromCSSToCenter:function(a,b){return a*(1-b)+b/2},getVisible:function(a,b){return a<b?a/b:b/a},getHidden:function(a,b){return 1-g.getVisible(a,b)},focusHorizontally:function(a,b){return a<b},convertVectorFromCenterToCSS:function(a,b,c){var d=g.focusHorizontally(b,c),e;d?e=a.x/100:e=a.x/100;a=g.convertFromCenterToCSS(e,g.getVisible(b,c));if(d)return{x:a,y:0};else return{x:0,y:a}},getCropRect:function(a,b,c){var d=g.focusHorizontally(b,c);b=g.getVisible(b,c);if(d){c=(1-b)*a.x;return{left:c,top:0,width:b,height:1}}else{d=(1-b)*a.y;return{left:0,top:d,width:1,height:b}}}};e.exports=g}),null);
__d("loadImage",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Image();c.onload=function(){b(c.width,c.height,c)};c.src=a}a.loadImagePromise=function(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onerror=c;d.onload=function(){return b(d)};d.src=a})};e.exports=a}),null);
__d("Pixelz.react",["cx","PhotoResizeMath","PixelzFocus","React","createReactClass_DEPRECATED","joinClasses","loadImage","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("createReactClass_DEPRECATED")({displayName:"Pixelz",propTypes:{width:(a=b("prop-types")).number,height:a.number,resizeMode:a.oneOf(["contain","cover","stretch"]),alt:a.string,letterbox:a.bool,borderRadius:a.number,insetBorderColor:a.string,animated:a.bool,upscale:a.bool,cropRect:function(a,b,c){a=a[b];b="Invalid prop `"+b+"` supplied to `"+c+"`, expected a rectangle with values normalized between 0 and 1.";if(a.left<0||a.top<0||a.width<0||a.height<0||a.left+a.width>1||a.top+a.height>1)return new Error(b)},focus:function(a,b,c){a=a[b];b="Invalid prop `"+b+"` supplied to `"+c+"`, expected either a {x, y, type} vector where type is `css` or `center` or an array of {x, y} vectors. All the vectors have with values normalized between 0 and 1.";if(Array.isArray(a)){for(var c=0;c<a.length;++c)if(!(a[c].x>=0&&a[c].x<=1)||!(a[c].y>=0&&a[c].y<=1))return new Error(b)}else{a.type||(a.type="css");if(!(a.x>=0&&a.x<=1)||!(a.y>=0&&a.y<=1)||!["center","css"].includes(a.type))return new Error(b)}}},getDefaultProps:function(){return{resizeMode:"cover",alt:"",letterbox:!0,upscale:!0,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:"css"}}},getInitialState:function(){return{srcDimensions:{}}},getSrcDimensions:function(){var a=this.props.src,c=this.state.srcDimensions[a];if(c)return c;b("loadImage")(a,function(b,c){var d={};d[a]={width:b,height:c};this.isMounted()&&this.setState({srcDimensions:d})}.bind(this));return null},getCropSrcDimensions:function(){var a=this.getSrcDimensions();return{width:a.width*this.props.cropRect.width,height:a.height*this.props.cropRect.height}},getUpscaleCropDimensions:function(){var a=this.getCropSrcDimensions();return b("PhotoResizeMath").getScaledPhotoDimensions(a.width,a.height,this.props.width,this.props.height,this.props.resizeMode)},getCropDimensions:function(){var a=this.getUpscaleCropDimensions(),b=this.getCropSrcDimensions();return!this.props.upscale?{width:Math.min(a.width,b.width),height:Math.min(a.height,b.height)}:a},getCropAspectRatio:function(){var a=this.getCropDimensions();return a.width/a.height},getContainerDimensions:function(){return this.props.letterbox&&this.props.width&&this.props.height?{width:this.props.width,height:this.props.height}:this.getCropDimensions()},getContainerAspectRatio:function(){var a=this.getContainerDimensions();return a.width/a.height},getContainerPosition:function(){return{left:0,top:0}},getFocus:function(){var a=this.props.focus;if(!Array.isArray(a)&&a.type==="css")return{x:a.x,y:a.y};var c=this.getContainerAspectRatio(),d=this.getCropAspectRatio(),e=b("PixelzFocus").getVisible(c,d),f=b("PixelzFocus").focusHorizontally(c,d);if(!Array.isArray(a))c=b("PixelzFocus").convertFromCenterToCSS(f?a.x:a.y,e);else{d=a.map(function(a){return f?a.x:a.y});d.sort();a=b("PixelzFocus").findBiggestSets(d,e);a=b("PixelzFocus").getBestSet(d,a,e);c=b("PixelzFocus").getFocusFromSet(d,a)}return{x:f?c:.5,y:f?.5:c}},getCropPosition:function(){var a=this.getCropDimensions(),b=this.getContainerDimensions(),c=this.getFocus();return{left:c.x*(b.width-a.width),top:c.y*(b.height-a.height)}},getScaleDimensions:function(){var a=this.getCropDimensions();return{width:a.width/this.props.cropRect.width,height:a.height/this.props.cropRect.height}},getScalePosition:function(){var a=this.getScaleDimensions();return{left:-a.width*this.props.cropRect.left,top:-a.height*this.props.cropRect.top}},getClipCropRectangle:function(){var a=this.getContainerDimensions(),b=this.getCropDimensions(),c=this.getContainerPosition(),d=this.getCropPosition(),e=Math.max(c.left,d.left),f=Math.max(c.top,d.top),g=Math.min(c.top+a.height,d.top+b.height);c=Math.min(c.left+a.width,d.left+b.width);return{left:e,top:f,width:c-e,height:g-f}},getClipCropPosition:function(){var a=this.getClipCropRectangle();return{left:a.left,top:a.top}},getClipCropDimensions:function(){var a=this.getClipCropRectangle();return{width:a.width,height:a.height}},getClipScalePosition:function(){var a=this.getScalePosition(),b=this.getClipCropPosition(),c=this.getCropPosition();return{left:a.left+(c.left-b.left),top:a.top+(c.top-b.top)}},getClipScaleDimensions:function(){return this.getScaleDimensions()},areDimensionsEqual:function(a,b){return a.width===b.width&&a.height===b.height},shouldAddAllNodesAndStyles:function(){return this.props.animated},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return!0;var a=this.getContainerDimensions(),b=this.getClipCropDimensions(),c=this.getClipScaleDimensions();return this.areDimensionsEqual(a,b)||this.areDimensionsEqual(b,c)?!1:!0},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return!0;var a=this.getContainerDimensions(),b=this.getClipScaleDimensions();return this.areDimensionsEqual(a,b)?!1:!0},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor},applyPositionStyle:function(a,b){(this.shouldAddAllNodesAndStyles()||b.left)&&(a.left=Math.round(b.left)),(this.shouldAddAllNodesAndStyles()||b.top)&&(a.top=Math.round(b.top))},applyDimensionsStyle:function(a,b){a.width=Math.round(b.width),a.height=Math.round(b.height)},applyBorderRadiusStyle:function(a){(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)&&(a.borderRadius=this.props.borderRadius||0)},getScaleStyle:function(){var a={},b=this.getClipCropDimensions(),c=this.getClipScaleDimensions();this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(b,c)?this.applyPositionStyle(a,this.getClipScalePosition()):this.applyPositionStyle(a,this.getClipCropPosition());this.applyDimensionsStyle(a,this.getClipScaleDimensions());this.applyBorderRadiusStyle(a);return a},getCropStyle:function(){var a={};this.applyPositionStyle(a,this.getClipCropPosition());this.applyDimensionsStyle(a,this.getClipCropDimensions());this.applyBorderRadiusStyle(a);return a},getInsetBorderStyle:function(){var a={borderColor:this.props.insetBorderColor||"transparent"};this.applyPositionStyle(a,this.getClipCropPosition());this.applyDimensionsStyle(a,this.getClipCropDimensions());this.applyBorderRadiusStyle(a);return a},getContainerStyle:function(){var a={};this.applyDimensionsStyle(a,this.getContainerDimensions());this.applyBorderRadiusStyle(a);return a},getScale:function(){var a=this.getScaleStyle(),c=a.width,d=a.height;a=babelHelpers["extends"]({},a);delete a.width;delete a.height;return h.jsx("img",babelHelpers["extends"]({},this.props,{alt:this.props.alt,className:b("joinClasses")(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?" _56t5":"")),src:this.props.src,style:babelHelpers["extends"]({},this.props.style||{},a),width:c,height:d}))},getCrop:function(){var a=this.getScale();return!this.hasCrop()?a:h.jsx("div",{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),style:this.getCropStyle(),children:a})},getInsetBorder:function(){return!this.hasInsetBorder()?null:h.jsx("div",{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),style:this.getInsetBorderStyle()})},getContainer:function(){var a=this.getCrop();if(!this.hasContainer())return a;var b=this.getInsetBorder();return h.jsxs("div",{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),"data-skipchecker":null,style:this.getContainerStyle(),children:[a,b]})},render:function(){var a=this.getSrcDimensions();return!a?h.jsx("span",{"data-skipchecker":null}):this.getContainer()}});e.exports=c}),null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],(function(a,b,c,d,e,f){"use strict";a={isCallable:function(a){a=b("PresenceStatus").getCapabilities(a);var c=b("ChannelConstants").CAPABILITY_VOIP_INTEROP;return!!(a&c)}};e.exports=a}),null);
__d("FBRTCCallUIWrapper",["regeneratorRuntime","Bootloader","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";var g=null,h=0;function i(){return"Video Call "+h}var j={openGroupCallUI:function(a,c,d,e,f,h,i){return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallUI(a,c,d,e,f,h,g,i)},"FBRTCCallUIWrapper");case 2:case"end":return j.stop()}},null,this)},openGroupCallURI:function(a,c,d,e,f,h,i,j,k){return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallURI({conferenceName:a,callID:c,hasVideo:d,initializeVideo:e,serverInfoData:i,trigger:j,callSummary:k,callWindow:g,multiwayWwwTier:h,multiwayCoreTier:f})},"FBRTCCallUIWrapper");case 2:case"end":return l.stop()}},null,this)},openAsCaller:function(a,c,d,e,f){!g&&window.rtcCallChildWindow&&(g=window.rtcCallChildWindow,window.rtcCallChildWindow=null);try{if(this._shouldFocusCallWindow(a)){g&&g.focus();return}this._shouldCloseCallWindow()&&(g&&g.close())}catch(a){if(a.name==="SecurityError")b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logCheckpoint({checkpoint:"call_window_navigated_away"})},"FBRTCCallUIWrapper"),g=null,h++;else throw a}g=this._openWindow(i(),{isP2P:!0});b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCaller(a,c,d,e,g,f)},"FBRTCCallUIWrapper")},openAsCallee:function(a,c,d,e,f){g=this._openWindow(i(),{isP2P:!0}),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCallee(a,c,d,e,g,f)},"FBRTCCallUIWrapper")},_shouldFocusCallWindow:function(a){return!!g&&!g.closed&&g.rtcCallInProgessWith===a},_shouldCloseCallWindow:function(){return!!g&&!g.closed&&!g.rtcCallInProgessWith},_openWindow:function(a,c){c=c===void 0?{isP2P:!1}:c;c=c.isP2P;c=c===void 0?!1:c;c=this._windowPosition({isP2P:c});c=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",");this._isSparkBrowser()&&(c="");b("gkx")("859726")&&b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logCheckpoint({checkpoint:"rtc_www_new_tab"})},"FBRTCCallUIWrapper");a=b("gkx")("859726")?window.open("","_blank"):window.open("",a,c);window.callWindow=a;return a},_windowDimension:function(a){a=a.isP2P;var b=960,c=540;screen&&screen.width>1280&&(!a?(b=1100,c=772):(b=1280,c=720));return{height:c,width:b}},_windowPosition:function(a){a=a.isP2P;a=a===void 0?!1:a;var b,c,d,e;a=j._windowDimension({isP2P:a});var f=a.height;a=a.width;window.innerWidth!==void 0?(c=window.innerWidth,b=window.innerHeight):(c=screen.width,b=screen.height);window.screenLeft!==void 0?(d=window.screenLeft,e=window.screenTop):(d=window.screenX,e=window.screenY);c=Math.floor(c/2-a/2+d);d=Math.floor(b/2-f/2+e);return{height:"height="+f.toString(),width:"width="+a.toString(),top:"top="+d.toString(),left:"left="+c.toString()}},_isSparkBrowser:function(){return b("UserAgent").isBrowser("Chrome < 34")&&b("UserAgent").isBrowser("Chrome > 33")}};e.exports=j}),null);
__d("RTWebCallTriggerMapping",["deepFreezeValue"],(function(a,b,c,d,e,f){"use strict";a={chat_sidebar:{surface:"chat_sidebar",component:"recent_calls"},chat_sidebar_audio_button:{surface:"chat_sidebar",component:"audio_button"},chat_sidebar_video_button:{surface:"chat_sidebar",component:"video_button"},chattab_audio_button:{surface:"chat_tab",component:"audio_button"},chattab_video_button:{surface:"chat_tab",component:"video_button"},messenger_bubble_free_call:{surface:"messenger_bubble",component:"free_call"},messenger_group_bubble_free_call:{surface:"messenger_bubble",component:"free_call"},messenger_dot_com_missed_call_dialog:{surface:"missed_call_dialog",component:"start_call_button"},messenger_dot_com_video_call:{surface:"messenger_header",component:"video_button"},messenger_dot_com_audio_call:{surface:"messenger_header",component:"audio_button"},timeline:{surface:"dropdown_call_menu",component:"start_call_button"},messenger_dot_com_work_hovercard:{surface:"work_hovercard",component:"start_call_button"},admin_message:{surface:"admin_message",component:"start_call_button"},return_call:{surface:"missed_call_dialog",component:"start_call_button"},popup_start_call_button:{surface:"call_container",component:"start_call_button"},redial_button:{surface:"call_container",component:"redial"},web_messenger:{surface:"work_profile",component:"start_call_button"},quickdial:{surface:"work_profile",component:"start_call_button"},intern_search_meeting_room_unit:{surface:"meeting_room_intern_search_card",component:"start_call_button"},meeting_room_map_dialog:{surface:"meeting_room_map_dialog",component:"start_call_button"},meeting_room_page_profile:{surface:"meeting_room_profile",component:"start_call_button"}};b("deepFreezeValue")(a);e.exports=a}),null);
__d("generateRTCCallID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("FBRTCCore",["invariant","Bootloader","FBLogger","FBRTCAvailability","FBRTCCallUIWrapper","FBRTCSupport","RTWebCallTriggerMapping","RTWebUserActionLogger","generateRTCCallID","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=!1;a={startOutgoingCall:function(a,c,d,e,f){e===void 0&&(e=!1);f===void 0&&(f=null);/\D/.test(a)&&g(0,2478);var i=b("generateRTCCallID")(),j=b("RTWebCallTriggerMapping")[c];(j===null||j===void 0)&&b("FBLogger")("rtweb").mustfix("Unexpected or unknown call trigger: %s",c);b("RTWebUserActionLogger").logPreCallClick(babelHelpers["extends"]({},j,{callID:i.toString(),mediaType:b("RTWebUserActionLogger").getMediaType(d),callType:"p2p"}));if(h)return;h=!0;b("setTimeout")(function(){h=!1},1e3);e&&!b("FBRTCSupport").isCollabSupported()?b("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage","CollabMessengerLogger"],function(b,c){b.showForUnsupportedCollabCall(),c.logBrowserNotSupported({peerID:a})},"FBRTCCore"):!b("FBRTCSupport").isWebrtcSupported()?b("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage"],function(a){a.showForOutgoingCall(),b("RTWebUserActionLogger").logError({callID:i.toString(),callType:"p2p",mediaType:b("RTWebUserActionLogger").getMediaType(d),errorDomain:"unsupported browser"})},"FBRTCCore"):b("FBRTCCallUIWrapper").openAsCaller(a,i,c,d,f)},startGroupCall:function(a){var c=a.conferenceName,d=a.hasVideo,e=a.serverInfoData,f=a.trigger;a=a.usersToRing;a=a===void 0?[]:a;if(h)return;h=!0;b("setTimeout")(function(){h=!1},1e3);if(!b("FBRTCSupport").isGroupCallWebtrcSupported()){b("Bootloader").loadModules(["MessengerRTCUnsupportedBrowserDialogController"],function(a){b("RTWebUserActionLogger").logError({callType:"mw",conferenceName:c,mediaType:b("RTWebUserActionLogger").getMediaType(!d),errorDomain:"unsupported browser"}),a.render({hasVideo:d,isGroupCall:!0})},"FBRTCCore");return}b("FBRTCCallUIWrapper").openGroupCallUI(c,b("generateRTCCallID")(),a,d,d,f,e)},isAvailableForWebrtcCalling:function(a){return b("FBRTCAvailability").isCallable(a)}};e.exports=a}),null);
__d("MessengerStateProcessor",["MercuryIDs","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerParticipants.bs","MessengerURIConstants","gkx"],(function(a,b,c,d,e,f){"use strict";a={preprocess:function(a){var c=a.activeThreadID;if(c){var d=b("MercuryIDs").getUserIDFromThreadID(c),e=d&&b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e&&e.type!=="event")a.threadKey=e.vanity||d;else if(d&&!e){e=b("MercuryIDs").getParticipantIDFromUserID(d);a.threadKey=b("MercuryVanityIDMap.bs").hasID(e)?b("MercuryVanityIDMap.bs").getVanity(e):d}else{e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(c);a.threadKey=d||(b("MercuryIDs").isGroupChat(c)&&b("gkx")("1235085")?c:b("MercuryIDs").tokenize(c).value)}}delete a.activeThreadID;return a},postprocess:function(a){var c=b("MercuryThreadIDMap").get(),d=g(a.threadKey),e;e=b("MercuryIDs").isValid(d)?d:c.getClientIDFromServerIDNow(d);if(!e){d=b("MessengerParticipants.bs").getIDFromVanityOrFBID(d);d&&(e=b("MercuryIDs").getThreadIDFromParticipantID(d))}e&&(a.activeThreadID=e,a.serverThreadID=c.getServerIDFromClientIDNow(e));delete a.threadKey;return a},supportInboxPostprocess:function(a){a.threadKey&&(a.activeThreadID=b("MercuryIDs").getThreadIDFromSupportInboxItemID(a.threadKey));delete a.threadKey;return a}};function g(a){return!a?null:a.startsWith(b("MessengerURIConstants").GROUP_PREFIX)?a.substr(b("MessengerURIConstants").GROUP_PREFIX.length):a}e.exports=a}),null);
__d("MessengerURISerializer",["CurrentEnvironment","MercuryFilters.bs","MercuryIDs","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase","gkx","qex"],(function(a,b,c,d,e,f){"use strict";var g,h="/?$",i="/",j=function(a,c){a.setPath(b("CurrentEnvironment").facebookdotcom?b("MessengerURIConstants").FACEBOOK_PREFIX+c:c)},k=b("qex")._("1097094"),l=function(a,c){var d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c=b("MessengerURIConstants").FACEBOOK_PREFIX+c);a.setPath(a.getPath()+c)};a={serialize:function(a){var c=b("gkx")("1289810"),d=new(g||(g=b("URI")))(b("WWWBase").uri);a=b("MessengerStateProcessor").preprocess(a);switch(a.masterView){case b("MessengerView").MASTER.PAYMENT:j(d,b("MessengerURIConstants").PAYMENT_PATH);break;case b("MessengerView").MASTER.PEOPLE:j(d,b("MessengerURIConstants").PEOPLE_PATH);break;case b("MessengerView").MASTER.SEARCH:j(d,b("MessengerURIConstants").SEARCH_PATH);break;case b("MessengerView").MASTER.SEARCH_MESSAGES:case b("MessengerView").MASTER.SEE_ALL_GROUPS:c&&j(d,b("MessengerURIConstants").TEAMWORK_GROUP_VIEW);break;case b("MessengerView").MASTER.SEE_ALL_PAGES:case b("MessengerView").MASTER.SEE_ALL_PEOPLE:k?j(d,b("MessengerURIConstants").SEARCH_PATH):c&&j(d,b("MessengerURIConstants").TEAMWORK_CHAT_VIEW);break;case b("MessengerView").MASTER.SEE_ALL_UNREAD:c&&j(d,b("MessengerURIConstants").TEAMWORK_UNREAD_VIEW);break}switch(a.folder){case b("MessagingTag").OTHER:j(d,b("MessengerURIConstants").FILTERED_REQUESTS_PATH);break;case b("MessagingTag").ACTION_ARCHIVED:j(d,b("MessengerURIConstants").ARCHIVED_PATH);break;case b("MessagingTag").PENDING:j(d,b("MessengerURIConstants").MESSAGE_REQUESTS_PATH);break;case b("MessagingTag").MARKETPLACE_FOLDER:j(d,b("MessengerURIConstants").FOLDERS_PATH+"/"+a.folderKey);break}a.detailView===b("MessengerView").DETAIL.GALLERY?j(d,b("MessengerURIConstants").GALLERY_PATH):a.detailView===b("MessengerView").DETAIL.PAYTHREAD?(l(d,b("MessengerURIConstants").PAYMENT_PAY_PATH),a.threadKey&&d.addQueryData("id",a.threadKey)):a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER?l(d,b("MessengerURIConstants").PAYMENT_PAY_PATH):a.detailView===b("MessengerView").DETAIL.COMPOSE?l(d,b("MessengerURIConstants").COMPOSE_SUBPATH):a.threadKey?a.masterView===b("MessengerView").MASTER.PAYMENT?(j(d,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):l(d,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey):a.masterView===b("MessengerView").MASTER.PAYMENT?(j(d,""),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):l(d,"");a.extraQueryParams&&d.addQueryData(a.extraQueryParams);b("MercuryFilters.bs").isSupportedFilter(a.filter)&&d.addQueryData({filter:a.filter});if(a.query!=null)if(a.masterView===b("MessengerView").MASTER.SEE_ALL_PEOPLE||a.masterView===b("MessengerView").MASTER.SEE_ALL_GROUPS||a.masterView===b("MessengerView").MASTER.SEE_ALL_PAGES)d.addQueryData("t",a.seeAllType),d.addQueryData("sa",a.query);else if(k)a.masterView===b("MessengerView").MASTER.SEARCH?d.addQueryData("q",a.query):a.masterView===b("MessengerView").MASTER.SEARCH_MESSAGES&&d.addQueryData("qa",a.query);else{d.addQueryData((c={},c[a.masterView===b("MessengerView").MASTER.SEARCH?"qa":"q"]=a.query,c))}a.threadIDs&&d.addQueryData({threadIDs:JSON.stringify(a.threadIDs)});a.mid&&d.addQueryData({mid:a.mid});return d},getNonMessengerState:function(){return{notMessenger:!0,filter:b("MercuryFilters.bs").all,folder:b("MessagingTag").INBOX,masterView:b("MessengerView").MASTER.RECENT}},deserialize:function(a){var c={},d=a.getPath(),e=b("gkx")("1300945"),f=new RegExp("^"+b("MessengerURIConstants").FACEBOOK_PREFIX+"(/|$)"),g=a.getQueryData().story_id!=null;if(b("CurrentEnvironment").facebookdotcom&&!(f.test(d)||e&&d=="/"&&!g))return this.getNonMessengerState();f=d.replace(b("MessengerURIConstants").FACEBOOK_PREFIX,"");var i;e=a.getQueryData();g=e.filter;d=e.mid;a=e.q;var j=e.qa,l=e.sa,o=e.t,p=e.threadIDs;e=babelHelpers.objectWithoutPropertiesLoose(e,["filter","mid","q","qa","sa","t","threadIDs"]);c.query=j||a;c.sa=l;c.seeAllType=o;if(p)try{i=JSON.parse(p)}catch(a){}i?c.threadIDs=i.filter(function(a){return b("MercuryIDs").isValidThreadID(a)}):c.threadIDs=null;f.match("^"+b("MessengerURIConstants").PEOPLE_PATH)?c.masterView=b("MessengerView").MASTER.PEOPLE:f.match("^"+b("MessengerURIConstants").PAYMENT_PATH)?c.masterView=b("MessengerView").MASTER.PAYMENT:f.match("^"+b("MessengerURIConstants").SEARCH_PATH)?k?c.masterView=this.updateMasterViewForSearchRefactor(j,l,o):c.masterView=b("MessengerView").MASTER.SEARCH:f.match("^"+b("MessengerURIConstants").TEAMWORK_GROUP_VIEW)?c.masterView=b("MessengerView").MASTER.SEE_ALL_GROUPS:f.match("^"+b("MessengerURIConstants").TEAMWORK_CHAT_VIEW)?c.masterView=b("MessengerView").MASTER.SEE_ALL_PEOPLE:f.match("^"+b("MessengerURIConstants").TEAMWORK_UNREAD_VIEW)?c.masterView=b("MessengerView").MASTER.SEE_ALL_UNREAD:c.masterView=b("MessengerView").MASTER.RECENT;f.match("^"+b("MessengerURIConstants").FILTERED_REQUESTS_PATH)?c.folder=b("MessagingTag").OTHER:f.match("^"+b("MessengerURIConstants").ARCHIVED_PATH)?c.folder=b("MessagingTag").ACTION_ARCHIVED:f.match("^"+b("MessengerURIConstants").MESSAGE_REQUESTS_PATH)?c.folder=b("MessagingTag").PENDING:f.match("^"+b("MessengerURIConstants").FOLDERS_PATH)?c.folder=b("MessagingTag").MARKETPLACE_FOLDER:c.folder=b("MessagingTag").INBOX;if(f.match(b("MessengerURIConstants").COMPOSE_SUBPATH+h))c.detailView=b("MessengerView").DETAIL.COMPOSE;else if(f.match("^"+b("MessengerURIConstants").PAYMENT_PATH+b("MessengerURIConstants").PAYMENT_PAY_PATH))e&&e.id?(c.threadKey=e.id,c.detailView=b("MessengerView").DETAIL.PAYTHREAD):c.detailView=b("MessengerView").DETAIL.PAYFRIENDPICKER;else{a=m(f);a&&(c.threadKey=a,c.detailView=b("MessengerView").DETAIL.THREAD);p=n(f);p&&(c.folderKey=p)}b("MercuryFilters.bs").isSupportedFilter(g)?c.filter=g:c.filter=b("MercuryFilters.bs").all;c.mid=d;c.extraQueryParams=e;if(c.masterView===b("MessengerView").MASTER.SUPPORT)return b("MessengerStateProcessor").supportInboxPostprocess(c);f.match("^"+b("MessengerURIConstants").GALLERY_PATH)&&(c.detailView=b("MessengerView").DETAIL.GALLERY);return b("MessengerStateProcessor").postprocess(c)},updateMasterViewForSearchRefactor:function(a,c,d){if(a)return b("MessengerView").MASTER.SEARCH_MESSAGES;else if(c&&d)switch(d){case"friend":case"non_friend":return b("MessengerView").MASTER.SEE_ALL_PEOPLE;case"page":return b("MessengerView").MASTER.SEE_ALL_PAGES;case"thread":return b("MessengerView").MASTER.SEE_ALL_GROUPS;default:return b("MessengerView").MASTER.SEARCH}else return b("MessengerView").MASTER.SEARCH}};function m(a){a=a.match(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+h);return a&&decodeURIComponent(a[1])}function n(a){a=a.match(b("MessengerURIConstants").FOLDERS_PATH+i+"([^/]+)"+b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+h);return a&&decodeURIComponent(a[1])}e.exports=a}),null);
__d("WorkGalahadChatChannelActions",["MercuryFilters.re","MessagingTag","WorkGalahadDispatcher"],(function(a,b,c,d,e,f){"use strict";function a(a){b("WorkGalahadDispatcher").dispatch({type:"galahad/chat_change_folder",folder:a})}function c(a){b("WorkGalahadDispatcher").dispatch({type:"galahad/chat_change_filter",filter:a})}e.exports={changeFolder:a,changeFilter:c}}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MessengerDispatcher","MessengerThreadFetchLoggerUtil","MessengerURISerializer","MessengerView","URI","WorkGalahadChatChannelActions","WorkGalahadSettings","goURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),j=b("LogHistory").getInstance("messenger_actions"),k={Types:i,changeDetailView:function(a){m(function(b){return b.detailView!==a?{detailView:a}:null})},changeMasterView:function(a){m(function(c){if(c.masterView!==a){var d={masterView:a};c.masterView===b("MessengerView").MASTER.SEARCH&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){a&&a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions"));return d}return null})},selectThread:function(a,c){if(c==="meeting_room_page"){n(a);return}b("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");b("MessengerDispatcher").dispatch({type:i.SELECT_THREAD,threadID:a});m(function(c){if(c.activeThreadID===a)return null;var d={query:c.query,activeThreadID:a,detailView:b("MessengerView").DETAIL.THREAD,mid:null};a&&(b("MessengerThreadFetchLoggerUtil").markerStart(a),c.query!==void 0&&c.masterView!==b("MessengerView").MASTER.SEARCH&&c.masterView!==b("MessengerView").MASTER.SEARCH_MESSAGES&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){if(!a&&!b)return;a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_BY_CHANGING_THREADS)},"MessengerActions")));return d})},changeState:function(a){b("MessengerDispatcher").dispatch({type:i.REPLACE_STATE,nextState:a})},changeMDotMeReferral:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:k.Types.UPDATE_MDOT_ME,refCode:a,refThreadID:c})},changeThreadTag:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:k.Types.UPDATE_THREAD_TAG,messagingTags:a,threadID:c})},changeFolder:function(a,c){b("WorkGalahadSettings").isGalahadEnabled?b("WorkGalahadChatChannelActions").changeFolder(a):m(function(b){return b.folder!==a?c?{folder:a,folderKey:c}:{folder:a}:null})},changeFilter:function(a){b("WorkGalahadSettings").isGalahadEnabled?b("WorkGalahadChatChannelActions").changeFilter(a):m(function(b){return b.filter!==a?{filter:a}:null})},changeMid:function(a){m(function(b){return b.mid!==a?{mid:a}:null})},changeID:function(a){m(function(b){return b.extraQueryParams.id!==a?{extraQueryParams:babelHelpers["extends"]({},b.extraQueryParams,{id:a})}:null})},prepareFilesForSend:function(a,c,d){j.debug("Add files from "+d,a);if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.PREPARE_FILES_FOR_SEND,threadID:a,files:c})},uploadedFile:function(a,c,d){if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.UPLOADED_FILE,threadID:a,uploadID:c,payload:d})},cancelFileUpload:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.CANCEL_FILE_UPLOAD,threadID:a,uploadID:c})},uploadFileFailed:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.UPLOAD_FILE_FAILED,threadID:a,uploadID:c})},cleanFiles:function(a){j.debug("clean files",a);if(!a)return;b("MessengerDispatcher").dispatch({type:k.Types.EMPTY_FILES,threadID:a})},loadingPreview:function(a,c){b("MessengerDispatcher").dispatch({type:k.Types.LINK_PREVIEW,threadID:a,match:c})},loadingShareData:function(a){b("MessengerDispatcher").dispatch({type:k.Types.LOADING_SHARE_DATA,threadID:a})},loadedShareData:function(a,c){b("MessengerDispatcher").dispatch({type:k.Types.LOADED_SHARE_DATA,threadID:a,attachmentData:c})},removeSharePreview:function(a){b("MessengerDispatcher").dispatch({type:k.Types.REMOVE_SHARE_PREVIEW,threadID:a})}};function l(a,b){return a.detailView==null}function m(a){var c=b("MessengerURISerializer").deserialize(new(h||(h=b("URI")))(window.location.href));a=a(c);var d=l(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}function n(a){!a&&g(0,5146);a=b("MercuryIDs").getUserIDFromThreadID(a);!a&&g(0,5147);var c=new(h||(h=b("URI")))(),d=c.getQualifiedURI().getSubdomain();c.setDomain("facebook.com").setSubdomain(d).setPath("/"+a).setProtocol("https");window.open(c,"_blank")}e.exports=k}),null);
__d("MessengerContactAdapters",["ImmutableObject","immutable"],(function(a,b,c,d,e,f){a={fromSearchableEntry:function(a){var c=a.getType(),d={alias:null,isMessengerUser:null,isWorkUser:null,isVerified:null,workForeignEntityInfo:null,participants:null,photo:a.getPhoto(),subtitle:a.getSubtitle(),thread:null,title:a.getTitle(),type:c,uid:a.getUniqueID(),timestamp:null,matchRanges:null};d.photo||(d.photo=null);var e=a.getAuxiliaryData();if(e){c=="message"&&(d.uid=e.thread_id);e.timestamp&&(d.timestamp=e.timestamp);c==="message"&&e.matchRanges!=null&&(d.matchRanges=e.matchRanges);a=c==="message"&&e.messageResultType==="groupConversation";c==="thread"||a?(d.thread=new(b("ImmutableObject"))(e.thread),d.participants=b("immutable").Map().withMutations(function(a){e.participantsToRender.forEach(function(b){a.set(b.id,b)})})):(d.isMessengerUser=e.isMessengerUser,d.isWorkUser=e.isWorkUser,d.isVerified=e.isVerified,d.workForeignEntityInfo=e.workForeignEntityInfo,d.alias=e.alias)}return new(b("ImmutableObject"))(d)},fromMercuryParticipant:function(a){return new(b("ImmutableObject"))({alias:a.alias,uid:a.id,photo:a.image_src,title:a.name,subtitle:a.title?a.title:"",type:a.type,isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,isVerified:a.is_verified,isCoworker:a.is_coworker,href:a.href,timezone:a.timezone,workForeignEntityInfo:a.work_foreign_entity_info})}};e.exports=a}),null);
__d("MessengerProfileImageWrapperReact.bs",["cx","cssVar","React","bs_caml_option","CurrentUser","ReasonReact.bs","TooltipData","joinClasses","MessagingThreadType","getViewportDimensions","MessengerDotComAndInboxM4Check.bs","LazyWorkMultiCompanyChatTooltip.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("ReasonReact.bs").statelessComponent("MessengerProfileImageWrapperReact");function a(a){var c=a.ariaHidden,d=a.customBadge,e=a.isMessengerUser,f=a.isPartiesUser,g=a.threadColor,h=a.threadType,j=a.tooltipContent,k=a.size,l=a.isMultiCompany,m=a.className,n=a.showBadge;a=a.children;m=m!==void 0?m:"";var o=function(a){if(d!==void 0)return i.jsx("div",{children:i.jsx("div",{children:b("bs_caml_option").valFromOption(d),className:"_2pon _67in"}),className:"_4ld_ _2pom"});else{if(e===void 0&&f===void 0&&l===void 0)return null;if(n)if(f!==void 0)if(b("CurrentUser").isWorkUser())return null;else return i.jsx("div",{children:i.jsx("div",{className:"_2pon _2poo"}),className:"_4ld_ _2pom"});else if(l!==void 0)if(b("CurrentUser").isWorkUser()){a=l;var c=k!==void 0?k>45:!1;return i.jsx("div",{children:i.jsx(b("LazyWorkMultiCompanyChatTooltip.react"),{children:i.jsx("div",{className:(a&&!c?"_4rwy":"")+(a&&c?" _2zb5":"")})}),className:"_4ld_ _2pom"+(c?"":" _91qq")})}else return null;else if(b("CurrentUser").isWorkUser())return null;else{a=e;return i.jsx("div",{children:i.jsx("div",{className:"_2pon"+(a?" _2poo":"")+(a?"":" _2pop")}),className:"_4ld_ _2pom"})}else return null}},p=k!==void 0?""+(String(k)+"px"):"auto";h=h!==void 0?h===b("MessagingThreadType").ROOM:!1;var q;if(j!==void 0){var r=j;if(r==="")q={};else{var s=b("getViewportDimensions")().width,t=parseInt("700px".replace("px",""),10);s=s<=t?"above":"left";q=Object.assign({},b("TooltipData").propsFor(r,s))}}else q={};t=j!==void 0&&j!==""?0:void 0;r=h?{background:g!==void 0?g:"#0084ff",height:p,width:p}:{height:p,width:p};s={children:a,className:"_4ld-"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7q1r":"")+(h?" _180i":""),style:r};t!==void 0&&(s.tabIndex=b("bs_caml_option").valFromOption(t));j={children:[i.jsx("div",s),o(0)],className:b("joinClasses")("_4ldz",m),style:{height:p,width:p}};c!==void 0&&(j["aria-hidden"]=b("bs_caml_option").valFromOption(c));return i.cloneElement(i.jsxs("div",j),q)}d=a;e=a;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("MessengerProfileImageWrapperReact.re",["MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerProfileImageWrapperReact.bs").make;f.make=a;(function(a){return null});c=b("MessengerProfileImageWrapperReact.bs").jsComponent;f.jsComponent=c}),null);
__d("MessengerContactImage.react",["Image.react","MessengerProfileImageWrapperReact.re","React"],(function(a,b,c,d,e,f){var g=b("MessengerProfileImageWrapperReact.re").jsComponent,h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return h.jsx("div",{className:this.props.className,children:h.jsx(g,{isMessengerUser:(a=this.props.isMessengerUser)!=null?a:void 0,isPartiesUser:(a=this.props.isPartiesUser)!=null?a:void 0,size:this.props.size,customBadge:this.props.customBadge,showBadge:!1,children:h.jsx(b("Image.react"),{alt:"",height:this.props.size,src:this.props.src,width:this.props.size})})})};return c}(h.PureComponent);e.exports=a}),null);
__d("MessengerTypeaheadUtils",["ix","fbt","MessengerEnvironment","ReactDOM","SearchableEntry","asset","gkx","immutable","mapObject","qex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("immutable").OrderedMap,k=500,l=100,m="__special_search_entry__",n=["search","friend","fb4c","message","thread","meeting_room_page","internal_bot_page","non_friend","page","game"],o=["search","friend","fb4c","message","thread","meeting_room_page","internal_bot_page","page","non_friend","game"],p=(a={},a.search={header:""},a.friend={header:h._("Contacts")},a.fb4c={header:h._("Colleagues")},a.message={header:h._("Messages")},a.thread={header:h._("Group conversations")},a.page={header:h._("Businesses")},a.meeting_room_page={header:h._("Meeting rooms")},a.internal_bot_page={header:h._("Bots")},a.non_friend={header:h._("More people")},a.game={header:h._("Games")},a);c={sortEntries:function(a,c){var d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[];a.forEach(function(a){switch(a.getType()){case"friend":e.push(a);break;case"fb4c":f.push(a);break;case"message":g.push(a);break;case"thread":h.push(a);break;case"page":case"commerce_page":j.push(a);break;case"non_friend":i.push(a);break;case"meeting_room_page":k.push(a);break;case"internal_bot_page":l.push(a);break;case"search":d.push(a);break;case"game":m.push(a);break}});if(b("qex")._("882163")){c=b("qex")._("899030");a=c===2||c===3?j.slice(0,c):j;return d.concat(e,f,g,h,k,l,a,i,m)}return d.concat(e,f,g,h,k,l,i,j,m)},sortEntriesWithoutPages:function(a){var b=[],c=[],d=[],e=[];a.forEach(function(a){switch(a.getType()){case"friend":b.push(a);break;case"fb4c":c.push(a);break;case"thread":d.push(a);break;case"non_friend":e.push(a);break}});return b.concat(c,d,e)},sortEntriesWithoutGroupsOrViewer:function(a,b){var c=[],d=[],e=[];a.forEach(function(a){if(a.getUniqueID()===b)return;switch(a.getType()){case"friend":c.push(a);break;case"fb4c":d.push(a);break;case"non_friend":e.push(a);break}});return c.concat(d,e)},getEntryOrder:function(a,c){if(c==null)if(b("qex")._("882163"))return o;else return n;else return c},orderEntries:function(a,b){var c=this,d=[];this.getEntryOrder(b).filter(function(a){return a!=="search"}).concat("search").forEach(function(b){return d.push.apply(d,a.filter(function(a){return c.areSectionsEqual(a.getType(),b)}))});return d},buildSingleSection:function(a){return j([[[""],a]])},buildListSections:function(a,c,d){if(!a.length)return j();d=this.getEntryOrder(c,d);var e=(i||(i=b("mapObject")))(p,function(a){return babelHelpers["extends"]({},a,{entries:[]})});e.commerce_page=e.page;var f=b("qex")._("861958");c===""&&f===!0&&(e.friend.header=h._("Suggested"));a.forEach(function(a){var b=a.getType();e[b]&&e[b].entries.push(a)});return j(d.filter(function(a){return e[a].entries.length}).map(function(a){return[[e[a].header,a],e[a].entries]}))},buildCustomSection:function(a,b){var c;return c={},c[a]=b,c},areSectionsEqual:function(a,b){return a==="commerce_page"?b==="commerce_page"||b==="page":a===b},scrollEntryIntoView:function(a,c){var d=b("ReactDOM").findDOMNode(c),e=c.getScrollTop(),f=a.offsetTop-e;d=d.offsetHeight-a.offsetHeight;a=Math.abs(d-f);f>=d&&a<=l?c.scrollToPosition(e+f-d,!0,{duration:k}):f<0&&a<=d+l&&c.scrollToPosition(e+f,!0,{duration:k})},getMessageSearchEntry:function(a){return b("gkx")("860320")||!b("MessengerEnvironment").messengerui||a.length<2?null:new(b("SearchableEntry"))({uniqueID:m,title:h._("Search messages for \"{queryString}\"",[h._param("queryString",a)]),photo:g("465522"),type:"search"})},isMessageSearchEntry:function(a){return a.getUniqueID()===m}};e.exports=c}),null);
__d("MessengerGraphQLTypeaheadHighlighter",["Keys","MessengerTypeaheadUtils"],(function(a,b,c,d,e,f){"use strict";a={getNextHighlightedEntry:function(a,c,d,e){var f=[];b("MessengerTypeaheadUtils").getEntryOrder(d).forEach(function(a){return f.push.apply(f,c.filter(function(c){return b("MessengerTypeaheadUtils").areSectionsEqual(c.getType(),a)}))});if(!e){if(f.length===0)return null;if(a===b("Keys").DOWN){d=f[0];return d.getType()==="search"&&f.length>1?f[1]:d}return a===b("Keys").UP?f[f.length-1]:null}var g=e.getUniqueID();d=f.findIndex(function(a){return a.getUniqueID()===g});if(d===-1)return null;a===b("Keys").DOWN?(d+=1,d>=f.length&&(d=0)):a===b("Keys").UP&&(d-=1,d<0&&(d=f.length-1));return f[d]}};e.exports=a}),null);
__d("MessengerGraphQLTypeaheadAdapter",["fbt","MercuryIDs","SearchableEntry","WorkForeignEntityType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return b("MercuryIDs").isValid(a)?a:b("MercuryIDs").getParticipantIDFromUserID(a)}function i(a){var b=a.scim_company_user&&a.scim_company_user.company_title;a=a.is_viewer_coworker?null:a.work_info&&a.work_info.work_community&&a.work_info.work_community.name;if(a&&b)return a+" \u2022 "+b;else if(a)return a;else if(b)return b;return null}function j(a,b){var c=null;a.members&&a.members.edges&&a.members.edges.length>0?c=a.members.edges.map(function(a){return a.node.name}).join(", "):a.is_work_user?c=i(a):b&&a.is_viewer_friend===!1&&(c=b);return c}var k={convertWorkChatProfileToEntry:function(a,c){var d;if(!a||!a.id||!a.name)return null;var e="non_friend";d=a.is_viewer_coworker||((d=a.work_foreign_entity_info)!=null?d.type:d)==="NOT_FOREIGN";a.is_work_user&&d&&(e="fb4c");return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:e,subtitle:c,photo:a.profile_picture&&a.profile_picture.uri,auxiliaryData:{isWorkUser:a.is_work_user,workForeignEntityInfo:a.work_foreign_entity_info},order:-a.viewer_affinity})},convertProfileToEntry:function(a,c){var d;if(!a||!a.id||!a.name)return null;var e="non_friend";d=a.is_viewer_coworker||((d=a.work_foreign_entity_info)!=null?d.type:d)==="NOT_FOREIGN";a.is_work_user&&d?e="fb4c":(a.is_viewer_friend||a.messenger_contact.is_on_viewer_contact_list||d&&a.viewer_affinity>0)&&(e="friend");d=j(a,c);return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:e,subtitle:d,photo:a.profile_picture&&a.profile_picture.uri,uri:a.url,auxiliaryData:{isMemorializedUser:a.is_memorialized,isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,isVerified:a.is_verified,isActiveAccount:a.work_info&&a.work_info.is_active_account,workForeignEntityInfo:a.work_foreign_entity_info,alias:a.username},order:-a.viewer_affinity})},convertIGMessagingUserToEntry:function(a){return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:"friend",subtitle:"Instagram",photo:a.profile_picture&&a.profile_picture.uri,uri:null,auxiliaryData:{},order:0})},convertPageToEntry:function(a,c){if(!a||!a.id||!a.name)return null;return a.instant_game_info?this.convertGameToEntry(a,c):new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:c,photo:a.profile_picture&&a.profile_picture.uri,uri:a.url,auxiliaryData:{isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,canViewerMessage:a.can_viewer_message,isVerified:a.is_verified,canViewerAddToGroupChat:a.can_viewer_add_to_group_chat},order:0})},convertGameToEntry:function(a,c){return!a||!a.id||!a.name||!a.instant_game_info?null:new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:"game",photo:a.instant_game_info&&a.instant_game_info.icon_uri,uri:a.instant_game_info&&a.instant_game_info.game_uri,order:0})},convertMessageToEntry:function(a){var c,d;c=a==null?void 0:(c=a.message_thread)==null?void 0:c.thread;d=a==null?void 0:(d=a.matched_message)==null?void 0:d.message;var e=a==null?void 0:a.thread_id,f=a==null?void 0:a.matched_message;a=Number(a==null?void 0:(a=a.message_thread)==null?void 0:a.approx_count);if(c==null||d==null||e==null||f==null||a==null)return null;var i="message:"+e,j=d.snippet,l=g._("{number of messages} matched messages",[g._param("number of messages",a)]);l=a>1?l:j;j=d.timestamp;typeof j==="number"&&a===1?j*=1e3:j=void 0;a=a==1?(d=f)!=null?(d=d.search_result_context)!=null?d.match_ranges:d:d:null;f={matchRanges:a,timestamp:j,thread_id:e,messageResultType:"1on1Conversation"};d="";a=null;if(c.image!==void 0){c.thread_name&&(d=c.thread_name);c.image&&(a=c.image.uri);if(c.all_participants&&c.all_participants.nodes&&c.all_participants.count){if(d==""){j=c.all_participants.count;var m=c.all_participants.nodes.map(function(a){return a.messaging_actor.name}).filter(Boolean);d=k.getParticipantsText(!0,m,j)}m=c.all_participants.nodes.map(function(a){a=h(a.messaging_actor.id);return{id:a}});f=babelHelpers["extends"]({},f,{messageResultType:"groupConversation",participantsToRender:m,thread:{thread_id:e,image_src:a,participants:m.map(function(a){return a.id})}})}}else if(c.all_participants&&c.all_participants.nodes[0]&&c.all_participants.nodes[0].messaging_actor){j=c.all_participants.nodes[0].messaging_actor;j.name&&(d=j.name);j.profile_picture&&(a=j.profile_picture.uri);typeof j.is_memorialized==="boolean"&&(f.isMemorializedUser=j.is_memorialized);typeof j.is_messenger_user==="boolean"&&(f.isMessengerUser=j.is_messenger_user);typeof j.is_work_user==="boolean"&&(f.isWorkUser=j.is_work_user);typeof j.is_verified==="boolean"&&(j.__typename==="User"||j.__typename==="Page"?f.isVerified=j.is_verified:f.isVerified=!1);typeof j.username==="string"&&(f.alias=j.username);j.work_foreign_entity_info&&(f.workForeignEntityInfo=j.work_foreign_entity_info)}return new(b("SearchableEntry"))({uniqueID:i,title:d,subtitle:l,type:"message",photo:a,uri:null,order:0,auxiliaryData:f})},convertGroupToEntry:function(a,c){var d;if(!a||!a.thread_key||!a.is_group_thread)return null;var e=a.thread_key.thread_fbid;if(!e)return null;var f=a.image&&a.image.uri;d=a==null?void 0:(d=a.other_participants)==null?void 0:d.edges;if(d==null)return null;d=d.map(function(a){return a.node.messaging_actor.name});d=k.getParticipantsText(!1,d,a.other_participants.count);var g=a.name,i=null;!g?g=d:i=d;if(!g)return null;d={};d.thread={thread_id:e,other_user_fbid:null,image_src:f,participants:a.other_participants.edges.map(function(a){return h(a.node.messaging_actor.id)})};d.participantsToRender=a.other_participants.edges.map(function(a){return{id:h(a.node.messaging_actor.id),is_messenger_user:a.node.messaging_actor.is_messenger_user,is_coworker:a.node.messaging_actor.is_viewer_coworker}});return new(b("SearchableEntry"))({uniqueID:e,order:c,photo:f,title:g,subtitle:i,type:"thread",auxiliaryData:d})},convertMSQGroupToEntry:function(a,c,d){var e,f;if(!a||!a.thread_key)return null;e=a==null?void 0:(e=a.thread_key)==null?void 0:e.thread_fbid;if(!e)return null;var g=a.image&&a.image.uri;f=a==null?void 0:(f=a.all_participants)==null?void 0:f.edges;if(f==null)return null;f=f.filter(function(a){return a.node.id!==d});var i=f.map(function(a){return a.node.messaging_actor.name});i=k.getParticipantsText(!0,i,a.all_participants.count);a=a.thread_name;var j=null;!a?a=i:j=i;if(!a)return null;i={};i.thread={thread_id:e,other_user_fbid:null,image_src:g,participants:f.map(function(a){return h(a.node.messaging_actor.id)})};i.participantsToRender=f.map(function(a){return{id:h(a.node.messaging_actor.id),is_messenger_user:a.node.messaging_actor.is_messenger_user,is_coworker:a.node.messaging_actor.is_viewer_coworker}});return new(b("SearchableEntry"))({uniqueID:e,order:c,photo:g,title:a,subtitle:j,type:"thread",auxiliaryData:i})},getValidatedMatchesRanges:function(a,b){if(!Array.isArray(a))return[];a=[].concat(a).filter(function(a){var c=a.length;a=a.offset;if(typeof c!=="number"||typeof a!=="number")return;return c>0&&a>=0&&a+c<=b.length}).sort(function(a,b){return a.offset-b.offset});var c=[];a.forEach(function(a,b){if(b!=0){b=c[c.length-1];b=b.offset+b.length;if(a.offset<b)return}c.push(a)});return c},getParticipantsText:function(a,b,c,d){d===void 0&&(d=3);if(a===null||c==null)return b.join(", ");var e=1;a||(c+=e);var f=b.length<=d;a=a&&b.length===c;if(f&&a)return b.slice(0,-1).join(", ");f=b.slice(0,d);a=c-e-f.length;return a<1?f.join(", "):g._("{name of the first n participants} and {number of other participants} more",[g._param("name of the first n participants",f.join(", ")),g._param("number of other participants",a)])}};e.exports=k}),null);
__d("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2339215389425518"};b.getQueryID=function(){return"339708329890231"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerNewGroupParticipantSuggestionLocalCacheManager",["AsyncRequest","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,c){this.entriesPromise=null,this.orderedFriendEntries=null,this.alreadyParticipatingIDs=null,this.shouldRefetch=!1,this.cursor=null,this.threadFBID=a,this.alreadyParticipatingIDs=c,this.callbackManager=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null})}var c=a.prototype;c.onEntriesLoaded=function(a){var c=this;if(this.orderedFriendEntries!==null&&!this.shouldRefetch){a(this.orderedFriendEntries);return}if(this.entriesPromise===null||this.shouldRefetch){var d=this.alreadyParticipatingIDs?this.alreadyParticipatingIDs.toArray():null;d=b("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getURI({original_participant_ids:d,count:50});this.entriesPromise=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload().data}).then(function(a){var d=a.viewer.messenger_contextual_ranked_users.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});c.callbackManager.addLocalEntries(d);c.orderedFriendEntries=d;d=(d=a)!=null?(d=d.viewer)!=null?(d=d.messenger_contextual_ranked_users)!=null?(d=d.page_info)!=null?d.has_next_page:d:d:d:d;d&&(c.cursor=a.viewer.messenger_contextual_ranked_users.page_info.end_cursor)})}this.entriesPromise&&b("promiseDone")(this.entriesPromise,function(){a(c.orderedFriendEntries),c.loadMoreFriends(),c.shouldRefetch=!1},b("emptyFunction"))};c.loadMoreFriends=function(){var a=this;if(this.cursor==null)return;var c=this.cursor;this.cursor=null;b("promiseDone")(new(b("AsyncRequest"))(b("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getLegacyURI({cursor:c})).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(c){a.callbackManager.addLocalEntries(c.viewer.messenger_contextual_ranked_users.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null}))})};c.search=function(a,b){var c=this;this.onEntriesLoaded(function(){c.callbackManager.search(a,function(c){b(c,a)})})};c.participantsSame=function(a){return this.twoIDsListEquals(this.alreadyParticipatingIDs,a)};c.twoIDsListEquals=function(a,b){return a?b.size!==a.size?!1:b.isSuperset(a):b.size==0};c.setRefetchAndRefreshData=function(a){this.shouldRefetch=!0,this.alreadyParticipatingIDs=a};c.isBootstrapped=function(a){return this.orderedFriendEntries!==null&&this.participantsSame(a)};return a}();a=function(){a.get=function(){return h.get()};function a(){this.threadFBIDToCacheMap=new Map()}var b=a.prototype;b.onEntriesLoaded=function(a,b,c){var d=this.threadFBIDToCacheMap.get(a);!d?(d=new g(a,b),this.threadFBIDToCacheMap.set(a,d)):d.participantsSame(b)||d.setRefetchAndRefreshData(b);d.onEntriesLoaded(c)};b.search=function(a,b,c,d){var e=this.threadFBIDToCacheMap.get(a);!e?(e=new g(a,b),this.threadFBIDToCacheMap.set(a,e)):e.participantsSame(b)||e.setRefetchAndRefreshData(b);e.search(c,d)};b.isBootstrapped=function(a,b){if(!a)return!1;a=this.threadFBIDToCacheMap.get(a);return a?a.isBootstrapped(b):!1};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2046569042080039"};b.getQueryID=function(){return"2118248735074331"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerRoomWithAssocObjectAudienceLocalCacheManager",["AsyncRequest","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","MessengerRoomWithAssocObjectAudienceWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a){this.entriesPromise=null,this.audienceEntries=null,this.threadFBID=a,this.callbackManager=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null})}var c=a.prototype;c.onEntriesLoaded=function(a){var c=this;if(this.audienceEntries!==null){a(this.audienceEntries,!0);return}if(this.entriesPromise===null){var d=b("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery").getURI({thread_fbid:this.threadFBID,first:30});this.entriesPromise=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){a=a.data.message_thread.messaging_audience_list.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});c.callbackManager.addLocalEntries(a);c.audienceEntries=a})}this.entriesPromise&&b("promiseDone")(this.entriesPromise,function(){a(c.audienceEntries,!0)},b("emptyFunction"))};c.search=function(a,b){var c=this;this.onEntriesLoaded(function(){c.callbackManager.search(a,function(c){b(c,a)})})};c.isBootstrapped=function(){return this.audienceEntries!==null};return a}();a=function(){a.get=function(){return h.get()};function a(){this.threadFBIDToCacheMap=new Map()}var b=a.prototype;b.onEntriesLoaded=function(a,b){var c=this.threadFBIDToCacheMap.get(a);c||(c=new g(a),this.threadFBIDToCacheMap.set(a,c));c.onEntriesLoaded(b)};b.search=function(a,b,c){var d=this.threadFBIDToCacheMap.get(a);d||(d=new g(a),this.threadFBIDToCacheMap.set(a,d));d.search(b,c)};b.isBootstrapped=function(a){if(!a)return!1;a=this.threadFBIDToCacheMap.get(a);return a?a.isBootstrapped():!1};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerBootloadedSecondarySearchLogger",["Bootloader","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";var g=[],h="",i={LOCAL_CONTACTS:[],ORDERED_GCF_FRIENDLIST:[],SHORT_PROFILES:[],SUGGESTED_RECIPIENTS:[]},j=!1,k=!1;d=(c=b("MessengerSecondarySearchFunnelConstants")).EVENTS;var l=d.CLICK_OTHER_THREAD,m=d.END,n=d.IMPRESSIONS,o=d.START,p=d.QUERY_CHANGED,q=d.RESULT_SELECTED,r=d.SOURCE_ENDED,s=d.SOURCE_STARTED,t=d.TOKEN_REMOVED;f=c.END_ACTIONS;var u=f.ABANDON,v=f.SINGLE_RESULT_SELECTED;d=c.SOURCES;var w=d.SERVER,x=d.SHORT_PROFILES,y=d.SUGGESTED_RECIPIENTS,z=d.LOCAL_CONTACTS,A=d.LOCAL_AND_SERVER,B=d.ORDERED_GCF_FRIENDLIST,C=c.ENTRY_SURFACES.COMPOSER;function D(a){if(i.SUGGESTED_RECIPIENTS.includes(a))return y;else if(i.ORDERED_GCF_FRIENDLIST.includes(a))return B;else if(i.SHORT_PROFILES.includes(a))return x;else if(i.LOCAL_CONTACTS.includes(a))return z;else return w}function a(a){if(!b("gkx")("678592"))return;b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(c){switch(a.name){case o:if(a.surface===C&&k===!0){c.reenterSearch(a.loggingID);break}j=!1;i={LOCAL_CONTACTS:[],ORDERED_GCF_FRIENDLIST:[],SHORT_PROFILES:[],SUGGESTED_RECIPIENTS:[]};c.startFunnel(a.client,a.surface,a.surface,null,a.loggingID);a.surface===C&&(k=!0);break;case m:var d=a.end_reason;a.surface===b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.BROADCAST&&(d=j?v:u);c.endFunnel(b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d,a.loggingID,a.threadID,a.isNewThread);k=!1;break;case n:d=a.entries.map(function(a){a.data_source=[D(a.result_fbid)];return a});g=a.entries.map(function(a){return a.result_fbid});c.impressions(a.query,d,A,a.loggingID);break;case p:h=a.query;c.queryChanged(a.query,a.loggingID);break;case q:j=!0;d=D(a.id);var e=g.indexOf(a.id);c.resultSelected(a.id,e,a.type,a.query?a.query:h,d,a.surface,a.loggingID,a.selectionType);break;case r:e=!a.query||a.query===h;switch(a.source){case z:i.LOCAL_CONTACTS=a.ids?a.ids:[];break;case y:i.SUGGESTED_RECIPIENTS=a.ids?a.ids:[];break;case x:i.SHORT_PROFILES=a.ids?a.ids:[];e=!0;break;case B:i.ORDERED_GCF_FRIENDLIST=a.ids?a.ids:[];e=!0;break;default:break}c.sourceEnded(a.query,a.numResults,a.source,a.status,e,a.loggingID);break;case s:c.sourceStarted(a.query,a.source,a.loggingID);break;case t:c.tokenRemoved(a.deletedIDs,a.clearedAll,a.loggingID);break;case l:c.unfocusSearch(a.loggingID);break}},"MessengerBootloadedSecondarySearchLogger")}e.exports={logSearchEvent:a}}),null);
__d("MNPlatformAttributionTags",[],(function(a,b,c,d,e,f){e.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGERDOTCOM:"messengerdotcom",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}}),null);
__d("MessengerStore",["MessengerDispatcher","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=b("MessengerDispatcher").register(this.__onDispatch.bind(this))}var c=a.prototype;c.getDispatchToken=function(){return this.$1};c.emitChange=function(){this.emit("change")};c.destroy=function(){b("MessengerDispatcher").unregister(this.$1)};return a}();b("mixInEventEmitter")(a,{change:!0});e.exports=a}),null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null};return b}var d=c.prototype;d.getState=function(){return this.$MessengerAttributionTagsStore1};d.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=a.messagingTags;this.$MessengerAttributionTagsStore1.threadID=a.threadID;this.emitChange();break;case b("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MNPlatformTagsDataManager",["MessengerActions","MessengerAttributionTagsStore","MessengerDiscoveryEntryPointsLoggingHelper","MNPlatformAttributionTags"],(function(a,b,c,d,e,f){"use strict";e.exports={getTags:function(a){a===void 0&&(a=null);var c=null,d=null;switch(a){case"source:pages:message_shortlink":c=b("MNPlatformAttributionTags").M_DOT_ME;break;case"source:messenger:web":c=b("MNPlatformAttributionTags").MESSENGER_WEB;break;case"source:messenger:web_search":c=b("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;d=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr(["messengerdotcom:web_search"]);break;case"source:discovery:customer_chat_plugin":c=b("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;case"source:pages:page_plugin_message":c=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr(["messengerdotcom:pages_plugin"]);break;default:c="";break}a=[c];d!==null&&a.push(d);return a},updateThreadTabAfterSelectThread:function(a,c){a===void 0&&(a=null);c===void 0&&(c=null);a=this.getTags(a);b("MessengerActions").changeThreadTag(a,c)},hasThreadTags:function(a){var c=b("MessengerAttributionTagsStore").getState();return!!(c.messagingTags&&a&&c.threadID&&c.threadID.toString()===a)},getThreadTags:function(){var a=b("MessengerAttributionTagsStore").getState();return a.messagingTags}}}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH:"search_from_integrated_message_search",SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads"});c=Object.freeze(babelHelpers["extends"]({},b,{END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button",END_BY_CHANGING_THREADS:"end_by_changing_threads"}));e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:c,ENTRY_SURFACES:b}}),null);
__d("MessengerPaymentFriendsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1959479940789272"};b.getQueryID=function(){return"2171073576453933"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPaymentFriendsLocalCache",["AsyncRequest","MessengerGraphQLTypeaheadAdapter","MessengerPaymentFriendsQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null}),h=null,i=null,j={onEntriesLoaded:function(a){if(i){a(i);return}if(!h){var c=b("MessengerPaymentFriendsQueryWebGraphQLQuery").getURI({first:50});h=new(b("AsyncRequest"))(c).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){var c=a.data.viewer.all_friends.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});g.addLocalEntries(c);i=c;a.data.viewer.all_friends.page_info.end_cursor})}b("promiseDone")(h,function(){a(i)},b("emptyFunction"))},search:function(a,b){j.onEntriesLoaded(function(){g.search(a,function(c){b(c,a)})})},isBootstrapped:function(){return i!==null}};e.exports=j}),null);
__d("MessengerSearchQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2268911786543136"};b.getQueryID=function(){return"604329370331165"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSearchSeeAllQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2778926592129629"};b.getQueryID=function(){return"509156833039109"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerGroupSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2950938174931326"};b.getQueryID=function(){return"666334973823993"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerMessageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2706854202719826"};b.getQueryID=function(){return"332444434106998"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2230378867058421"};b.getQueryID=function(){return"419711615545533"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerProfileSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2530922320303835"};b.getQueryID=function(){return"1187203711467179"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2239687859487185"};b.getQueryID=function(){return"398906294161848"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSearchWebGraphQLFetcherUtils",["CurrentUser","MessengerGroupSearchResultsQueryWebGraphQLQuery","MessengerMessageSearchResultsQueryWebGraphQLQuery","MessengerPageSearchResultsQueryWebGraphQLQuery","MessengerProfileSearchResultsQueryWebGraphQLQuery","MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery","gkx"],(function(a,b,c,d,e,f){"use strict";a={formSearchRequests:function(a,c,d){var e={profiles:[],pages:[],rooms:[],messages:[]},f=b("CurrentUser").isWorkUser()&&b("gkx")("903262")?"workchat":"web_messenger_composer";a.forEach(function(a){switch(a){case"users":a=Math.floor(Math.random()*65536);e.profiles.push(new(b("MessengerProfileSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,can_viewer_send_money:d.canViewerSendMoneyFilter,session:a.toString(),exclude_ids:d.localEntryIDs,context:f}));break;case"groups":e.profiles.push(new(b("MessengerGroupSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.groupLimit,exclude_ids:d.localEntryIDs,context:f}));break;case"messages":e.messages.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.messageLimit,exclude_ids:[],context:f}));break;case"pages":e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!0,include_games:!0,internal_bot:!1,vc_endpoint:!1,context:f}));d.shouldQueryInternalBot===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!0,vc_endpoint:!1,context:f}));d.shouldQueryVCEndpoint===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!1,vc_endpoint:!0,context:f}));break;case"rooms":d.threadFBID!=null&&e.rooms.push(new(b("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,thread_fbid:d.threadFBID}))}});return e},formMSQMessageSearchRequest:function(a,c){var d=[];d.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:a,result_limit:c,exclude_ids:[],context:"web_messenger_composer"}));return d}};e.exports=a}),null);
__d("MessengerUniversalSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a={END:"end",IMPRESSIONS:"impressions",QUERY_CHANGED:"query_changed",REENTERED:"reentered",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start"};b={FIRST:"first",SEE_ALL:"see_all"};c={USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",COWORKER:"coworker",MESSAGE:"message",OTHER:"other"};d={MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"};f=Object.freeze({INBOX:"inbox",SIDEBAR:"sidebar"});var g={NULL_STATE:"null_state",TYPEAHEAD:"typeahead"},h={LOCAL:"local",SERVER:"server",SERVER_XCONTROLLER:"server_xcontroller",LOCAL_AND_SERVER:"local_and_server",SERVER_USERS_GROUPS:"server_users_groups",SERVER_PAGES:"server_pages",SERVER_ROOMS:"server_rooms"},i={FAILED:"failed",FINISHED:"finished"},j={LOCAL:"local",SERVER:"server"},k={END_ACTION:"end_action"},l=Object.freeze({ABANDON:"abandon",RESULT_SELECTED:"result_selected",MESSAGE_SEARCH:"message_search",ENTER_INTEGRATED_MESSAGE_SEARCH:"enter_integrated_message_search",SEND:"send",CALL:"call"});e.exports={NAME:"MESSENGER_UNIVERSAL_SEARCH_FUNNEL",TYPE:"UNIVERSAL",END_ACTIONS:l,END_REASONS:k,ENTRY_SURFACES:f,EVENTS:a,INTERFACES:d,QUERY_PROGRESS:i,RESULT_PAGES:b,RESULT_SURFACES:g,RESULT_TYPES:c,SOURCES:h,UI_SECTIONS:j}}),null);
__d("PromiseUtil",["Promise","nullthrows","promiseDone"],(function(a,b,c,d,e,f){var g={allSettled:function(a){var c=b("Promise").all(a);return b("Promise").all(a.map(function(a){return b("Promise").resolve(a).then(void 0,function(a){return void 0})})).then(function(){return c})},allSettledInSeries:function(a){var c=[];return a.reduce(function(a,b){return a.then(b).then(function(){return void 0},function(a){c.push(a);return void 0})},b("Promise").resolve()).then(function(){if(c.length)throw c[0]})},exponentialBackoff:function(a,b,c){b===void 0&&(b=Math.sqrt(2));c===void 0&&(c=1);var d=c;c=function(){var a=d;d*=b;return a};return g.rateLimit(a,c)},forEach:function(a,c){return a.then(function(a){return b("Promise").resolve(c(a)).then(function(){return a})})},forEachError:function(a,c){return a.then(void 0,function(a){return b("Promise").resolve(c(a)).then(function(){throw a})})},iterateUntil:function(a,c){var d=function d(e){return c(e)?b("Promise").resolve(e):b("Promise").resolve(a(e)).then(d)};return d},pollUntilImpl:function(a,c){var d,e=new(b("Promise"))(function(b,e){var f=function(){try{var c=a();c&&b(c.value)}catch(a){e(a)}};d=setInterval(f,1e3*c)});return e["finally"](function(){return clearInterval(b("nullthrows")(d))})},pollUntil:function(a,b){b===void 0&&(b=1);return g.pollUntilImpl(function(){var b=a();return b?{value:b}:void 0},b)},rateLimit:function(a,b){var c=[],d=void 0,e=0;return function(){var f=b();for(var h=arguments.length,i=new Array(h),j=0;j<h;j++)i[j]=arguments[j];c=i;d||(d=g.wait(e+f-Date.now()/1e3).then(function(){e=Date.now()/1e3;d=void 0;return a.apply(void 0,c)}));return d}},rateLimitWithLastResult:function(a,c){var d=!1,e=void 0;return function(){d||(b("promiseDone")(g.wait(c()),function(){return d=!1}),e=a.apply(void 0,arguments),d=!0);return e}},repeatUntil:function(a,c){var d=function d(){return b("Promise").resolve(a()).then(function(a){return c(a)?b("Promise").resolve(a):d()})};return d},repeatWhileErrorUntil:function(a,c,d){var e=function e(){return b("Promise").resolve(a()).then(function(a){c(a);return b("Promise").resolve(a)},function(a){return d(a)?e():b("Promise").reject(a)})};return e},series:function(a,c){c=c;return a.reduce(function(a,b){return a.then(b)},b("Promise").resolve(c))},wait:function(a){return 0<a?new(b("Promise"))(function(b,c){return setTimeout(b,1e3*a)}):b("Promise").resolve()},waitAtMost:function(a,b){return g.waitOrElse(a,b,function(){throw new Error("Promise timed out")})},waitOrElse:function(a,c,d){var e=!1;return b("Promise").race([a.then(function(a){e=!0;return a},function(a){e=!0;throw a}),g.wait(c).then(function(){return e?void 0:d()})])}};e.exports=g}),null);
__d("MessengerSearchWebGraphQLFetcher",["Promise","requireCond","Bootloader","CurrentUser","MercuryConfig","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLTypeaheadAdapter","MessengerSearchQueryWebGraphQLQuery","MessengerSearchSeeAllQueryWebGraphQLQuery","MessengerSearchWebGraphQLFetcherUtils","MessengerSecondarySearchFunnelConstants","MessengerUniversalSearchFunnelLoggerConstants","PromiseUtil","WebGraphQL","cr:998965","compactArray","gkx"],(function(a,b,c,d,e,f){var g=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,h=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,i=b("MercuryConfig").SearchMorePeople?b("MercuryConfig").SearchMorePeople:2,j=5,k=3;a=function(){"use strict";function a(a,b){this.$1=0,this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$7="",this.$1=0,this.$2=0,this.$5=0,this.$6=a,this.$7=b}var c=a.prototype;c.fetchEntries=function(a,c,d,e,f){var g=this;c=b("MessengerSearchWebGraphQLFetcherUtils").formSearchRequests(c,a,d);var h=c.pages,i=c.profiles,j=c.rooms,k=c.messages;if(h.length>0){this.$8("pages",a);this.$2=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(h))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){return g.$9(b,a,e)},function(b){return g.$10(b,a,f)})()}if(i.length>0){this.$8("users_groups",a);this.$1=0;c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){g.$11(b,a,e)},function(b){return g.$12(b,a,f)})()}if(j.length>0){this.$8("rooms",a);this.$5=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(j))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$13(b,a,e)},function(b){return g.$14(b,a,f)})()}c=b("gkx")("975043");if(k.length>0&&c){this.$8("messages",a);this.$3=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(k))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$15(b,a,e)},function(b){return g.$16(b,a,f)})()}};c.fetchMSQEntries=function(a,c,d,e,f,g,h){var i=this;if(c>0){this.$3=0;var j=b("MessengerSearchWebGraphQLFetcherUtils").formMSQMessageSearchRequest(a,c);this.$8("messages",a);c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(j))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){i.$15(b,a,g)},function(b){return i.$16(b,a,h)})()}this.$4=0;var k=[];k.push(new(b("MessengerSearchQueryWebGraphQLQuery"))({query:a,num_users:d,num_groups:e,num_pages:f}));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(k))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return i.$17(b,a,g)},function(b){return i.$18(b,a,h)})()};c.fetchMSSAQEntries=function(a,c,d,e,f,g){var h=this;g===void 0&&(g=[]);this.$4=0;var i=[];switch(c){case"friend":case"non_friend":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"USER",limit:d}]}));break;case"thread":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"GROUP",limit:d}]}));break;case"page":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"PAGE",limit:d}]}));break}c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return h.$17(b,a,e)},function(b){return h.$18(b,a,f)})()};c.$17=function(a,c,d){var e=this;if(this.$6()!==c)return;a=a[0];a=a==null?void 0:(a=a.messenger_search)==null?void 0:(a=a.result_modules)==null?void 0:(a=a.nodes)==null?void 0:(a=a[0])==null?void 0:(a=a.search_results)==null?void 0:a.edges;var f=[],g=0;a!=null&&a.forEach(function(a){if(a.node&&a.node.__typename){var c=a.node.__typename;if(c==="User"){var d=b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,null);d&&f.push(d)}else if(c==="InstagramMessagingUser")f.push(b("MessengerGraphQLTypeaheadAdapter").convertIGMessagingUserToEntry(a.node));else if(c==="NeoApprovedUser"){d=b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,null);d&&f.push(d)}else if(c==="MessengerViewerGroupThread"){d=b("CurrentUser").getID();d=b("MessengerGraphQLTypeaheadAdapter").convertMSQGroupToEntry(a.node,g,d);d&&f.push(d);g++}else if(c==="Page"){d=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));d&&f.push(d)}}});d(f,"singleServerQuery");this.$20("single_server_query",c,f)};c.fetchWorkChatSingleQueryEntries=function(a,c,d,e){var f=this;if(b("cr:998965")==null)return;var g=[];g.push(b("cr:998965").formSearchRequests(a,c));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(g))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return f.$21(b,a,d)},function(b){return f.$22(b,a,e)})()};c.$21=function(a,c,d){var e=this,f;a=a[0];if(this.$6()!==c)return;f=a==null?void 0:(f=a.entities_named)==null?void 0:f.user_group_results;var g=[],h=!1;h=!0;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f.edges;f.map(function(a,c){var d=a.node;if(d!=null&&d.is_group_thread!=null){c=b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(d,c);c&&g.push(c)}else{c=b("MessengerGraphQLTypeaheadAdapter").convertWorkChatProfileToEntry(d,h?a.subtext:null);c&&g.push(c)}})}f=a==null?void 0:(f=a.entities_named)==null?void 0:f.bot_results;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f==null?void 0:f.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}a=a==null?void 0:(f=a.entities_named)==null?void 0:f.vc_results;if(a!=null&&(a==null?void 0:a.edges)!=null&&(a==null?void 0:a.edges.length)>0){f=a==null?void 0:a.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}d(g,"singleServerQuery");this.$20("wc_single_server_query",c,g)};c.$15=function(a,c,d){a=a[0];if(this.$6()!==c)return;a=a==null?void 0:(a=a.entities_named)==null?void 0:(a=a.search_results)==null?void 0:a.edges;var e=[];a!=null&&a.forEach(function(a){a=b("MessengerGraphQLTypeaheadAdapter").convertMessageToEntry(a.node);a&&e.push(a)});d(e,"messages");this.$20("messages",c,e)};c.$13=function(a,c,d){if(this.$6()!==c)return;a=(a=a[0])!=null?(a=a.message_thread)!=null?(a=a.messaging_audience_list)!=null?a.nodes:a:a:a;if(a){a=b("compactArray")(a.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a)}));d(a,"usersGroups");this.$20("rooms",c,a)}};c.$11=function(a,c,d){if(this.$6()!==c)return;var e=[],f=[],g=!1;g=!0;for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;j=(j=j)!=null?(j=j.entities_named)!=null?(j=j.search_results)!=null?j.edges:j:j:j;j&&j.length>0&&j[0].node&&(j[0].node.is_group_thread!=null?e=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}):j[0].node.is_messenger_user!=null&&(f=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,g===!0?a.subtext:null)}),f=this.$23(b("compactArray")(f))))}j=b("compactArray")(f.concat(e));d(j,"usersGroups");this.$20("users_groups",c,j)};c.$23=function(a){var b=[],c=[],d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(!g)continue;g.getType()==="friend"&&b.length<j?b.push(g):g.getType()==="non_friend"&&d.length<i?d.push(g):g.getType()==="fb4c"&&c.length<8&&c.push(g)}return b.concat(c,d)};c.$9=function(a,c,d){var e=this;if(this.$6()!==c)return;var f=[];for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;i=(i=i)!=null?(i=i.entities_named)!=null?(i=i.search_results)!=null?i.edges:i:i:i;i=i?i.map(function(a){a=a.node;return b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a,e.$19(a))}):[];f=f.concat(b("compactArray")(i.slice(0,5)))}d(f,"pages");this.$20("pages",c,f)};c.$19=function(a){if(!a||!a.category_type)return"page";if(a.category_type==="WORKPLACE_BOT")return"internal_bot_page";else if(a.category_type==="MEETING_ROOM")return"meeting_room_page";return"page"};c.$12=function(a,b,c){if(b===this.$6()){if(this.$1<k){this.$1+=1;return!0}c(a,"usersGroups")}return!1};c.$10=function(a,b,c){if(b===this.$6()){if(this.$2<k){this.$2+=1;return!0}c(a,"pages")}return!1};c.$16=function(a,b,c){if(b===this.$6()){if(this.$3<k){this.$3+=1;return!0}c(a,"messages")}return!1};c.$14=function(a,b,c){if(b===this.$6()){if(this.$5<k){this.$5+=1;return!0}c(a,"rooms")}return!1};c.$18=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$22=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$24=function(a){var c="";switch(a){case"users_groups":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_USERS_GROUPS;break;case"pages":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_PAGES;break;case"rooms":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_ROOMS;break;default:c=""}return c};c.$8=function(a,c){var d=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(e){var b=d.$24(a);e.logSourceStarted(c,b)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var e=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_STARTED,query:c,source:e,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};c.$20=function(a,c,d){var e=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(g){var f=e.$24(a);g.logSourceEnded(c,f,d.length,b("MessengerUniversalSearchFunnelLoggerConstants").QUERY_PROGRESS.FINISHED,e.$6()===c)},"MessengerSearchWebGraphQLFetcher"),b("Bootloader").loadModules(["WorkChatSearchFunnelLogger"],function(b){b.logImpressions(c,a,d)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var f=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,query:c,source:f,ids:d.map(function(a){return a.getUniqueID()}),status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};return a}();e.exports=a}),null);
__d("MessengerFriendsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1720594534660350"};b.getQueryID=function(){return"1852062858177546"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("TopMessengerFriendsAndGroupsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1978892428852690"};b.getQueryID=function(){return"127838424757019"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerTypeaheadLocalCache",["AsyncRequest","MessengerConfig","MessengerFriendsWebGraphQLQuery","MessengerGraphQLTypeaheadAdapter","SearchSourceCallbackManager","TokenizeUtil","TopMessengerFriendsAndGroupsWebGraphQLQuery","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null}),h=null,i=null,j=null,k=null;function l(){if(b("MessengerConfig").BootstrapTypeaheadFromBuddylist||!j)return;var a=j;j=null;b("promiseDone")(new(b("AsyncRequest"))(b("MessengerFriendsWebGraphQLQuery").getLegacyURI({cursor:a})).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){g.addLocalEntries(a.viewer.all_friends.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null}))})}var m={onEntriesLoaded:function(a){if(h!==null&&i!==null){a(h,i,!1);return}k===null&&(k=m.fetchEntriesFromServer());b("promiseDone")(k,function(){a(h,i,!0),l()},function(a){throw a})},fetchEntriesFromServer:function(){var a=b("MessengerConfig").BootstrapTypeaheadFromBuddylist;a=b("TopMessengerFriendsAndGroupsWebGraphQLQuery").getLegacyURI({use_buddylist:a,first:100});a=new(b("AsyncRequest"))(a).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){return m.handlePayload(a)});return a},handlePayload:function(a){var c=b("MessengerConfig").BootstrapTypeaheadFromBuddylist,d=(c?a.viewer.chat_buddylist:a.viewer.all_friends.edges).map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(c?a.represented_profile:a.node)}).filter(function(a){if(a===null)return!1;a=a.getAuxiliaryData();a=a&&a.isMemorializedUser;return!a}),e=a.viewer.message_threads.edges.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}).filter(function(a){return a!==null});g.addLocalEntries(d);g.addLocalEntries(e);h=d;i=e;a.viewer.all_friends&&a.viewer.all_friends.page_info&&a.viewer.all_friends.page_info.has_next_page&&(j=a.viewer.all_friends.page_info.end_cursor)},search:function(a,b){m.onEntriesLoaded(function(){g.search(a,function(c){b(c,a)})})},isBootstrapped:function(){return h!==null&&i!==null}};e.exports=m}),null);
__d("MercuryThreadTimestampReact.bs",["React","formatDate","joinClasses"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.time,d=a.title,e=a.text;a=a.className;a=a!==void 0?a:"";if(c!==void 0){c=c;var f=new Date(c);d=d!==void 0?d:f.toLocaleDateString();e=e!==void 0?e:b("formatDate")(f,"g:ia");return g.cloneElement(g.jsx("abbr",{children:e,className:b("joinClasses")(a,"timestamp"),title:d}),{"data-utime":c/1e3})}else return g.jsx("abbr",{})}c=a;f.make=c}),null);
__d("MessengerContactActions.bs",[],(function(a,b,c,d,e,f){"use strict";a={ADD_OWNER:"ADD_OWNER",FREE_CALL:"FREE_CALL",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT",REPORT_GROUP_CHAT_USER:"REPORT_GROUP_CHAT_USER"};f.actions=a}),null);
__d("MessengerContactImageReact.bs",["Image.bs","React","bs_belt_Option","bs_caml_option","ReasonReact.bs","bs_js_null_undefined","MessengerContactImage.react","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");d=b("ReasonReact.bs").statelessComponent("MessengerContactImageReact");function a(a){var c=a.className,d=a.customBadge,e=a.isMessengerUser,f=a.isPartiesUser,h=a.size,i=a.src;a=a.isMultiCompany;a=a!==void 0?a:!1;a={ariaHidden:!0,size:h,isMultiCompany:a,showBadge:a,children:b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,i,h,void 0,h,void 0,[]))};d!==void 0&&(a.customBadge=b("bs_caml_option").valFromOption(d));e!==void 0&&(a.isMessengerUser=b("bs_caml_option").valFromOption(e));f!==void 0&&(a.isPartiesUser=b("bs_caml_option").valFromOption(f));return g.createElement("div",{className:b("bs_belt_Option").getWithDefault(c,"")},g.createElement(b("MessengerProfileImageWrapperReact.bs").make,a))}function c(a,c,d,e,f,g,h,i){var j;return b("ReasonReact.bs").wrapJsForReason(b("MessengerContactImage.react"),{className:(j=b("bs_js_null_undefined")).fromOption(a),customBadge:j.fromOption(c),isMessengerUser:j.fromOption(d),isPartiesUser:j.fromOption(e),size:f,src:j.fromOption(g),isMultiCompany:j.fromOption(h)},i)}e={make:c};c=b("bs_belt_Option").getWithDefault;var h=a;a=a;f.$pipe$question=c;f.component=d;f.make=h;f.jsComponent=a;f.StraightJSComponent=e}),null);
__d("MessengerLocalTimeReact.bs",["cx","fbt","React","joinClasses","MercuryThreadTimestampReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.className;a=a.participantTimeZone;if(a!==void 0){a=a-new Date().getTimezoneOffset()*-60;if(a===0)return null;else{a=new Date(Date.now()+a*1e3);var d=a.getHours();d=d<6||d>22;c=b("joinClasses")("_10rk",c);return i.jsx("span",{children:i.jsxs("span",{children:["(",i.jsx(b("MercuryThreadTimestampReact.bs").make,{time:a.getTime()})," ",h._("local time"),")"],className:d?"_2f3x":""}),className:c})}}else return null}c=22;d=6;e=a;f.nightStartHour=c;f.nightEndHour=d;f.make=e}),null);
__d("MercuryParticipantsImage.react",["MessengerParticipantsImages.re","React","SplitImage.react","filterNulls"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=b("React");var h=a.useLayoutEffect,i=a.useState;function j(a){var c=a.className,d=a.halfView,e=a.participants,f=a.partiesProfileImages;a=a.size;var j=i([]),k=j[0],l=j[1];h(function(){var a,c=!0;e!=null&&e.length?a=b("MessengerParticipantsImages.re").getOrderedBigImageMulti(b("filterNulls")(e),function(a){if(!c)return;a=f?a.concat(f):a;l(b("filterNulls")(a))}):l([]);return function(){c=!1,a&&a.remove()}},[e,f]);return k.length>0?g.jsx(b("SplitImage.react"),{border:!0,className:c||"",halfView:d,srcs:k,size:Number(a)},e?e.join("-"):""):null}c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return g.jsx(j,babelHelpers["extends"]({},this.props))};return b}(g.Component);e.exports=c}),null);
__d("MercuryThreadImage.react",["cx","MercuryIDs","MercuryParticipantsConstants","MercuryParticipantsImage.react","Pixelz.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=h.useMemo;function a(a){var c=a.thread,d=a.size||b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,e=c.image_src,f=b("MercuryIDs").isCanonical(c.thread_id),g=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),j=i(function(){var a=[];c.participants&&(c.participants.length===1&&c.participants[0]===g?a=[].concat(c.participants):(a=c.participants.filter(function(a){return a!==g}),f||(a=a.slice(0,3))));return a},[c.participants,g,f]),k=i(function(){return e!=null&&e!==""&&a.useBackground===!0?h.jsx("div",{style:{height:d,backgroundImage:"url("+e+")",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:d}}):h.jsx(b("Pixelz.react"),{alt:"",height:d,resizeMode:"cover",src:e,width:d})},[e,a.useBackground,d]);if(e!=null&&e!=="")return k;if(c.thread_type===3){k={};k.height=d+"px";k.width=d+"px";c.solid_color!=null&&c.solid_color!==""&&(k.background=c.solid_color);return h.jsx("span",{className:"_asv _asw",style:k,children:c.name[0]})}return h.jsx(b("MercuryParticipantsImage.react"),{className:a.className,halfView:a.halfView,participants:j,size:d})}e.exports=a}),null);
__d("MercuryThreadImageReact.bs",["ReasonReact.bs","bs_js_null_undefined","MercuryThreadImage.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MercuryThreadImage.react"),{size:b("bs_js_null_undefined").fromOption(a),thread:c,useBackground:b("bs_js_null_undefined").fromOption(d),viewer:e},f)}f.make=a}),null);
__d("OptionType.bs",["bs_curry","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){if(a!==void 0)if(c!==void 0)return b("bs_curry")._2(d,b("bs_caml_option").valFromOption(a),b("bs_caml_option").valFromOption(c));else return!1;else return c===void 0}function c(a,c){if(a!==void 0)if(c!==void 0)return b("bs_caml_option").valFromOption(a)===b("bs_caml_option").valFromOption(c);else return!1;else return c===void 0}f.equals=a;f.equalsReference=c}),null);
__d("MessengerThreadImageReact.bs",["cx","React","Utils.bs","MercuryIDs","OptionType.bs","bs_caml_option","ReasonReact.bs","WorkForeignEntityInfo.bs","MercuryThreadImageReact.bs","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a,c){var d=a.other_user_fbid,e=c.size;a=b("MercuryIDs").isCanonical(a.thread_id);if(d==null||!(a&&e!==0))return!1;else{a=b("MercuryIDs").getParticipantIDFromUserID(d);e=c.get(a);if(!(e==null)&&!(e==null))return e.is_messenger_user;else return!1}}var j=b("ReasonReact.bs").statelessComponentWithRetainedProps("MessengerThreadImageReact");function k(a,c,d,e,f,g,k,l,m){var n=c!==void 0?c:!1,o=d!==void 0?d:!1,p=e!==void 0?e:!1;return{debugName:j.debugName,reactClassInternal:j.reactClassInternal,handedOffState:j.handedOffState,getDerivedStateFromProps:j.getDerivedStateFromProps,didMount:j.didMount,didUpdate:j.didUpdate,willUnmount:j.willUnmount,shouldUpdate:function(a){var c=a.newSelf.retainedProps;a=a.oldSelf.retainedProps;if(a.className!==c.className||a.showBadge!==c.showBadge||!b("OptionType.bs").equalsReference(a.size,c.size)||a.isMessengerUser!==c.isMessengerUser||a.isMultiCompany!==c.isMultiCompany||a.isPresenceForWork!==c.isPresenceForWork||a.isDoNotDisturb!==c.isDoNotDisturb||a.thread!==c.thread)return!0;else return a.viewer!==c.viewer},render:function(c){c=!b("WorkForeignEntityInfo.bs").areAllCoworkers(g);var d=c?void 0:o?b("bs_caml_option").some(h.createElement("div",{className:"_466z"})):n?b("bs_caml_option").some(h.createElement("div",{className:"_4670"})):void 0,e={};a!==void 0&&(e.className=b("bs_caml_option").valFromOption(a));c={isMessengerUser:i(k,g),isMultiCompany:c,showBadge:p&&b("MercuryIDs").isCanonical(k.thread_id)||c,children:b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadImageReact.bs").make(f,k,!0,l,[]))};d!==void 0&&(c.customBadge=b("bs_caml_option").valFromOption(d));d=b("bs_caml_option").nullable_to_opt(k.solid_color);d!==void 0&&(c.threadColor=b("bs_caml_option").valFromOption(d));d=b("bs_caml_option").nullable_to_opt(k.thread_type);d!==void 0&&(c.threadType=b("bs_caml_option").valFromOption(d));f!==void 0&&(c.size=b("bs_caml_option").valFromOption(f));return h.createElement("div",e,h.createElement(b("MessengerProfileImageWrapperReact.bs").make,c))},initialState:j.initialState,retainedProps:{className:a,isPresenceForWork:n,isDoNotDisturb:o,showBadge:p,size:f,isMessengerUser:i(k,g),isMultiCompany:!b("WorkForeignEntityInfo.bs").areAllCoworkers(g),thread:k,viewer:l},reducer:j.reducer,jsElementWrapped:j.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(b("bs_caml_option").nullable_to_opt(a.className),b("Utils.bs").isTruthy(a.isPresenceForWork),b("Utils.bs").isTruthy(a.isDoNotDisturb),b("Utils.bs").isTruthy(a.showBadge),b("bs_caml_option").nullable_to_opt(a.size),a.participants,a.thread,a.viewer,[])});f.getIsMessengerUser=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("VideoCallWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACCEPT_ESCALATION_CALL_BUTTON:"acceptEscalationButton",ADD_GROUP_MEMBERS_BUTTON:"addGroupMembersButton",VIEW_CALL_MEMBERS_BUTTON:"viewCallMembersButton",ANSWER_CALL_BUTTON:"answerCallButton",DOMINANT_SPEAKER_SWITCH_BUTTON:"dominantSpeakerSwitchButton",END_CALL_BUTTON:"endCallButton",ESCALATE_CALL_BUTTON:"escalateCallButton",FULL_SCREEN_BUTTON:"fullScreenButton",GRID_SWITCH_BUTTON:"gridSwitchButton",COWATCH_BUTTON:"cowatchButton",COWATCH_COMPOSER_DIALOG_CANCEL_BUTTON:"cowatchComposerDialogCancelButton",IGNORE_CALL_BUTTON:"ignoreCallButton",INCALL_VIDEO_CONTAINER:"incallVideoContainer",REDIAL_BUTTON:"rediallButton",REJECT_CALL_BUTTON:"rejectCallButton",REMOTE_VIEW_THUMBNAIL:"remoteViewThumbnail",RTC_APP_VIEW_START_CALL_BUTTON:"RTCAppViewStartCallButton",RTC_INCALL_VIDEO:"RTCIncallVideo",RTC_PICKER_DIALOG_CALL_BUTTON:"RTCPickerDialogCallButton",RTC_PICKER_DIALOG_CANCEL_BUTTON:"RTCPickerDialogCancelButton",RTC_PICKER_DIALOG_CONTACT_LIST_ITEM:"RTCPickerDialogContactListItem",RTC_PICKER_DIALOG_RING_BUTTON:"RTCPickerDialogRingButton",STAR_RATING_VIEW:"starRatingView",STAR_RATING_NOT_NOW_BUTTON:"starRatingNotNowButton",START_VIDEO_CALL:"startVideoCall",START_VOICE_CALL:"startVoiceCall",TOGGLE_AUDIO_BUTTON:"toggleAudioButton",TOGGLE_VIDEO_BUTTON:"toggleVideoButton",TOGGLE_CHAT_BUTTON:"toggleChatButton",TOGGLE_CAMERA_BUTTON:"toggleCameraButton",CLOSE_CHAT_BUTTON:"closeChatButton",SETTINGS_BUTTON:"settingsButton",SAVE_SETTINGS_BUTTON:"saveSettingsButton",CLOSE_CALL_WINDOW_BUTTON:"closeCallWindowButton",CHAT_TAB_VIDEO_BUTTON:"chatTabVideoButton",CHAT_TAB_VOICE_BUTTON:"chatTabVoiceButton",PROFILE_DROPDOWN_MENU:"profileDropdownMenu",RTC_CALL_ACTION_LINK:"RTCCallActionLink",STAR_RATING_SUBMIT_BUTTON:"submitStarRatingButton",DECLINE_ESCALATION_CALL_BUTTON:"declineEscalationButton",VIDEO_LAYOUT_SWITCH_BUTTON:"videoLayoutSwitchButton",HEADER_VIEW:"headerView",POPOUT_SCREEN_CONTENT:"popoutScreenContent",CREATE_VIDEO_CHAT_LINK_BUTTON:"createVideoChatLinkButton",CALL_TIMER:"callTimer",CALL_CONTROLS:"CallControls",FOOTER_VIEW:"footerView",CONTENT_VIEW:"contentView",CHAT_PANEL:"chatPanel",MEETUP_LINK_LOCK_UNLOCK:"meetup_lock_unlock",SELF_VIEW_ROOT:"SelfView",RTC_SELF_VIEW:"RTCSelfView",SELF_VIEW_CAMERA_VIDEO:"SelfViewCameraVideo",SELF_VIEW_SCREEN_TILE:"SelfViewScreenTile",SELF_VIEW_SCREEN_VIDEO:"SelfViewScreenVideo",SELF_VIEW_SCREEN_BUTTON:"SelfViewScreenButton",SELF_VIEW_DARKEN_OVERLAY:"SelfViewDarkenOverlay",ADD_PARTICIPANTS_DIALOG_CANCEL_BUTTON:"AddParticipantsDialogCancelButton",ADD_PARTICIPANTS_DIALOG_RING_BUTTON:"AddParticipantsDialogRingButton",VIEW_PARTICIPANTS_DIALOG_CLOSE_BUTTON:"ViewParticipantsDialogCloseButton",REMOVE_GUEST_DIALOG_CANCEL_BUTTON:"RemoveGuestDialogCancelButton",REMOVE_GUEST_DIALOG_CONFIRM_BUTTON:"RemoveGuestDialogConfirmButton",REMOVE_GUEST_DIALOG_ONE_GUEST_LINK:"RemoveGuestDialogOneGuestLink",REMOVE_GUEST_DIALOG_ALL_GUESTS_LINK:"RemoveGuestDialogAllGuestsLink",BLOCK_CALLS_PERMANENT:"BlockCallsPermanent",BLOCK_CALLS_ONE_HOUR:"BlockCallsOneHour",BLOCK_CALLS_EIGHT_AM:"BlockCallsEightAm",BLOCK_CALLS_BUTTON:"BlockCallsButton"})}),null);
__d("MessengerContactListRowReact.bs",["cx","ix","fbt","FBID.bs","bs_block","bs_curry","React","Utils.bs","gkx","bs_caml_obj","Link.react","MercuryIDs","Badge.react","bs_caml_option","CurrentUser","Image.react","ReasonReact.bs","TooltipData","joinClasses","MessengerState.bs","PresenceStatus","ImageBlock.react","MercuryTimestamp","bs_js_null_undefined","WorkForeignEntityInfo.bs","AvailableListConstants","MercuryParticipantTypes","MessengerContactActions.bs","MessengerLocalTimeReact.bs","MessengerAdminGroupUtils","MessengerThreadImageReact.bs","MessengerContactImageReact.bs","MercuryThreadTimestampReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerTextWithEntities.react","MessengerGraphQLTypeaheadAdapter","MercuryIgnoredBlockedParticipants.bs","WorkUserEmojiWithTooltipBootloader.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");function k(a,c){if(a!==void 0)return b("bs_caml_option").valFromOption(a).contains(c);else return!1}function l(a,c,d){var e=d.thread,f=d.participants,g=d.type===b("MercuryParticipantTypes").THREAD||d.type===b("MercuryParticipantTypes").MESSAGE,h=d.photo,i,k,l;c!==void 0?f==null||!g?i=1:(k=b("bs_caml_option").valFromOption(c),l=f,i=2):e==null||f==null||!g?i=1:(k=e,l=f,i=2);switch(i){case 1:if(h==null)return j.jsx("div",{className:"_5l39"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _85_s":"")});else{c=!b("WorkForeignEntityInfo.bs").isContactCoworker(d);g={className:"_5l39"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _85_s":"")+" _5rmm",size:32,src:h,isMultiCompany:c};e=b("bs_caml_option").nullable_to_opt(d.isMessengerUser);e!==void 0&&(g.isMessengerUser=b("bs_caml_option").valFromOption(e));return j.createElement(b("MessengerContactImageReact.bs").make,g)}case 2:return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadImageReact.bs").make("_5l39"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _85_s":""),void 0,void 0,void 0,32,l,k,a,[]))}}function m(a){var c=a.type===b("MercuryParticipantTypes").PAGE;a=b("WorkForeignEntityInfo.bs").isContactCoworker(a);if(c&&a)return j.jsx(b("Badge.react"),{size:"medium",type:"bot"});else return null}function n(a){a=a.isVerified;a=a==null?!1:a;if(a)return j.jsx(b("Badge.react"),{size:"medium",type:"verified"});else return null}function o(a,b){var c=[],d={contents:0};b.forEach(function(b){var e=b.offset;b=b.offset+b.length|0;if(d.contents<e){var f=a.substring(d.contents,e);c.push(f)}f=j.jsx("span",{children:a.substring(e,b),className:"_7u0a"});c.push(f);d.contents=b;return 0});b=a.substring(d.contents,a.length);c.push(b);return c}function p(a){var c=b("CurrentUser").isWorkUser(),d=b("gkx")("1222861"),e=b("MercuryIDs").isValid(a.uid),f=a.type;if(c&&d)if(e)if(f==null||f!==b("MercuryParticipantTypes").USER)c=void 0;else try{c=b("bs_caml_option").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a.uid))}catch(a){c=void 0}else c=f==null||f!==b("MercuryParticipantTypes").USER?void 0:b("FBID.bs").ofString(a.uid);else c=void 0;if(c!==void 0)return j.createElement(b("WorkUserEmojiWithTooltipBootloader.react"),{userID:b("bs_caml_option").valFromOption(c),withSpace:!0});else return null}function q(a){return j.jsxs("div",{children:[j.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:a.title}),p(a),m(a),n(a)],className:"_3q34"})}function r(a,c){var d=a.subtitle;if(!(d==null)&&d!==""){var e=b("MessengerGraphQLTypeaheadAdapter").getValidatedMatchesRanges(a.matchRanges,d);d=o(d,e);e=b("bs_caml_obj").caml_equal(a.type,b("MercuryParticipantTypes").MESSAGE);var f=a.timestamp;if(e&&!(f==null)){e=f;return j.jsxs("div",{children:[q(a),j.jsxs("div",{children:[j.jsx("span",{children:d,className:"_3q35 _7s4c"}),j.jsx("span",{children:"\xb7",className:"_7s4d"}),j.createElement(b("MercuryThreadTimestampReact.bs").make,{time:e,title:b("MercuryTimestamp").getAbsoluteTimestamp(e),text:b("MercuryTimestamp").getRelativeTimestamp(e),className:"_7s4e"})],className:"_5l-3"})]})}else f=2;if(f===2)return j.jsxs("div",{children:[q(a),j.jsx("div",{children:d,className:"_3q35"})]})}e={className:"_5ywd"};f=b("bs_caml_option").nullable_to_opt(a.timezone);f!==void 0&&(e.participantTimeZone=b("bs_caml_option").valFromOption(f));return j.jsxs("div",{children:[a.title,j.createElement(b("MessengerLocalTimeReact.bs").make,e),p(a),m(a),n(a)],className:(c?"":"_8slc")+(c?" _8sld":"")})}function s(a,c,d,e){if(b("gkx")("818495")){var f={contents:!1},g=b("FBID.bs").ofString(a.uid);if(g!==void 0&&e!==void 0){var h=b("bs_caml_option").valFromOption(e);b("MessengerState.bs").compute(d,function(a){f.contents=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(d,a.blocked_ids,h);return 0})}if(f.contents)return j.jsxs("div",{children:[q(a),j.jsx("div",{children:i._("Blocked"),className:"_3q35"})]});else return r(a,c)}else return r(a,c)}function t(a){var c=a.subtitle;if(!(c==null)&&c!=="")return j.jsxs("div",{children:[c,j.jsx("span",{children:j.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:a.title.substring(c.length+3|0,a.title.length)}),className:"_7l-p"})],className:"_364g"});c={className:"_5ywd"};var d=b("bs_caml_option").nullable_to_opt(a.timezone);d!==void 0&&(c.participantTimeZone=b("bs_caml_option").valFromOption(d));return j.jsxs("div",{children:[a.title.substring(3,a.title.length),j.createElement(b("MessengerLocalTimeReact.bs").make,c)],className:"_364g _7l-p"})}function u(a,c){var d=c.type;if(a!==void 0&&a&&!(d==null||!(d===b("MercuryParticipantTypes").FRIEND||d===b("MercuryParticipantTypes").USER))){a=b("MercuryIDs").getUserIDFromParticipantID(c.uid);if(a==null)return!1;else return b("PresenceStatus").get(a)===b("AvailableListConstants").ACTIVE}else return!1}var v=j.jsx("span",{children:i._("Added"),className:"_5rh4"}),w=j.jsx("span",{children:i._("Invited"),className:"_5rh4"}),x=j.jsx(b("Image.react"),{className:"_1kqm",src:h("86852")});function y(a,c){c.state.thisRef.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function z(a){a=a.state;var c=a.isHighlighted,d=a.onScrollIntoView,e=a.thisRef.contents;if(c!==void 0&&c&&d!==void 0&&e!==void 0){c=b("bs_caml_option").valFromOption(e);b("bs_curry")._1(d,c);e=a.onRenderHighlight;if(e!==void 0)return b("bs_curry")._1(e,c);else return 0}else return 0}function A(a){var c=a.newSelf,d=c.state.isHighlighted;a=a.oldSelf.state.onScrollIntoView;var e=c.state.thisRef.contents;if(d!==void 0&&d&&a!==void 0&&e!==void 0){d=b("bs_caml_option").valFromOption(e);b("bs_curry")._1(a,d);e=c.state.onRenderHighlight;if(e!==void 0)return b("bs_curry")._1(e,d);else return 0}else return 0}function a(a){var c=b("ReasonReact.bs").reducerComponent("MessengerContactListRowReact"),d=function(a,d,e,f,g,h,m,n,o,p,q,r,B,C,D,E,F,G,H,I,J,K,L,M){var N=E!==void 0?E:"",O=function(a){if(h!==void 0)return 0;else{a.stopPropagation();a.preventDefault();return 0}},P=function(a,c){if(a===b("MessengerContactActions.bs").actions.SELECT)if(f!==void 0)return b("bs_caml_option").valFromOption(f)(d,c);else return 0;else if(g!==void 0)return b("bs_curry")._2(g,a,d);else return 0},Q=function(a){a=p===!0;if(a&&e!==void 0)return b("bs_curry")._1(e,d);else return 0},R=function(a){a.stopPropagation();return P(b("MessengerContactActions.bs").actions.SELECT,a)},S=function(a){var c=a.send;a=a.state;if(F!==void 0){var d=b("bs_caml_option").valFromOption(F).get(a.contact.uid);d=d==null?[null,!0]:[d,!0]}else d=[null,!1];if(k(D,a.contact.uid))return v;else if(k(q,a.contact.uid))return w;else if(k(G,a.contact.uid))return x;else if(d[1])return d[0];else if(u(H,a.contact))return j.jsx("div",{className:"_jg2"});else{d=b("bs_js_null_undefined").fromOption(m);var e=a.contact.thread;e=I!==void 0?b("MessengerAdminGroupUtils").isAdminRequired(b("bs_caml_option").valFromOption(I)):e==null?!1:b("MessengerAdminGroupUtils").isAdminRequired(e);var f=a.contact.thread,g,l=0,n;I!==void 0?(n=b("bs_caml_option").valFromOption(I),l=1):f==null?g=!1:(n=f,l=1);if(l===1){f=b("MercuryIDs").isValid(a.contact.uid);l=f?b("bs_caml_option").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a.contact.uid)):b("FBID.bs").ofString(a.contact.uid);f=l!==void 0?b("MessengerAdminGroupUtils").isAdmin(d,b("bs_caml_option").valFromOption(l)):!1;g=b("MessengerAdminGroupUtils").isOwner(f,n)}l=g?j.jsx("span",{children:i._("Admin"),className:"_5qsj"}):null;if(h!==void 0)return j.jsxs("div",{children:[l,j.createElement(b("bs_caml_option").valFromOption(h),{className:"_rwo",admins:d,contact:a.contact,extrasEnabled:o,isAdminRequired:e,isOpen:a.isActionsOpen,onAction:P,onToggle:function(a){return b("bs_curry")._1(c,[a])},viewer:K})]});else return l}};return{debugName:c.debugName,reactClassInternal:c.reactClassInternal,handedOffState:c.handedOffState,getDerivedStateFromProps:function(c){if(d===c.rawContact)return c;else return{contact:b("bs_curry")._1(a,d),isActionsOpen:c.isActionsOpen,thisRef:c.thisRef,rawContact:d,isHighlighted:c.isHighlighted,onScrollIntoView:c.onScrollIntoView,onRenderHighlight:c.onRenderHighlight}},didMount:z,didUpdate:A,willUnmount:c.willUnmount,shouldUpdate:c.shouldUpdate,render:function(a){var c=a.state,d=b("joinClasses")(N,"_5l37"+(b("Utils.bs").optionBoolToBool(r)?" _1k1p":"")+(c.isActionsOpen?" _rwn":"")),e=J!==void 0?b("TooltipData").propsFor(J,"left"):{},f=b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_CONTACT_LIST_ITEM,g=c.contact.type===b("MercuryParticipantTypes").ASSISTANT_TYPEAHEAD;g=g?t(c.contact):s(c.contact,L,K,I);g=j.createElement(b("Link.react"),{onClick:R,onMouseDown:O,onMouseEnter:Q,tabIndex:0,children:j.jsxs(b("ImageBlock.react"),{contentClassName:"_5l38",spacing:"medium",children:[l(K,I,c.contact),g,S(a)]})});g=j.cloneElement(g,{"data-testid":f+c.contact.uid});if(n===!0)return j.jsx("li",{children:g,ref:b("bs_curry")._1(a.handle,y),className:d});else return j.cloneElement(j.jsx("li",{ref:b("bs_curry")._1(a.handle,y),className:d,role:"option"}),e,g)},initialState:function(c){return{contact:b("bs_curry")._1(a,d),isActionsOpen:!1,thisRef:{contents:void 0},rawContact:d,isHighlighted:r,onScrollIntoView:C,onRenderHighlight:B}},retainedProps:c.retainedProps,reducer:function(a,c){return b("bs_block").__(0,[{contact:c.contact,isActionsOpen:a[0],thisRef:c.thisRef,rawContact:c.rawContact,isHighlighted:c.isHighlighted,onScrollIntoView:c.onScrollIntoView,onRenderHighlight:c.onRenderHighlight}])},jsElementWrapped:c.jsElementWrapped}};a=b("ReasonReact.bs").wrapReasonForJs(c,function(a){var c;return d(a.contactAdapter,a.rawContact,(c=b("bs_caml_option")).nullable_to_opt(a.onHighlight),c.nullable_to_opt(a.onSelect),c.nullable_to_opt(a.onAction),c.nullable_to_opt(a.actionsClass),c.nullable_to_opt(a.admins),c.nullable_to_opt(a.disableRole),a.extraActionsEnabled,c.nullable_to_opt(a.hasHoverState),c.nullable_to_opt(a.invitedEntryIDs),c.nullable_to_opt(a.isHighlighted),c.nullable_to_opt(a.onRenderHighlight),c.nullable_to_opt(a.onScrollIntoView),c.nullable_to_opt(a.originalEntryIDs),c.nullable_to_opt(a.rowClassName),c.nullable_to_opt(a.rowElements),c.nullable_to_opt(a.selectedEntryIDs),c.nullable_to_opt(a.showPresence),c.nullable_to_opt(a.thread),c.nullable_to_opt(a.tooltipContent),a.viewer,a.useDarkTheme,[])});return[a,d]}c=32;d=3;f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.imageSize=c;f.assistantTypeaheadPrefixLength=d;f.idsContain=k;f.renderContactImage=l;f.renderBotBadge=m;f.renderVerifiedBadge=n;f.renderSnippet=o;f.renderMaybeEmojiStatus=p;f.renderContactTitle=q;f.renderRegularContact=r;f.renderContactText=s;f.renderAssistantTypeaheadText=t;f.getPresenceStatus=u;f.isOriginal=v;f.isInvited=w;f.isSelected=x;f.setThisRef=y;f.didMount=z;f.didUpdate=A;f.createMake=a}),null);
__d("MessengerSearchActions",["MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror","qex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("keyMirror")({ENTER_UNIVERSAL_SEARCH:null,ENTER_MESSAGE_SEARCH:null,ENTER_SEE_ALL_SEARCH:null,EXIT_MESSAGE_SEARCH:null,EXIT_SEE_ALL_SEARCH:null,LOAD_MORE_RESULTS:null}),i=b("qex")._("1097094")?b("MessengerView").MASTER.SEARCH_MESSAGES:b("MessengerView").MASTER.SEARCH,j={Types:h,changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQuerySeeAll:function(a,c){l(function(d){if(d.queryAll!==a)switch(c){case"message":return{query:a,masterView:i};case"friend":case"non_friend":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PEOPLE,seeAllType:c};case"page":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PAGES,seeAllType:c};case"thread":return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_GROUPS,seeAllType:c}}return null})},changeQueryAll:function(a){l(function(b){return b.queryAll!==a?{query:a,masterView:i}:null})},searchForMessagesInAThread:function(a,b){var c={query:b,serverThreadID:a,activeThreadID:a,masterView:i};l(function(a){return c})},loadMoreResults:function(){b("MessengerDispatcher").dispatch({type:h.LOAD_MORE_RESULTS})},enterUniversalSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_UNIVERSAL_SEARCH}),l(function(a){return{masterView:b("MessengerView").MASTER.SEARCH}})},enterMessageSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_MESSAGE_SEARCH})},enterSeeAllSearch:function(){b("MessengerDispatcher").dispatch({type:j.Types.ENTER_SEE_ALL_SEARCH})},exitMessageSearch:function(){j.changeQueryAll(""),b("MessengerDispatcher").dispatch({type:j.Types.EXIT_MESSAGE_SEARCH})},exitSeeAllSearch:function(){j.changeQuerySeeAll(null,null),b("MessengerDispatcher").dispatch({type:j.Types.EXIT_SEE_ALL_SEARCH})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(g||(g=b("URI")))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j}),null);
__d("MessengerContactList.react",["cx","fbt","MessengerContactListRowReact.bs","ImageBlock.react","ImmutableObject","Link.react","MercuryIDs","MessengerDotComAndInboxM4Check.bs","MessengerSearchActions","MessengerSpinner.react","MessengerState.bs","MessengerTypeaheadUtils","React","prop-types","gkx","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("MessengerContactListRowReact.bs").createMake();var i=a[0];a[1];var j=b("React"),k=b("gkx")("818495");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c){var e=c[0];c=c[1];var f=d.props.rowComponent||i;return j.jsxs("div",{className:"_29hk",children:[d.$5(e,c,(c=d.props.useDarkTheme)!=null?c:!1),j.jsx("ul",{id:d.props.controlleeID,role:d.props.disableRole?void 0:"listbox",className:"_29hl",children:a.map(function(a,c){c=c===0?b("joinClasses")(d.props.rowClassName,"_3h3c"):d.props.rowClassName;var e=a.id||a.getUniqueID(),g=d.props.thread;if(k&&e&&!g){var h=b("MercuryIDs").getThreadIDFromUserID(e);g=b("MessengerState.bs").getThreadMetaNow(d.props.viewer,h);g||b("MessengerState.bs").getThreadMeta(d.props.viewer,h,function(a){g=a})}return j.jsx(f,{actionsClass:d.props.actionsClass,admins:d.props.admins,contactAdapter:d.props.contactAdapter,disableRole:d.props.disableRole,extraActionsEnabled:!!d.props.extraActionsEnabled,hasHoverState:d.props.hasHoverState,invitedEntryIDs:d.props.invitedEntryIDs,isHighlighted:d.props.highlightedEntry&&d.props.highlightedEntry.getUniqueID()===a.getUniqueID(),onAction:d.props.onAction,onHighlight:d.props.onHighlight,onRenderHighlight:d.props.onRenderHighlight,onScrollIntoView:d.props.onScrollIntoView,onSelect:d.props.onSelect,originalEntryIDs:d.props.originalEntryIDs,rawContact:a,rowClassName:c,rowElements:d.props.rowElements,selectedEntryIDs:d.props.selectedEntryIDs,showPresence:d.props.showPresence,thread:g,tooltipContent:a.getAuxiliaryData&&a.getAuxiliaryData().tooltipContent,useDarkTheme:(h=d.props.useDarkTheme)!=null?h:!1,viewer:d.props.viewer},e)})})]},e)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return j.jsxs("div",{className:this.props.className,children:[this.props.listSections.map(this.$1).toArray(),this.props.showLoadMore?this.$2():this.$3(),this.$4()]})};d.$5=function(a,c,d){var e=this;if(!a)return null;d=b("MessengerDotComAndInboxM4Check.bs").yes?"_225b _6ybl"+(d?" _8slb":""):"_225b"+(d?" _8slb":"");return this.props.showSeeAll?j.jsxs("div",{className:d,children:[a,j.jsx("a",{className:"_87n7",onMouseDown:function(a){e.props.onSeeAllSelect&&c!==null&&e.props.onSeeAllSelect(c,a)},children:h._("See All")})]}):j.jsx("div",{className:d,children:a})};d.$2=function(){return this.props.isLoading?this.$3():j.jsx("div",{className:"_8a02",children:j.jsx(b("Link.react"),{href:"#",onClick:b("MessengerSearchActions").loadMoreResults,tabIndex:-1,children:h._("Load more")})})};d.$3=function(){return!this.props.isLoading?null:j.jsxs(b("ImageBlock.react"),{className:"_225c"+(this.props.useDarkTheme?" _8tm0":""),spacing:"medium",children:[j.jsx(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),j.jsx("div",{className:"_4g0h"+(this.props.useDarkTheme?" _8tm1":""),children:h._("Searching...")})]})};d.$4=function(){if(this.props.queryString&&this.props.queryString.length>0&&!this.props.isLoading){var a=this.props.listSections.filter(function(a){return a.length!=1||!b("MessengerTypeaheadUtils").isMessageSearchEntry(a[0])}).size;if(a<1)if(b("MessengerDotComAndInboxM4Check.bs").yes)return j.jsxs("div",{className:"_8b0j",children:[j.jsx("span",{className:"_8b0k",children:this.props.seeAllType?h._("No {seeAllType} found",[h._param("seeAllType",this.props.seeAllType)]):h._("Nothing found")}),j.jsx("span",{className:"_8b0l",children:h._("We couldn't find any matches for \"{query}\". Try checking for typos or using complete words.",[h._param("query",this.props.queryString)])})]});else return j.jsx("div",{className:"_3xcx"+(this.props.useDarkTheme?" _8tm2":""),children:h._("No results found")})}return null};return c}(j.PureComponent);c.propTypes={actionsClass:(d=b("prop-types")).func,admins:d.object,controlleeID:d.string,contactAdapter:d.func.isRequired,disableRole:d.bool,extraActionsEnabled:d.bool,hasHoverState:d.bool,highlightedEntry:d.object,invitedEntryIDs:d.instanceOf((f=b("immutable")).Set),isLoading:d.bool,listSections:d.instanceOf(f.OrderedMap).isRequired,onAction:d.func,onHighlight:d.func,onRenderHighlight:d.func,onScrollIntoView:d.func,onSeeAllSelect:d.func,onSelect:d.func,originalEntryIDs:d.instanceOf(f.Set),queryString:d.string,rowClassName:d.string,rowElements:d.instanceOf(f.Map),selectedEntryIDs:d.instanceOf(f.Set),showLoadMore:d.bool,showPresence:d.bool,thread:d.instanceOf(b("ImmutableObject")),useDarkTheme:d.bool,viewer:d.string.isRequired};e.exports=c}),null);
__d("MessengerTypeaheadResultView.react",["cx","Bootloader","Keys","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerSecondarySearchFunnelConstants","MessengerTypeaheadUtils","React","SearchableEntry","immutable","joinClasses","prop-types","qex","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=50;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.onKeyDown=function(a,c){if(a===b("Keys").RETURN){d.props.onSelectHighlighted(c);return}if(!d.$1)return;c=b("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(a,d.$1,d.props.queryString,d.props.highlightedEntry);d.props.onNextHighlighted(c)},d.$3=function(a){d.props.onNextHighlighted(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=this.$2(this.props)};d.componentDidMount=function(){var a=this;this.props.onMount(this.onKeyDown,function(){return a.$1})};d.UNSAFE_componentWillUpdate=function(a){this.$1=this.$2(a)};d.componentWillUnmount=function(){this.props.onUnmount()};d.render=function(){var a=this.$1;if(!a)return null;var c=["search","friend","fb4c","message","thread","page","non_friend","meeting_room_page","internal_bot_page","game"];a=b("MessengerTypeaheadUtils").buildListSections(a,this.props.queryString,c);c=!1;this.props.isTokenizer!==null&&(c=b("qex")._("1063079")&&!this.props.isTokenizer&&this.props.queryString.length>1);return h.jsx(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,"_4p-s"),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:a,onHighlight:this.$3,onScrollIntoView:this.props.onScrollIntoView,onSeeAllSelect:this.props.onSeeAllSelect,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:!1,showSeeAll:(a=c)!=null?a:!1,viewer:this.props.viewer,rowComponent:this.props.rowComponent,useDarkTheme:(c=this.props.useDarkTheme)!=null?c:!1})};d.$2=function(a){var c=a.localEntries,d={};c.forEach(function(a){d[a.getUniqueID()]=!0});var e=b("MessengerTypeaheadUtils").sortEntries(this.$4(a,d),a.queryString),f=null;f=c.concat(e).filter(function(b){return!a.selectedEntryIDs.contains(b.getUniqueID())}).slice(0,i);this.$5(a.queryString,f,a.localEntryIDs);return f};d.$4=function(a,b){var c=a.customResultFilterFn||function(){return!0};return a.serverResults.filter(function(a){return a&&!b[a.getUniqueID()]&&c(a)})};d.$5=function(a,c,d){this.props.isTokenizer?b("Bootloader").loadModules(["MessengerBootloadedSecondarySearchLogger","MessengerSearchLoggerUtil"],function(d,e){var f=c.map(function(a){return{result_fbid:a.getUniqueID(),result_type:e.getLoggingTypeFromMercuryType(a.getType())}});d.logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.IMPRESSIONS,query:a,entries:f,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})},"MessengerTypeaheadResultView.react"):b("Bootloader").loadModules(["MessengerSearchLoggerUtil","MessengerUniversalSearchFunnelLogger","MessengerUniversalSearchFunnelLoggerConstants"],function(e,f,g){var h=b("immutable").OrderedMap();c.forEach(function(a){var b=a.getUniqueID(),c=b.split(":").pop();a={result_fbid:c,result_type:e.getLoggingTypeFromMercuryType(a.getType()),rank_section:g.SOURCES.LOCAL_AND_SERVER,data_source:[d.includes(c)?g.SOURCES.LOCAL:g.SOURCES.LOCAL_AND_SERVER]};h=h.set(b,a)});f.logImpressions(h,a,g.RESULT_SURFACES.TYPEAHEAD,g.SOURCES.LOCAL_AND_SERVER)},"MessengerTypeaheadResultView.react")};return c}(h.Component);a.propTypes={controlleeID:(c=b("prop-types")).string.isRequired,canViewerSendMoneyFilter:c.bool,className:c.string.isRequired,localEntries:c.arrayOf(c.instanceOf(b("SearchableEntry"))).isRequired,localEntryIDs:c.arrayOf(c.string.isRequired).isRequired,hasHoverState:c.bool.isRequired,highlightedEntry:c.object,onMount:c.func.isRequired,onNextHighlighted:c.func.isRequired,onScrollIntoView:c.func.isRequired,onSeeAllSelect:c.func,onSelect:c.func.isRequired,onSelectHighlighted:c.func.isRequired,onUnmount:c.func.isRequired,originalEntryIDs:c.instanceOf(b("immutable").Set).isRequired,queryString:c.string.isRequired,selectedEntryIDs:c.instanceOf(b("immutable").Set).isRequired,serverResults:c.arrayOf(c.instanceOf(b("SearchableEntry"))).isRequired,shouldQueryInternalBot:c.bool.isRequired,shouldQueryPages:c.bool.isRequired,shouldQueryVCEndpoint:c.bool.isRequired,viewer:c.string.isRequired,forGroup:c.bool,rowComponent:c.func,customResultFilterFn:c.func,useDarkTheme:c.bool};a.defaultProps={controlleeID:"",className:"",customResultFilterFn:function(){return!0}};e.exports=a}),null);
__d("MessengerTypeaheadTopFriendsView.react",["cx","Keys","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerTypeaheadUtils","React","immutable","joinClasses","prop-types","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onKeyDown=function(a,c){if(a===b("Keys").RETURN){d.props.onSelectHighlighted(c);return}c=b("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(a,d.props.entries.toArray(),d.props.queryString,d.props.highlightedEntry);d.props.onNextHighlighted(c)},d.$1=function(a){d.props.onNextHighlighted(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.props.hasHoverState&&(this.props.entries.size>0&&this.props.onNextHighlighted(this.props.entries.first()))};d.componentDidMount=function(){var a=this;this.props.onMount(this.onKeyDown,function(){return a.props.entries.toArray()})};d.componentWillUnmount=function(){this.props.onUnmount()};d.render=function(){var a;return h.jsx(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,"_4p-s"),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!!this.props.queryString,listSections:b("MessengerTypeaheadUtils").buildListSections(this.props.entries.toArray(),this.props.queryString),onHighlight:this.$1,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:!1,viewer:this.props.viewer,rowComponent:this.props.rowComponent,useDarkTheme:(a=this.props.useDarkTheme)!=null?a:!1})};return c}(h.Component);a.propTypes={controlleeID:(c=b("prop-types")).string.isRequired,className:c.string.isRequired,entries:c.instanceOf(b("immutable").List).isRequired,hasHoverState:c.bool.isRequired,highlightedEntry:c.object,onNextHighlighted:c.func.isRequired,onMount:c.func.isRequired,onScrollIntoView:c.func.isRequired,onSelect:c.func.isRequired,onSelectHighlighted:c.func.isRequired,onUnmount:c.func.isRequired,originalEntryIDs:c.instanceOf(b("immutable").Set).isRequired,queryString:c.string.isRequired,selectedEntryIDs:c.instanceOf(b("immutable").Set).isRequired,viewer:c.string.isRequired,rowComponent:c.func,useDarkTheme:c.bool};a.defaultProps={controlleeID:"",className:""};e.exports=a}),null);
__d("MessengerGraphQLTypeaheadView.react",["cx","fbt","Bootloader","CurrentUser","ImageBlock.react","MercuryConfig","MessengerBootloadedSecondarySearchLogger","MessengerNewGroupParticipantSuggestionLocalCacheManager","MessengerPaymentFriendsLocalCache","MessengerRoomWithAssocObjectAudienceLocalCacheManager","MessengerSearchWebGraphQLFetcher","MessengerSecondarySearchFunnelConstants","MessengerSpinner.react","MessengerTypeaheadLocalCache","MessengerTypeaheadResultView.react","MessengerTypeaheadTopFriendsView.react","MessengerTypeaheadUtils","MessengerUniversalSearchFunnelLoggerConstants","React","createCancelableFunction","debounce","gkx","immutable","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,k=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,l=8,m=10;a=100;var n=3,o=10,p=8,q=5;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={localEntries:b("immutable").List(),queryCompleteStatus:{usersGroups:!1,pages:!1},serverResults:[],highlightedEntry:null},d.$1=null,d.$2=null,d.$3=null,d.$4=null,d.$5=!0,d.$6=b("MessengerRoomWithAssocObjectAudienceLocalCacheManager").get(),d.$7=b("MessengerNewGroupParticipantSuggestionLocalCacheManager").get(),d.$8=!1,d.$9=null,d.$10=0,d.$13=function(a,c,e,f,g,h){if(d.props.queryString.length<2)return;d.$5&&d.setState({serverResults:[]});c=d.state.localEntries.toArray().filter(function(a){return a.getType()!=="search"}).map(function(a){return a.getUniqueID()});var i=[];e||i.push("groups");f||i.push("pages");d.props.enableMessageSearch&&i.push("messages");g===null?i.push("users"):i.push("rooms");h={userLimit:m,messageLimit:n,groupLimit:b("MercuryConfig").MaxThreadResults,pageLimit:5,getQueryString:d.$12,canViewerSendMoneyFilter:h,localEntryIDs:c,threadFBID:g,shouldQueryInternalBot:d.props.shouldQueryInternalBot,shouldQueryVCEndpoint:d.props.shouldQueryVCEndpoint};c=b("CurrentUser").isWorkUser()&&b("gkx")("991794");!b("CurrentUser").isWorkUser()&&d.$9!==null?d.$9.fetchMSQEntries(a,d.props.isTokenizer?0:h.messageLimit,o,e?0:p,f?0:q,d.$29,d.$30):c&&d.$9!=null?d.$9.fetchWorkChatSingleQueryEntries(a,h,d.$29,d.$30):d.$9!==null&&d.$9.fetchEntries(a,i,h,d.$29,d.$30)},d.$29=function(a,b){if(d.$5){d.setState(function(c){return{serverResults:c.serverResults.concat(a),queryCompleteStatus:b==="singleServerQuery"?Object.assign({},c.queryCompleteStatus,{usersGroups:!0},{pages:!0}):Object.assign({},c.queryCompleteStatus,(c={},c[b]=!0,c))}});return}},d.$30=function(a,b){d.setState(function(a){return{queryCompleteStatus:Object.assign({},a.queryCompleteStatus,(a={},a[b]=!0,a))}})},d.$12=function(){return d.props.queryString},d.$20=function(a,b){d.$3=a,d.$4=b,d.$14()},d.$23=function(){d.$3=null,d.$4=null},d.$21=function(a){d.setState({highlightedEntry:a})},d.$22=function(a){d.state.highlightedEntry&&d.props.onSelect(d.state.highlightedEntry,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$10=l;this.$11();var c=this.props.isTokenizer?j:k;this.$9=new(b("MessengerSearchWebGraphQLFetcher"))(function(){return a.$12()},c);this.$2=b("debounce")(this.$13,150,this,!0)};d.componentDidUpdate=function(a){this.props!==a&&(this.props.queryString!==a.queryString&&this.$14())};d.$14=function(){this.setState({highlightedEntry:null})};d.UNSAFE_componentWillReceiveProps=function(a){var c=this;if(!a.queryString)this.setState({highlightedEntry:null}),this.$11();else if(a.queryString!==this.props.queryString){this.$8=!0;this.setState({queryCompleteStatus:{userGroupQueryFinished:!1,pagesQueryFinished:!1},serverResults:[]});var d=a.roomAssociatedObject&&a.roomAssociatedObject.privacy_mode;this.$2&&this.$2(a.queryString,b("MercuryConfig").MaxThreadResults,a.excludeGroups,a.excludePages,d===0?a.threadFBID:null,a.canViewerSendMoneyFilter);if(d===0){this.$15(a);return}if(this.props.canViewerSendMoneyFilter){this.$16(a);return}if(this.props.includeExistingParticipantIDs){this.$17(a);return}b("MessengerTypeaheadLocalCache").search(a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);var f=c.props.enableMessageSearch?b("MessengerTypeaheadUtils").getMessageSearchEntry(e):null;f&&d.unshift(f);f=b("immutable").List(d).filter(function(a){if(c.props.excludeGroups&&a.getType()==="thread")return!1;return c.props.excludePages&&a.getType()==="page"?!1:!0});c.$18(f,e);c.$19(f,e);c.setState({localEntries:f})}})}};d.shouldComponentUpdate=function(a,b){return a.queryString!==this.props.queryString||a.isFocused!==this.props.isFocused||a.excludeGroups!==this.props.excludeGroups||a.excludePages!==this.props.excludePages||b.localEntries!==this.state.localEntries||b.queryCompleteStatus!==this.state.queryCompleteStatus||b.highlightedEntry!==this.state.highlightedEntry};d.componentWillUnmount=function(){this.$1&&this.$1.cancel(),this.$2&&this.$2.reset(),this.$5=!1};d.render=function(){if(!this.props.isFocused&&!this.props.queryString||!b("MessengerTypeaheadLocalCache").isBootstrapped()&&!this.$6.isBootstrapped(this.props.threadFBID)&&!b("MessengerPaymentFriendsLocalCache").isBootstrapped()&&!this.$7.isBootstrapped(this.props.threadFBID,this.props.originalEntryIDs))if(b("gkx")("678607"))return i.jsxs(b("ImageBlock.react"),{className:"_225c",spacing:"medium",children:[i.jsx(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),i.jsx("div",{className:"_4g0h",children:h._("Searching...")})]});else return null;if(!this.props.queryString){var a;return i.jsx(b("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.state.localEntries,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onMount:this.$20,onNextHighlighted:this.$21,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$22,onUnmount:this.$23,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer,rowComponent:this.props.rowComponent,useDarkTheme:(a=this.props.useDarkTheme)!=null?a:!1})}a=this.state.queryCompleteStatus.usersGroups&&(this.props.excludePages||this.state.queryCompleteStatus.pages);var c=!b("gkx")("1053071")&&this.props.queryString.length<2;return i.jsxs("div",{children:[this.state.queryCompleteStatus.usersGroups||c?this.$24():this.$25(),this.state.queryCompleteStatus.usersGroups&&!a?this.$26():null]})};d.$25=function(){var a=this.state.localEntries.slice(0,this.$10);return i.jsx(b("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.$27(a,this.props.queryString),hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onNextHighlighted:this.$21,onMount:this.$20,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$22,onUnmount:this.$23,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer,rowComponent:this.props.rowComponent,useDarkTheme:(a=this.props.useDarkTheme)!=null?a:!1})};d.$26=function(){return i.jsxs(b("ImageBlock.react"),{className:"_225c",spacing:"medium",children:[i.jsx(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),i.jsx("div",{className:"_4g0h",children:h._("Searching...")})]})};d.$24=function(a){var c=this.$28(),d=this.state.localEntries.slice(0,this.$10);return i.jsx(b("MessengerTypeaheadResultView.react"),babelHelpers["extends"]({},a,{className:this.props.typeaheadViewClassName,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,isTokenizer:this.props.isTokenizer,localEntries:d.toArray(),onMount:this.$20,onNextHighlighted:this.$21,onScrollIntoView:this.props.onScrollIntoView,onSeeAllSelect:this.props.onSeeAllSelect,onSelect:this.props.onSelect,onSelectHighlighted:this.$22,onUnmount:this.$23,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,serverResults:this.state.serverResults,viewer:this.props.viewer,rowComponent:this.props.rowComponent,useDarkTheme:(a=this.props.useDarkTheme)!=null?a:!1},c))};d.$27=function(a,b){var c=this;b=a.filter(function(a){return!c.props.selectedEntryIDs.contains(a.getUniqueID())});return b};d.onKeyDown=function(a,b){this.$3&&this.$3(a,b)};d.$15=function(a){var c=this;this.$6.search(a.threadFBID,a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$31=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){c=c.slice(0,30);a.setState({localEntries:b("immutable").List(c)})});this.$6.onEntriesLoaded(this.props.threadFBID,function(b){a.$1&&a.$1(b),a.$1=null})};d.$17=function(a){var c=this;this.$7.search(a.threadFBID,a.originalEntryIDs,a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$32=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){a.setState({localEntries:b("immutable").List(c.slice(0,50))})});this.$7.onEntriesLoaded(this.props.threadFBID,this.props.originalEntryIDs,function(b){a.$1&&a.$1(b),a.$1=null})};d.$16=function(a){var c=this;b("MessengerPaymentFriendsLocalCache").search(a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$33=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){a.setState({localEntries:b("immutable").List(c)})});b("MessengerPaymentFriendsLocalCache").onEntriesLoaded(function(b){a.$1&&a.$1(b),a.$1=null})};d.$11=function(){var a=this,c=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(c===0){this.$31();return}if(this.props.canViewerSendMoneyFilter){this.$33();return}if(this.props.includeExistingParticipantIDs){this.$32();return}this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c,d,e){c=c.slice(0,50);a.props.excludeGroups||(c=c.concat(d));if(!e||!a.props.queryString){d=a.props.enableMessageSearch?b("MessengerTypeaheadUtils").getMessageSearchEntry(a.props.queryString):null;d&&c.unshift(d);a.props.queryString===""&&a.$34(c);a.setState({localEntries:b("immutable").List(c)})}});b("MessengerTypeaheadLocalCache").onEntriesLoaded(function(b,c,d){a.$1&&a.$1(b,c,d),a.$1=null})};d.$28=function(){var a=this.props.canViewerSendMoneyFilter,c=this.state.localEntries.toArray();c=c.filter(function(a){return a.getType()!=="search"}).map(function(a){return a.getUniqueID()});var d=b("MercuryConfig").MaxThreadResults,e=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;e=e===0;var f=!this.props.excludeGroups&&this.props.queryString&&this.props.queryString.length>1&&!e,g=!this.props.excludeGroups&&c.length>0&&!e,h=!this.props.excludeGroups&&(!g||b("CurrentUser").isEmployee())&&!e,i=!1,j=!this.props.excludePages&&!e,k=this.props.shouldQueryVCEndpoint&&(b("CurrentUser").isEmployee()||b("CurrentUser").isWorkUser())&&!e,l=this.props.shouldQueryInternalBot&&b("CurrentUser").isEmployee()&&b("CurrentUser").isWorkUser()&&!e,m=e,n=this.props.threadFBID;return{queryString:this.props.queryString,canViewerSendMoneyFilter:a,localEntryIDs:c,maxThreadResults:d,shouldQueryGroups:i,shouldQueryPages:j,shouldQueryThreadName:f,shouldQueryParticipantIDs:g,shouldQueryParticipantNames:h,shouldQueryVCEndpoint:k,shouldQueryInternalBot:l,shouldQueryRoomsAudience:e,shouldSkipQueryUsers:m,threadFBID:n,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup}};d.$19=function(a,c){var d=this;this.props.isTokenizer?b("Bootloader").loadModules(["MessengerSearchLoggerUtil"],function(e){if(d.props.queryString===c){var f=a.map(function(a){return{result_fbid:a.getUniqueID(),result_type:e.getLoggingTypeFromMercuryType(a.getType())}});b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.IMPRESSIONS,query:"",loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER,entries:f})}},"MessengerGraphQLTypeaheadView.react"):b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerSearchLoggerUtil"],function(e,f){if(d.props.queryString===c){var g=b("immutable").OrderedMap();a.forEach(function(a){var c=a.getUniqueID();a={result_fbid:c,result_type:f.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]};g=g.set(c,a)});e.logImpressions(g,c)}},"MessengerGraphQLTypeaheadView.react")};d.$34=function(a){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(b){b.logNullStateImpressions(a,a.length)},"MessengerGraphQLTypeaheadView.react")};d.$18=function(a,c){var d=this;if(this.props.isTokenizer){var e;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:(e=b("MessengerSecondarySearchFunnelConstants")).EVENTS.SOURCE_ENDED,query:c,ids:a.map(function(a){return a.getUniqueID()}),source:e.SOURCES.LOCAL_CONTACTS,numResults:a.size,status:e.SOURCE_STATUSES.FINISHED,loggingID:e.LOGGING_IDS.M_APP_COMPOSER})}else b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerSearchLoggerUtil"],function(e,f){var g=a;if(d.props.queryString===c){var h=b("immutable").OrderedMap();g.forEach(function(a){var c=a.getUniqueID();a={result_fbid:c,result_type:f.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]};h=h.set(c,a)});e.logImpressions(h,c)}},"MessengerGraphQLTypeaheadView.react")};return c}(i.Component);c.propTypes={includeExistingParticipantIDs:(d=b("prop-types")).bool,canViewerSendMoneyFilter:d.bool,enableMessageSearch:d.bool.isRequired,excludeGroups:d.bool.isRequired,excludePages:d.bool.isRequired,forGroup:d.bool,isFocused:d.bool.isRequired,hasHoverState:d.bool.isRequired,maxEntries:d.number.isRequired,onScrollIntoView:d.func.isRequired,onSeeAllSelect:d.func,onSelect:d.func.isRequired,originalEntryIDs:d.instanceOf(b("immutable").Set).isRequired,queryString:d.string.isRequired,roomAssociatedObject:d.object,selectedEntryIDs:d.instanceOf(b("immutable").Set).isRequired,shouldQueryInternalBot:d.bool.isRequired,shouldQueryVCEndpoint:d.bool.isRequired,threadFBID:d.string,typeaheadViewClassName:d.string.isRequired,viewer:d.string.isRequired,rowComponent:d.func,customResultFilterFn:d.func,useDarkTheme:d.bool};c.defaultProps={maxEntries:a,typeaheadViewClassName:""};e.exports=c}),null);
__d("MessengerScrollableArea.react",["cx","React","ReactDOM","ScrollableArea.react","Style","UserAgent","clearImmediate","gkx","joinClasses","setImmediate","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=20,j=b("gkx")("1094116");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=!1;d.$2=null;d.$5=function(){if(d.$1){var a;d.props.onScroll&&(a=d.props).onScroll.apply(a,arguments)}};d.$6=function(){if(!b("UserAgent").isBrowser("IE"))return;if(j)return;if(!d.refs||!d.$4)return;var a=d.$4.refs.wrap,c=d.$4.refs.body;if(!c||!a)return;c=b("ReactDOM").findDOMNode(c);a=b("ReactDOM").findDOMNode(a);a=a.offsetWidth-a.clientWidth;a>0&&b("Style").set(c,"margin-right",-a+"px")};d.$3=b("throttle")(d.$5,50);return d}var d=c.prototype;d.componentDidMount=function(){this.$2=b("setImmediate")(this.$6),this.$1=!0};d.componentWillUnmount=function(){b("clearImmediate")(this.$2),this.$1=!1};d.render=function(){var a=this,c=this.props.needsFastScrollHandler?this.$5:this.$3;return h.jsx(b("ScrollableArea.react"),{className:b("joinClasses")("_5f0v",this.props.className),height:this.props.height,onClick:this.props.onClick,onScroll:c,persistent:!0,ref:function(b){a.$4=b},shadow:!1,tabIndex:this.props.tabIndex,width:this.props.width,children:this.props.children})};d.getArea=function(){if(this.$4)return this.$4.getArea()};d.scrollToBottom=function(a){var b=this.getArea();b&&this.scrollToPosition(b.getScrollHeight(),!!a)};d.scrollToTop=function(a){var b=this.getArea();b&&b.scrollToTop(!!a)};d.scrollToPosition=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c={});var d=this.getArea();if(!d)return;d.setScrollTop(a,b,c)};d.isScrolledToBottom=function(){return this.isScrolledToBottomWithHeight(0)};d.isScrolledToBottomWithHeight=function(a){var b=this.getArea();return!b?!1:b.getScrollTop()+b.getClientHeight()+a>=b.getScrollHeight()-i};d.isScrolledToTop=function(){var a=this.getArea();return!a?!0:a.getScrollTop()<=i};d.getScrollTop=function(){var a=this.getArea();return!a?0:a.getScrollTop()};return c}(h.Component);e.exports=a}),null);
__d("MessengerGraphQLSearchTypeahead.react",["ix","fbt","cx","Bootloader","BootloadOnRender.react","ContextualLayer.react","CurrentUser","Event","Image.react","JSResource","Keys","LazyComponent.react","MercuryIDs","MessengerContentSearchFunnelLoggerConstants","MessengerSearchActions","MessengerUniversalSearchFunnelLoggerConstants","gkx","immutable","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerDotComAndInboxM4Check.bs","MessengerGraphQLTypeaheadView.react","MessengerScrollableArea.react","MessengerSpinner.react","MessengerState.bs","MessengerTypeaheadUtils","MNPlatformTagsDataManager","React","createReactClass_DEPRECATED","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","asset","clearImmediate","emptyFunction","joinClasses","qex","prop-types","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MercuryThreadIDMap").get(),k=b("React"),l=30,m=100;c=b("createReactClass_DEPRECATED")({displayName:"MessengerGraphQLSearchTypeahead",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],_input:null,_timer:null,_view:null,propTypes:{includeExistingParticipantIDs:(a=b("prop-types")).bool,canViewerSendMoneyFilter:a.bool,className:a.string.isRequired,context:a.object,enableMessageSearch:a.bool.isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,customResultFilterFn:a.func,forGroup:a.bool,hasHoverState:a.bool.isRequired,hideClearButton:a.bool.isRequired,isMessageSearchMode:a.bool,isFacebookChat:a.bool.isRequired,isFocused:a.bool.isRequired,isTokenizer:a.bool.isRequired,onBackspace:a.func.isRequired,onBlur:a.func.isRequired,onChange:a.func.isRequired,onClear:a.func.isRequired,onClick:a.func.isRequired,onFocus:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSelect:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,placeholder:a.string.isRequired,queryString:a.string,roomAssociatedObject:a.object,scrollableViewClassName:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,tabIndex:a.number,threadFBID:a.string,typeaheadViewClassName:a.string.isRequired,useLayer:a.bool.isRequired,viewer:a.string.isRequired,width:a.number,rowComponent:a.func,searchInputPortalRef:a.instanceOf(HTMLDivElement),useDarkTheme:a.bool},refs_scrollable:null,getInitialState:function(){return{gameID:null}},getDefaultProps:function(){var a;return{includeExistingParticipantIDs:!1,canViewerSendMoneyFilter:!1,isFacebookChat:!1,isTokenizer:!1,onBackspace:a=b("emptyFunction"),onChange:a,onClear:a,onClick:a,onScrollIntoView:a,originalEntryIDs:b("immutable").Set(),placeholder:"",scrollableViewClassName:"",selectedEntryIDs:b("immutable").Set(),typeaheadViewClassName:"",useLayer:!1,useDarkTheme:!1}},componentDidMount:function(){this._timer=b("setImmediate")(this._syncInputWidth)},componentDidUpdate:function(){b("clearImmediate")(this._timer),this._timer=b("setImmediate")(this._syncInputWidth)},componentWillUnmount:function(){b("clearImmediate")(this._timer)},renderLayers:function(){var a=this;if(!this.props.useLayer)return{};var c=null,d=null;this.props.context?c=this.props.context:d=function(){return a._input};return{typeaheadView:k.jsx(b("ContextualLayer.react"),{context:c,contextRef:d,position:"below",shown:(this.props.queryString||b("gkx")("678607"))&&this.props.isFocused,shouldSetARIAProperties:!1,children:this._renderView()})}},render:function(){var a=this.props.useLayer?null:this._renderView();return k.jsxs("div",{className:(this.props.isTokenizer?"":"_1nq2")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7vup":"")+(this.props.isTokenizer?" _3mkz":""),children:[k.jsxs("span",{className:b("joinClasses")(this.props.className,"_58ah"+(this.props.isMessageSearchMode?" _1a03":"")),onChange:this.props.onChange,onSelect:b("emptyFunction"),tabIndex:null,children:[this._renderInput(),a]}),k.jsx(b("Image.react"),{onMouseDown:this._onClear,className:(this.props.hideClearButton?"hidden_elem":"")+" _2xme",src:g("489953")}),k.jsx("span",{ref:"textSizeProxy",className:"_58-3","aria-hidden":"true",children:this.props.queryString||this.props.placeholder}),this._renderGame()]})},focusInput:function(){this._input&&this._input.focus()},_onClear:function(){this.props.isMessageSearchMode&&this._logClearContentSearch(),this.props.onClear()},_syncInputWidth:function(){if(!this.props.isTokenizer)return;var a=b("ReactDOM").findDOMNode(this.refs.textSizeProxy);a=a?a.offsetWidth:0;if(a===0)return;this._input&&(this._input.style.width=a+"px")},_renderInput:function(){var a=this,c=b("CurrentUser").isWorkUser()&&this.props.searchInputPortalRef!=null?this.props.searchInputPortalRef:null,d=b("CurrentUser").isWorkUser()&&this.props.isMessageSearchMode?k.jsx(b("Image.react"),{onMouseDown:this._onClear,className:(this.props.hideClearButton?"hidden_elem":"")+" _8tx7",src:g("489953")}):null;d=k.jsxs(k.Fragment,{children:[k.jsx("label",{className:"_58ak",children:k.jsx("input",{autoComplete:"off",className:"_58al _7tpc"+(this.props.useDarkTheme?" _8tnl":""),onBlur:this._handleBlur,onClick:this.props.onClick,onChange:function(){},onFocus:function(b){return a.props.onFocus()},onKeyDown:function(b){return a._handleKeyDown(b)},placeholder:this.props.placeholder,ref:function(b){return a._input=b},spellCheck:!1,tabIndex:this.props.tabIndex,type:"text",value:this.props.queryString,"aria-label":b("CurrentUser").isWorkUser()?h._("Search Work Chat"):h._("Search Messenger")})}),d]});if(c!=null)return b("ReactDOM").createPortal(d,c);else return d},_renderGame:function(){return!this.state.gameID?null:k.jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerGamesQuicksilverPlayerContainer.react").__setRef("MessengerGraphQLSearchTypeahead.react"),placeholder:k.jsx(b("MessengerSpinner.react"),{}),component:k.jsx(b("LazyComponent.react"),{initialContextType:"SOLO",initialContextSourceID:null,initialGameID:this.state.gameID,onHide:this._handleHideGame,initialSource:"messenger_search",sourceID:null})})},_renderView:function(){var a=this;if(!this.props.isFocused)return null;if(!this.props.queryString){var c=b("gkx")("678607")?!1:this.props.isTokenizer&&!this.props.forGroup;if(c)return null}c=this.props.isTokenizer?l:m;c=k.jsx(b("MessengerGraphQLTypeaheadView.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup,isFocused:this.props.isFocused,isTokenizer:this.props.isTokenizer,hasHoverState:this.props.hasHoverState,maxEntries:c,onScrollIntoView:this._handleScrollIntoView,onSeeAllSelect:this._handleSeeAllSelect,onSelect:this._handleSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,ref:function(b){return a._view=b},roomAssociatedObject:this.props.roomAssociatedObject,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,selectedEntryIDs:this.props.selectedEntryIDs,threadFBID:this.props.threadFBID,typeaheadViewClassName:this.props.typeaheadViewClassName,viewer:this.props.viewer,rowComponent:this.props.rowComponent,useDarkTheme:(c=this.props.useDarkTheme)!=null?c:!1});if(this.props.isTokenizer)return k.jsx(b("MessengerScrollableArea.react"),{className:this.props.scrollableViewClassName,ref:function(b){return a.refs_scrollable=b},width:this.props.width,children:c});else return c},_handleScrollIntoView:function(a){if(!a)return;if(!this.props.isTokenizer){this.props.onScrollIntoView(a);return}this.refs_scrollable&&b("MessengerTypeaheadUtils").scrollEntryIntoView(a,this.refs_scrollable)},_getThreadID:function(a,c){b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(a),function(a){return c(a.thread_id)})},_handleSeeAllSelect:function(a,c){c&&c.preventDefault();if(b("qex")._("1097094")){c=this.props.queryString;a==="message"?(this._endSearchFunnelStartContentSearchFunnel(c,"search",!0),b("MessengerSearchActions").changeQueryAll(c),b("MessengerSearchActions").enterMessageSearch()):(b("MessengerSearchActions").changeQuerySeeAll(c,a),b("MessengerSearchActions").enterSeeAllSearch())}},_handleSelect:function(a,c){c&&c.preventDefault();c=this.props.queryString;var d=a.getType(),e=a.getUniqueID().split(":").pop(),f=a.getAuxiliaryData().alias;if(f){var g=b("MercuryIDs").getParticipantIDFromUserID(e);b("MercuryVanityIDMap.bs").set(f,g)}switch(d){case"game":this.setState({gameID:e});return;case"search":b("qex")._("1097094")&&b("MessengerSearchActions").enterMessageSearch();this._endSearchFunnelStartContentSearchFunnel(c,d);b("MessengerSearchActions").changeQueryAll(c);return;case"message":this._updateToThread(e,a);this._endSearchFunnelStartContentSearchFunnel(c,d);break;default:this._updateToThread(e,a)}b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread("source:messenger:web_search",e)},_updateToThread:function(a,b){var c=this,d=function(a){return c.props.onSelect(a,b.getType(),b)};b.getType()==="thread"||b.getAuxiliaryData().messageResultType==="groupConversation"?j.getClientIDFromServerID(a,d):this._getThreadID(a,d)},_handleHideGame:function(){this.setState({gameID:null})},_handleKeyDown:function(a){var c=a.keyCode;c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").RETURN?this.props.isMessageSearchMode&&c===b("Keys").RETURN?b("MessengerSearchActions").changeQueryAll(this.props.queryString):this._view&&this._view.onKeyDown&&this._view.onKeyDown(c,a):c===b("Keys").BACKSPACE?this.props.onBackspace(a):c===b("Keys").ESC&&(this._input&&this._input.blur())},_handleBlur:function(){var a=this,c=null,d=b("Event").listen(window,"blur",function(){d.remove(),b("clearImmediate")(c)});c=b("setImmediate")(function(){d.remove(),a.props.onBlur()})},_logClearContentSearch:function(){b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(a){return a&&a.endFunnel(b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_TAGS.END_WITH_X_BUTTON)},"MessengerGraphQLSearchTypeahead.react")},_endSearchFunnelStartContentSearchFunnel:function(a,c,d){var e=this;d===void 0&&(d=!1);!d&&c!=="search"?(b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logResultSelected(e.state.query,e.props.threadFBID||"",c,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.FIRST)},"MessengerGraphQLSearchTypeahead.react"),b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel((a=b("MessengerUniversalSearchFunnelLoggerConstants")).END_REASONS.END_ACTION,a.END_ACTIONS.ENTER_INTEGRATED_MESSAGE_SEARCH,null,a.ENTRY_SURFACES.INBOX,a.RESULT_PAGES.FIRST)},"MessengerGraphQLSearchTypeahead.react")):(!d&&c==="search"||d&&c==="message")&&(b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logResultSelected(e.state.query,e.props.threadFBID||"","message",b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.SEE_ALL)},"MessengerGraphQLSearchTypeahead.react"),b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel((a=b("MessengerUniversalSearchFunnelLoggerConstants")).END_REASONS.END_ACTION,a.END_ACTIONS.MESSAGE_SEARCH,null,a.ENTRY_SURFACES.INBOX,a.RESULT_PAGES.SEE_ALL)},"MessengerGraphQLSearchTypeahead.react"));b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(d){return d.startFunnel(a,c==="search"?b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_ALL_THREADS:b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH)},"MessengerGraphQLSearchTypeahead.react")}});e.exports=c}),null);
__d("MessengerTokenizerToken.react",["cx","Keys","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=100;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.keyCode===b("Keys").BACKSPACE&&(a.preventDefault(),d.props.onRemove&&d.props.entry!=void 0&&d.props.onRemove(d.props.entry))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return h.jsx("span",{className:b("joinClasses")(this.props.className,"_14-8"),label:null,onClick:this.$1,onKeyDown:this.$2,role:"option",tabIndex:this.props.index+i,children:h.jsx("span",{"aria-label":this.props.label,title:this.props.label,className:"_14-9",children:this.props.label})})};d.$1=function(a){a.stopPropagation()};return c}(h.Component);e.exports=a}),null);
__d("MessengerGraphQLTokenizer.react",["cx","invariant","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLSearchTypeahead.react","MessengerSecondarySearchFunnelConstants","MessengerTokenizerToken.react","React","immutable","joinClasses","prop-types","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!0,d.state={focused:d.props.autoFocus,queryString:""},d.focusInput=function(){d.refs.typeahead&&d.refs.typeahead.focusInput()},d.$4=function(){if(!d.$1)return;d.setState({focused:!1})},d.$8=function(){if(!d.$1)return;d.setState({focused:!0})},d.$5=function(a){if(d.state.queryString||d.props.entries.size===0)return;d.$10(d.props.entries.last());a.preventDefault();b("setImmediate")(d.focusInput)},d.$6=function(a){if(!d.$1)return;a.target instanceof HTMLInputElement||h(0,1185);a=a.target.value;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:a,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:a})},d.$7=function(){if(!d.$1)return;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:null,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:""});d.props.onClear&&d.props.onClear()},d.$9=function(a,c,e){if(!d.$1)return;a=d.props.entries;var f=e.getUniqueID();if(d.props.originalEntryIDs.contains(f))return;else if(a.some(function(a){return a.getUniqueID()===f})){d.$10(e);return}d.props.onAddEntryAttempt(e);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:"",loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:""})},d.$10=function(a){d.props.onRemoveEntryAttempt(a)},d.$3=function(a){d.focusInput()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.props.autoFocus&&b("setImmediate")(this.focusInput)};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this,c=this.props.entries.map(function(b,c){return a.$2(b,c)}),d=c.size>0?"":this.props.placeholder,e=this.props.forceHideClearButton||this.state.queryString===""&&this.props.entries.isEmpty();return i.jsxs("div",{children:[i.jsx("div",{className:b("joinClasses")(this.props.className,"_14-7"+(this.props.useDarkTheme?" _8tnm":"")),children:i.jsxs("div",{className:b("joinClasses")("_58-2","clearfix"),onClick:this.$3,children:[c,i.jsx(b("MessengerGraphQLSearchTypeahead.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,className:"_58-0",context:this.props.context,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup,hasHoverState:this.props.hasHoverState,hideClearButton:e,isFacebookChat:!1,isFocused:this.state.focused,isTokenizer:!0,onBlur:this.$4,onBackspace:this.$5,onChange:this.$6,onClear:this.$7,onFocus:this.$8,onSelect:this.$9,originalEntryIDs:this.props.originalEntryIDs,placeholder:d,queryString:this.state.queryString,ref:"typeahead",roomAssociatedObject:this.props.roomAssociatedObject,selectedEntryIDs:b("immutable").Seq(this.props.entries).map(function(a){return a.getUniqueID()}).toSet(),scrollableViewClassName:this.props.scrollableViewClassName,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,tabIndex:this.props.tabIndex,threadFBID:this.props.threadFBID,useLayer:this.props.useLayer,viewer:this.props.viewer,width:this.props.width,useDarkTheme:(c=this.props.useDarkTheme)!=null?c:!1})]})}),(this.state.queryString===""||!!this.props.alwaysShowDefaultEntriesOnBlur)&&!this.state.focused?this.props.defaultEntries:null]})};d.$2=function(a,c){return i.jsx(b("MessengerTokenizerToken.react"),{className:"_2ei6",label:a.getTitle(),entry:a,index:c,onRemove:this.$10},a.getUniqueID())};return c}(i.PureComponent);a.propTypes={alwaysShowDefaultEntriesOnBlur:(c=b("prop-types")).bool,autoFocus:c.bool.isRequired,canViewerSendMoneyFilter:c.bool,includeExistingParticipantIDs:c.bool,className:c.string.isRequired,context:c.object,defaultEntries:c.element,enableMessageSearch:c.bool.isRequired,entries:c.instanceOf(b("immutable").List).isRequired,excludeGroups:c.bool.isRequired,excludePages:c.bool.isRequired,forGroup:c.bool,forceHideClearButton:c.bool,hasHoverState:c.bool.isRequired,customResultFilterFn:c.func,onAddEntryAttempt:c.func.isRequired,onClear:c.func,onRemoveEntryAttempt:c.func.isRequired,originalEntryIDs:c.instanceOf(b("immutable").Set).isRequired,placeholder:c.node.isRequired,roomAssociatedObject:c.object,scrollableViewClassName:c.string.isRequired,shouldQueryInternalBot:c.bool.isRequired,shouldQueryVCEndpoint:c.bool.isRequired,tabIndex:c.number,threadFBID:c.string,useLayer:c.bool.isRequired,viewer:c.string.isRequired,width:c.number.isRequired,useDarkTheme:c.bool};e.exports=a}),null);
__d("MessengerTabIndices",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NEW_MESSAGE_TOKENIZER:9998,GROUP_NAME_INPUT:9999,COMPOSER_INPUT:1e4});e.exports=a}),null);
__d("MessengerComposeViewHeader.react",["cx","fbt","ImmutableObject","MessengerButtonReact.re","MessengerDotComAndInboxM4Check.bs","MessengerGraphQLTokenizer.react","MessengerTabIndices","React","clearImmediate","gkx","immutable","joinClasses","prop-types","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerButtonReact.re").make,j=b("React"),k=320;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={tokenizerContext:null,excludeGroups:!1,excludePages:!1,forGroup:!1},d.$1=null,d.$2=function(){d.$1=b("setImmediate")(function(){d.refs.tokenizer&&d.refs.tokenizer.focusInput()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$2(),this.setState({tokenizerContext:this.refs.tokenizerContext})};d.componentDidUpdate=function(a){this.props.recipients!==a.recipients&&this.props.onResize()};d.UNSAFE_componentWillReceiveProps=function(a){a.recipients!==this.props.recipients&&(a.recipients.size===0?this.setState({excludeGroups:!1,excludePages:!1,forGroup:!1}):a.isWorkUser?this.setState({excludeGroups:!0,excludePages:!1,forGroup:!0}):this.setState({excludeGroups:!0,excludePages:!0,forGroup:!0}))};d.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1)};d.render=function(){var a={enableMessageSearch:!1,hasHoverState:!0,originalEntryIDs:b("immutable").Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:!0,shouldQueryVCEndpoint:!1,width:k,customResultFilterFn:this.props.isWorkUser?function(a){return a.getAuxiliaryData().isWorkUser===!0&&a.getAuxiliaryData().isActiveAccount===!1?!1:!0}:function(){return!0}};return j.jsxs("div",{className:b("joinClasses")("_2y8y"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zw0":"")+" _5l-3",this.props.className),onClick:this.$2,role:"presentation",children:[j.jsx("div",{className:"_2y8z",ref:b("gkx")("678607")?"tokenizerContext":"",children:h._("To:")}),j.jsxs("div",{className:"_66s6",children:[j.jsx(b("MessengerGraphQLTokenizer.react"),babelHelpers["extends"]({autoFocus:!0,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,excludeGroups:this.state.excludeGroups,excludePages:this.state.excludePages,forGroup:this.state.forGroup,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:h._("Type the name of a person or group"),ref:"tokenizer",tabIndex:b("MessengerTabIndices").NEW_MESSAGE_TOKENIZER,useLayer:!0,viewer:this.props.viewer},a)),b("gkx")("678607")?null:j.jsx("div",{ref:"tokenizerContext"})]}),this.$3()]})};d.$3=function(){return this.props.shouldShowCreateGroupButton?j.jsx(i,{className:"_6wh5",label:h._("Create new chat"),dataTestID:"create_new_chat_button",onClick:this.props.onCreateGroupButtonClicked,role:"button",tabIndex:0,type:"primary"}):null};return c}(j.PureComponent);a.propTypes={forceHideClearButton:(c=b("prop-types")).bool.isRequired,onAddRecipient:c.func.isRequired,onClear:c.func,onRemoveRecipient:c.func.isRequired,onResize:c.func.isRequired,recipients:c.instanceOf(b("immutable").List).isRequired,thread:c.instanceOf(b("ImmutableObject")),viewer:c.string.isRequired,isWorkUser:c.bool.isRequired,shouldShowCreateGroupButton:c.bool,onCreateGroupButtonClicked:c.func};a.defaultProps={shouldShowCreateGroupButton:!1,isWorkUser:!1};e.exports=a}),null);
__d("MessengerDialogBodyReact.bs",["cx","React","bs_caml_option","ReasonReact.bs","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("ReasonReact.bs").statelessComponent("MessengerDialogBodyReact");function i(a){var c=a.className;a=a.children;c=c!==void 0?c:"";return h.jsx("div",{children:a,className:b("joinClasses")("_4eb-",c)})}function a(a){var c={children:a.children};a=b("bs_caml_option").nullable_to_opt(a.className);a!==void 0&&(c.className=b("bs_caml_option").valFromOption(a));return i(c)}d=i;f.component=c;f.make=d;f.jsComponent=a}),null);
__d("MessengerSignals.bs",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";var g=new(b("EventEmitter"))(),h="resize";function a(a){g.emit(h);return 0}function c(a){return g.addListener(h,a)}f.emitter=g;f.resizeEvent=h;f.resize=a;f.onResize=c}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore"],(function(a,b,c,d,e,f){"use strict";var g=new(b("CacheStorage"))("localstorage"),h="desktopNotifsEnabled";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:c.$MessengerSettingsStore2()});c.$MessengerSettingsStore1.privacy_section_collapsed=!0;return c}var d=c.prototype;d.getSettings=function(){return this.$MessengerSettingsStore1};d.$MessengerSettingsStore2=function(){return g.get(h,!1)};d.$MessengerSettingsStore3=function(a){g.set(h,a)};d.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MercuryThreadTitle_DEPRECATED.react",["fbt","MercuryIDs","MercuryParticipantListRenderer","MessengerParticipants.bs","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={participantNames:""},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.$2(this.props)};d.componentWillUnmount=function(){this.$1=!1};d.componentDidUpdate=function(a){a!==this.props&&this.$2(this.props)};d.render=function(){return h.jsxs("span",{className:this.props.className,children:[this.props.thread.name?this.$3():this.state.participantNames,this.props.children]})};d.getTitle=function(){return this.state.participantNames};d.$3=function(){var a=this.props.thread,c=this.props.maxTitle?this.props.maxTitle<a.name.length?a.name.slice(0,this.props.maxTitle)+"...":a.name:a.name;c=h.jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});return!a.unread_count||!this.props.showUnreadCount?c:this.$4(c,a.unread_count)};d.$2=function(a){var c=this;if(a.thread.name)return;this.setState({participantNames:""});var d=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),e=a.thread.participants||[];e.length>1&&(e=e.filter(function(a){return a!=d}));b("MessengerParticipants.bs").getMulti(e,function(d){if(!c.$1)return;var f=e.map(function(a){return d[a]}),g=a.thread.custom_nickname?{}:null,i=b("MessengerTextWithEmoticons.react");if(g)for(var j in a.thread.custom_nickname)g[j]=h.jsx(i,{renderEmoticons:!0,renderEmoji:!0,text:a.thread.custom_nickname[j]});i=new(b("MercuryParticipantListRenderer"))().setUseShortName(a.useShortName).setUseAndSeparator(a.useAndSeparator).setIsNewThread(a.isNewThread).setNickname(g).renderParticipantList(f);g=a.showUnreadCount&&a.thread.unread_count?c.$4(i,a.thread.unread_count):i;c.setState({participantNames:g})})};d.$4=function(a,b){return g._("{conversation-title} ({unread-count})",[g._param("conversation-title",a),g._param("unread-count",b)])};return c}(h.Component);a.defaultProps={isNewThread:!1,showUnreadCount:!1,useShortName:!1,useAndSeparator:!1};e.exports=a}),null);
__d("MessengerRTCGroupCallRingParticipantsRow.react",["cx","fbt","React","intlList"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){a=a.names;return i.jsxs("div",{className:"_1wsd",children:[i.jsx("div",{className:"_1wse",children:h._("Ring:")}),i.jsx("div",{className:"_1wsg",children:b("intlList")(a,b("intlList").CONJUNCTIONS.NONE)})]})};e.exports=a}),null);
__d("MessengerRTCGroupCallParticipantsPickerDialog.react",["cx","fbt","invariant","FBRTCCore","ImmutableObject","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallRingParticipantsRow.react","MessengerRTCGroupCallThreadRow.react","React","RTCUser","RTWebUserActionLogger","URI","gkx","immutable","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("MessengerDialogHeaderReact.re").make,l=b("MessengerDialogTitleReact.re").make,m=b("React"),n=460,o=5;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={isParticipantSelected:d.props.participants.mapEntries(function(a){var b=a[0];a=a[1];return[a.fbid?a.fbid:b,d.props.participants.size<=o]})};d.$3=function(){b("RTWebUserActionLogger").logPreCallClick({mediaType:b("RTWebUserActionLogger").getMediaType(!d.props.hasVideo),callType:"mw",conferenceName:d.props.conferenceName,surface:"group_call_participant_picker_dialog",component:"cancel_button"})};d.$6=function(a){var c=!d.state.isParticipantSelected.get(a);d.setState(function(b){return{isParticipantSelected:b.isParticipantSelected.set(a,c)}});b("RTWebUserActionLogger").logPreCallClick({mediaType:b("RTWebUserActionLogger").getMediaType(!d.props.hasVideo),callType:"mw",conferenceName:d.props.conferenceName,surface:"group_call_participant_picker_dialog",component:c?"participant_row_select":"participant_row_unselect"})};d.$4=function(){var a=d.$2().map(function(a){return a.fbid});b("RTWebUserActionLogger").logPreCallClick({mediaType:b("RTWebUserActionLogger").getMediaType(!d.props.hasVideo),callType:"mw",conferenceName:d.props.conferenceName,surface:"group_call_participant_picker_dialog",component:"start_call_button"});d.props.handleCall?d.props.handleCall(a):b("FBRTCCore").startGroupCall({conferenceName:d.props.conferenceName,hasVideo:d.props.hasVideo,trigger:d.props.trigger,usersToRing:a});d.props.onUnmount()};c=d.props.participants.valueSeq().toArray().map(function(a){var c=a.big_image_src||a.image_src;a.fbid||i(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(j||(j=b("URI")))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})});d.$1=c.sort(function(a,b){return a.userName.localeCompare(b.userName)});return d}var d=c.prototype;d.componentDidMount=function(){var a;(a=b("RTWebUserActionLogger")).logPreCallImpression({mediaType:a.getMediaType(!this.props.hasVideo),callType:"mw",conferenceName:this.props.conferenceName,surface:"group_call_participant_picker_dialog"});a.logImpression({surface:"group_call_participant_picker_dialog",component:"cancel_button"});a.logImpression({surface:"group_call_participant_picker_dialog",component:"start_call_button"})};d.render=function(){var a=this,c=this.props,d=c.participants,e=c.thread;c=c.viewerID;var f=this.$2(),g=h._("Call group members");return m.jsx(b("MessengerDialog.react"),{onToggle:function(){a.props.onUnmount&&a.props.onUnmount()},type:"default",label:g,width:n,children:m.jsxs("div",{className:"_2m1r",children:[m.jsxs(k,{children:[m.jsx(b("MessengerDialogCancelButton.react"),{onClick:this.$3,dataTestID:"RTCPickerDialogCancelButton"}),m.jsx(l,{autofocus:!0,children:g}),m.jsx(b("MessengerDialogButton.react"),{label:h._("Call"),onClick:this.$4,dataTestID:"RTCPickerDialogCallButton",disabled:f.length===0,type:"primary",use:"default"})]}),m.jsx(b("MessengerRTCGroupCallThreadRow.react"),{displayBlockedMemberWarning:b("gkx")("678352")?this.$5(f):!1,participants:d,thread:e,viewerID:c}),m.jsx(b("MessengerRTCGroupCallRingParticipantsRow.react"),{names:f.map(function(a){a=a.name;return a}).sort(function(a,b){return a.localeCompare(b)})}),m.jsx(b("MessengerRTCGroupCallContactList.react"),{remoteUsers:this.$1,isParticipantSelected:this.state.isParticipantSelected,onClick:this.$6})]})})};d.$5=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})};d.$2=function(){var a=this;return this.props.participants.filter(function(b,c){return a.state.isParticipantSelected.get(b.fbid?b.fbid:c)}).toArray()};return c}(m.Component);a.propTypes={participants:(c=b("prop-types")).instanceOf(b("immutable").Map).isRequired,thread:c.instanceOf(b("ImmutableObject")),viewerID:c.string.isRequired,trigger:c.string.isRequired,conferenceName:c.string.isRequired,hasVideo:c.bool.isRequired,handleCall:c.func,onUnmount:c.func.isRequired};e.exports=a}),null);
__d("MessengerRTCGroupCallParticipantsPickerDialogController",["DOM","MessengerRTCGroupCallParticipantsPickerDialog.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={_container:b("DOM").create("div"),render:function(a){var c=this,d=a.participants,e=a.thread,f=a.viewerID,h=a.trigger,i=a.conferenceName,j=a.hasVideo;a=a.handleCall;b("ReactDOM").render(g.jsx(b("MessengerRTCGroupCallParticipantsPickerDialog.react"),{participants:d,thread:e,viewerID:f,trigger:h,conferenceName:i,hasVideo:j,handleCall:a,onUnmount:function(){return c._onUnmount()}}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)}};e.exports=a}),null);
__d("StoreAndPropBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";a=function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return b("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function(a){return this.constructor.calculateState(a)},getInitialState:function(){this._onInitialStateForInstrumentation&&this._onInitialStateForInstrumentation();return this._callCalculateState(this.props)},UNSAFE_componentWillMount:function(){var a=this;this.constructor.calculateState||g(0,3582);this._recalculateStateID=null;var d=function(){if(a.isMounted()){var b=a._collectStoreEmitsForInstrumentation?a._collectStoreEmitsForInstrumentation():null,c=a._callCalculateState(a.props),d=a._getCurrentDispatchForInstrumentation&&a._getCurrentDispatchForInstrumentation();a.setState(a._logStoreEmitsForInstrumentation!=null?function(){b!=null&&a._logStoreEmitsForInstrumentation&&a._logStoreEmitsForInstrumentation(b,d);return c}:c)}a._recalculateStateID=null};this._mixin=new(b("StoreBasedStateMixinHelper"))(c);this._mixin.subscribeCallback(function(){a._recalculateStateID===null&&(a._recalculateStateID=b("setImmediate")(d))},this._addStoreEmitForInstrumentation)},UNSAFE_componentWillReceiveProps:function(a){var b=this,c=this._callCalculateState(a),d=this._getCurrentDispatchForInstrumentation&&this._getCurrentDispatchForInstrumentation();this.setState(this._onReceivePropsForInstrumentation?function(){b._onReceivePropsForInstrumentation&&b._onReceivePropsForInstrumentation(d);return c}:c)},componentWillUnmount:function(){this._mixin&&this._mixin.release(),this._mixin=null}})};e.exports=a}),null);
__d("MessengerRTCCallButton.react",["ImmutableObject","Link.react","MercuryIDs","MessengerRTCInvokeHandler","MessengerRTCVideoCallButtonReact.bs","MessengerRTCVoiceCallButtonReact.bs","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin","createReactClass_DEPRECATED","immutable","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerRTCVideoCallButtonReact.bs").jsComponent,h=b("MessengerRTCVoiceCallButtonReact.bs").jsComponent,i=b("React");c=b("createReactClass_DEPRECATED")({displayName:"MessengerRTCCallButton",mixins:[b("StoreAndPropBasedStateMixin")(b("MNRTCCallabilityStore"))],statics:{calculateState:function(a){return{isCallable:b("MessengerRTCInvokeHandler").isCallable(a.threadID,a.thread)}}},propTypes:{className:(a=b("prop-types")).string.isRequired,customColor:a.string.isRequired,isVideo:a.bool.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,threadID:a.string.isRequired,viewer:a.string.isRequired,calleeName:a.string.isRequired,isCalleeActive:a.bool},render:function(){var a={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:b("MercuryIDs").isGroupChat(this.props.threadID)};return i.jsx(b("Link.react"),{className:this.props.className,onClick:this._handleStartCall,role:"button",children:this.props.isVideo?i.jsx(g,babelHelpers["extends"]({},a)):i.jsx(h,babelHelpers["extends"]({},a))})},_handleStartCall:function(a){a.preventDefault(),b("MessengerRTCInvokeHandler").handleStartCall(this.props.threadID,this.props.thread,this.props.isVideo,this.props.viewer,this.props.participants,this.props.calleeName,this.state.isCallable,this.props.isCalleeActive)}});e.exports=c}),null);
__d("PhotoUtils",["Event","URI"],(function(a,b,c,d,e,f){var g,h={getImagesFromData:function(a){var b=[];for(var c in a)c.indexOf("image")===0&&b.push(a[c]);return b},getFBIDFromData:function(a){return a&&a.id},getOriginalImageFromData:function(a){return a.original||a.download_image},getDownloadURLFromData:function(a){a=this.getOriginalImageFromData(a);if(!a)return null;a=new(g||(g=b("URI")))(a.uri);a.addQueryData({dl:1});return a},getPermalinkFromData:function(a){return a.permalink},canViewerMakeCoverPhoto:function(a){return!!a.can_viewer_make_cover_photo},getCoverPhotoURLFromData:function(a){return new(g||(g=b("URI")))("/profile.php").addQueryData({preview_cover:h.getFBIDFromData(a)})},preload:function(a,c,d){var e=a.getDimensions();for(var f=0;f<c.length;++f){var g=e.getBestFitImageFromPhoto(c[f],e.getMaxStageDimensions()),h=new Image();d&&b("Event").listen(h,"load",d.bind(null,c[f]));a.getLogger().log(g.uri);h.src=g.uri}}};e.exports=h}),null);
__d("SpotlightViewer",["cx","React","Spotlight.react"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(!this.props.open)return null;var a="_n3";this.props.className&&(a+=" "+this.props.className);return h.jsx(b("Spotlight.react"),{onBeforeHide:this.props.onBeforeHide,onHide:this.props.onHide,rootClassName:this.props.rootClassName,shown:this.props.open,children:h.jsx("div",{className:a,onClick:this.props.onClick,role:"presentation",children:this.props.children})},"photoLayer")};return c}(h.Component);e.exports=a}),null);
__d("SpotlightViewerImage",["cx","Image.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,b)||this;c.state={loading:!0};c.$3=function(){c.setState({loading:!1})};return c}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.src!==this.props.src&&this.setState({loading:!0})};d.render=function(){return h.jsxs("div",{className:"_4-od",children:[this.$1(),this.$2()]})};d.$1=function(){return!this.state.loading?null:h.jsx(b("XUISpinner.react"),{className:"_enh",size:"large"})};d.$2=function(){return h.jsx("div",{className:this.state.loading?"_eni":"",children:h.jsx(b("Image.react"),{onLoad:this.$3,src:this.props.src,style:{width:this.props.dimensions.x||"",height:this.props.dimensions.y||""}})})};return c}(h.Component);e.exports=a}),null);
__d("SpotlightViewport",["csx","cx","Locale","Parent","React","ReactDOM","Vector","clearTimeout","joinClasses","setTimeout"],(function(a,b,c,d,e,f,g,h){var i=b("React"),j=.2,k={NONE:null,FORWARD:1,BACKWARD:2};a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={currentActiveSection:k.NONE,active:!0},d.$2=function(a){var c=b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d));a=b("Vector").getEventPosition(a.nativeEvent);d.props.fadeInNOut===!0&&(d.$3(a)?b("clearTimeout")(d.timer):d.$1());var e=null;if(c instanceof HTMLElement){var f=b("Vector").getElementPosition(c);c=d.props.useWidth===!0?d.props.stageDimensions.x:b("Vector").getElementDimensions(c).x;a=a.x-f.x;f=a/c;b("Locale").isRTL()?e=f>1-j:e=f<j}e===!0?d.setState({currentActiveSection:k.BACKWARD}):d.setState({currentActiveSection:k.FORWARD})},d.$4=function(a){var c=d.state.currentActiveSection==k.FORWARD;a=a.target;b("Parent").bySelector(a,"._51an")||d.props.onClick&&d.props.onClick(c)},d.$1=function(){d.setState({active:!0}),d.props.fadeInNOut===!0&&(b("clearTimeout")(d.timer),d.timer=b("setTimeout")(d.$5,1e3))},d.$5=function(){d.setState({active:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentWillUnmount=function(){this.props.fadeInNOut===!0&&b("clearTimeout")(this.timer)};d.$3=function(a){return a.y<70||a.y>this.props.stageDimensions.y-70};d.makeActive=function(){this.$1()};d.render=function(){var a="_4-of"+(!this.state.active&&!this.props.active?" _50-l":"")+(this.state.currentActiveSection===k.BACKWARD?" _516a":"")+(this.state.currentActiveSection===k.FORWARD?" _516b":"")+(this.props.showLoadingIndicator?" _51jp":"");this.props.className!=null&&this.props.className!==""&&(a=b("joinClasses")(a,this.props.className));var c={};this.props.stageDimensions&&(c.height=this.props.stageDimensions.y,this.props.useWidth===!0&&(c.width=this.props.stageDimensions.x));return i.jsxs("div",{className:a,onClick:this.$4,onMouseEnter:this.$1,onMouseLeave:this.$5,onMouseMove:this.$2,role:"presentation",style:c,children:[this.props.children,i.jsxs("div",{className:"_4-og",children:[i.jsx("span",{className:"_4-oh"}),this.props.media,i.jsx("div",{className:"_4-oi"})]})]})};return c}(i.Component);e.exports=a}),null);
__d("StickerUtils",[],(function(a,b,c,d,e,f){a={getScaledDimensions:function(a,b,c){var d=b>a?b:a;if(d===0)return{height:0,width:0};c=c/d;return{height:Math.round(a*c),width:Math.round(b*c)}},capitalizeWords:function(a){a=a.split(" ");for(var b=0;b<a.length;b++){var c=a[b].charAt(0).toUpperCase();a[b]=c+a[b].substr(1)}return a.join(" ")}};e.exports=a}),null);
__d("AbstractDialogFitHeight",["csx","cx","CSS","DOM","Event","Style","SubscriptionsHandler","Vector","throttle"],(function(a,b,c,d,e,f,g,h){var i=450,j=100,k=67,l=67;a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.enable=function(){this.$2=new(b("SubscriptionsHandler"))(),this.$2.addSubscriptions(this.$1.subscribe("beforeshow",this.$3.bind(this)),b("Event").listen(window,"resize",b("throttle")(this.$3.bind(this)))),this.$4=b("DOM").find(this.$1.getRoot(),"._4-i2"),b("CSS").addClass(this.$4,"_5pfh"),b("CSS").addClass(this.$1.getRoot(),"_3thl"),this.$5=j,b("DOM").scry(this.$1.getRoot(),"._4-i0").length&&(this.$5+=k),b("DOM").scry(this.$1.getRoot(),"._5a8u").length&&(this.$5+=l)};c.disable=function(){this.$2.release(),this.$2=null,b("CSS").removeClass(this.$4,"_5pfh"),b("CSS").removeClass(this.$1.getRoot(),"_3thl")};c.$3=function(){var a=b("Vector").getViewportDimensions().y;a=a-this.$5;b("Style").set(this.$4,this.getHeightProperty(),Math.max(i,a)+"px");this.$1.updatePosition()};return a}();e.exports=a}),null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getHeightProperty=function(){return"height"};return b}(b("AbstractDialogFitHeight"));e.exports=a}),null);
__d("StickersStateStore",["FluxReduceStore","StickersActions","StickersConfig","StickersDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({customPack:null,customPackLoaded:!1,customPackNuxContent:null,recentStickers:[],recentStickersLoaded:!1,showFlyout:!1,storePackID:null,threadID:null,trayLoaded:!1,trayPackID:null})};d.reduce=function(a,c){var d=c;c=b("StickersActions").Types;switch(d.type){case c.ADD_RECENT_STICKER:var e=[d.sticker];a.get("recentStickers").forEach(function(a){if(a.id===d.sticker.id)return;e.push(a)});return a.set("recentStickers",e.splice(0,b("StickersConfig").max_mru_stickers));case c.HIDE_FLYOUT:return a.set("showFlyout",!1);case c.LOAD_CUSTOM_STICKER_PACK:return a.set("customPack",d.pack).set("customPackLoaded",!0).set("customPackNuxContent",d.nuxContent);case c.LOAD_RECENT_STICKERS:return a.set("recentStickersLoaded",!0).set("recentStickers",d.stickers);case c.SELECT_STORE_PACK:return a.set("storePackID",d.packID);case c.SELECT_TRAY_PACK:return a.set("trayPackID",d.packID).set("trayLoaded",!0);case c.SHOW_FLYOUT:return a.set("showFlyout",!0).set("threadID",d.threadID);case c.TRAY_LOADED:return a.set("trayLoaded",!0);default:return a}};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("StickersDispatcher"))}),null);
__d("StickersTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:StickersLoggerConfig")}),null);
__d("StickersStoreDialog.react",["cx","DialogFitHeight","FDSSpinner.react","JSResource","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","PureStoreBasedStateMixin","React","RelayFBEnvironment","RelayModern","StickersActions","StickersDispatcher","StickersStateStore","StickersTypedLoggerLite","XUIDialog.react","XUIDialogBody.react","createReactClass_DEPRECATED","lazyLoadComponent","prop-types","isSocialPlugin","requestAnimationFrame","StickersStoreDialogStoreQuery.graphql","StickersStoreDialogPackDetailQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("React");a=b("React");var k=a.Suspense,l=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var m=b("StickersTypedLoggerLite").log,n=b("lazyLoadComponent")(b("JSResource")("StickersStoreView.react").__setRef("StickersStoreDialog.react")),o=b("lazyLoadComponent")(b("JSResource")("StickersStoreDetailView.react").__setRef("StickersStoreDialog.react")),p=688,q=320;c=window.devicePixelRatio||1;var r=Math.ceil(40*(window.devicePixelRatio||1)),s=Math.ceil(88*c),t=Math.ceil(608*c);d=b("createReactClass_DEPRECATED")({displayName:"StickersStoreDialog",mixins:[b("PureStoreBasedStateMixin")(b("StickersStateStore"))],propTypes:{isComposer:b("prop-types").bool,onToggle:b("prop-types").func.isRequired,shown:b("prop-types").bool.isRequired},getDefaultProps:function(){return{isComposer:!1}},statics:{calculateState:function(){return{packID:b("StickersStateStore").getState().get("storePackID")}}},UNSAFE_componentWillMount:function(){b("StickersDispatcher").explicitlyRegisterStores([b("StickersStateStore")])},shouldComponentUpdate:function(a){return!!a.shown},componentDidUpdate:function(a){!a.shown&&this.props.shown?this._logOpen():a.shown&&!this.props.shown&&this._logClose()},_logOpen:function(){m({event:"open_store"})},_logClose:function(){m({event:"close_store"})},_renderLoadingStore:function(){return j.jsx("div",{className:"_5r5e",children:j.jsx(b("FDSSpinner.react"),{size:"large"})})},_renderStoreView:function(){var a=this;return j.jsx(l,{environment:b("RelayFBEnvironment"),query:h!==void 0?h:h=b("StickersStoreDialogStoreQuery.graphql"),variables:{count:20,size:r},render:function(b){var c=b.error;b=b.props;if(c)return null;else if(b){c=a._getDialogWidth();return j.jsx(k,{fallback:a._renderLoadingStore(),children:j.jsx(n,{dialogWidth:c,isComposer:a.props.isComposer,packList:b.viewer,shown:a.props.shown})})}return a._renderLoadingStore()}})},_renderStoreDetailView:function(a){var c=this;return j.jsx(l,{environment:b("RelayFBEnvironment"),query:i!==void 0?i:i=b("StickersStoreDialogPackDetailQuery.graphql"),variables:{packID:a,profileSize:s,previewWidth:t},render:function(a){var d=a.error;a=a.props;if(d)return null;else if(a){d=a.node;if(d.is_ghost_pack){b("StickersActions").selectStorePack(null);return null}d=c._getDialogWidth();return j.jsx(k,{fallback:c._renderLoadingStore(),children:j.jsx(o,{dialogWidth:d,shown:c.props.shown,stickerPack:a.node})})}return c._renderLoadingStore()}})},_onToggle:function(a){var c=this;b("requestAnimationFrame")(function(){return c.props.onToggle(a)})},_getDialogWidth:function(){return b("isSocialPlugin")()&&document.body.offsetWidth<p?q:p},render:function(){var a=this._getDialogWidth(),c=this.state.packID;return j.jsx(b("XUIDialog.react"),{behaviors:{DialogFitHeight:b("DialogFitHeight"),LayerAutoFocus:b("LayerAutoFocus"),LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")},onToggle:this._onToggle,shown:this.props.shown,label:"Stickers Store Dialog",width:a,children:j.jsxs(b("XUIDialogBody.react"),{className:"_5rq- autofocus",children:[j.jsx("div",{className:c!=null?"_7vw3":"",children:this._renderStoreView()}),c!=null?this._renderStoreDetailView(c):null]})})}});e.exports=d}),null);
__d("StickersStoreController",["DOM","React","ReactDOM","StickersActions","StickersStoreDialog.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=null,i=function(a){h||(h=b("DOM").create("div"),b("DOM").appendContent(document.body,h)),b("ReactDOM").render(g.jsx(b("StickersStoreDialog.react"),{isComposer:a,onToggle:k,shown:!0}),h)},j=function(){if(!h)return;b("ReactDOM").render(g.jsx(b("StickersStoreDialog.react"),{shown:!1,onToggle:k}),h)},k=function(a){a?i():j()};a={showStore:function(a,c){b("StickersActions").selectStorePack(a),i(!!c)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetType",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("You sent a Valentine."):g._("{name} sent a Valentine.",[g._param("name",b)])}};e.exports=a}),null);
__d("P2PSnippetStringUtils",["fbt"],(function(a,b,c,d,e,f,g){a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your request for {payment request amount} from {receiver's name} was cancelled.",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}'s request for {payment request amount} was cancelled.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}'s request for {payment request amount} from {receiver's name} was cancelled.",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name} declined your request for {payment request amount}.",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("You declined {requester's name}'s request for {payment request amount}.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("You requested {amount} from {requestee name}.",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name} requested {amount} from you.",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name} requested {amount} from {requestee name}.",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,b,c,d,e,f){a=a||1;b=[b,c,d,e,f];switch(a){case 2:return this.getRequestDeclinedSnippet.apply(this,b);case 5:case 6:return this.getRequestCanceledSnippet.apply(this,b)}return this.getRequestSentSnippet.apply(this,b)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your payment of {amount} to {receiver_name} was cancelled.",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}'s payment of {amount} was cancelled.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled.",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name} didn't accept your payment of {amount}.",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("You didn't accept {sender name}'s payment of {amount}.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name} didn't accept {sender_name}'s payment of {amount}.",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("You sent {amount} to {receiver name}.",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name} sent {amount} to you.",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name} sent {amount} to {receiver name}.",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,b,c,d,e,f){b=[b,c,d,e,f];c=a||15;switch(c){case 5:return this.getTransferDeclinedSnippet.apply(this,b);case 3:case 10:case 11:case 12:case 16:return this.getTransferCanceledSnippet.apply(this,b)}return this.getTransferSentSnippet.apply(this,b)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants"],(function(a,b,c,d,e,f,g){"use strict";a={getAttachmentSnippetType:function(a){if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("You sent a video."):g._("{sender name} sent a video.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("You sent a voice message."):g._("{name} sent a voice message.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("You sent a sticker."):g._("{name} sent a sticker.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("You sent a location."):g._("{sender name} sent a location.",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("You sent a live location."):g._("{sender name} sent a live location.",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("You sent a video."):g._("You sent a photo."):a?g._("View {sender name}'s disappearing video.",[g._param("sender name",d)]):g._("View {sender name}'s disappearing photo.",[g._param("sender name",d)])}if(e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0]))return b("MessengerLightweightActionUtils").getLWASnippetText(e);return e&&e.length===1&&this._isGloballyRemovedMessageAttachment(e[0])?e[0].share.description:c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").MIXED:return c?g._("You sent some attachments."):g._("{sender name} sent some attachments.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);default:return""}},_isGloballyRemovedMessageAttachment:function(a){return a.share&&a.share.style_list&&a.share.style_list.includes("globally_deleted_message_placeholder")},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type==="third_party_sticker"},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type==="video"},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,"business_message_items")},_hasSticker:function(a){return a.length===1&&a[0].attach_type==="sticker"},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_location")},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_live_location")},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,"montage_direct")},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion")},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion_request")},_hasSingleShareAttachmentOfStyle:function(a,b){return a.length===1&&a[0].attach_type==="share"&&a[0].share&&a[0].share.style_list.indexOf(b)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type==="share"},_hasError:function(a){return a.length===1&&a[0].attach_type==="error"},_hasGift:function(a){return a.length===1&&a[0].attach_type==="gift"},_hasFile:function(a){return a.length===1&&a[0].attach_type==="file"},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="photo"})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="animated_image"})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a photo.");else return g._("{name} sent a photo.",[g._param("name",b)]);else if(a)return g._({"*":"You sent {num_photos} photos."},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name} sent {num_photos} photos."},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a GIF.");else return g._("{name} sent a GIF.",[g._param("name",b)]);else if(a)return g._("You sent {num_animated_images} GIFs.",[g._param("num_animated_images",c.length)]);else return g._("{name} sent {num_animated_images} GIFs.",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name} sent an attachment.",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a}),null);