if (self.CavalryLogger) { CavalryLogger.start_js(["U+4SJ"]); }

__d("CometUFICommentList_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}];return{argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"includeHighlightedComments",type:"Boolean!"},{defaultValue:!0,kind:"LocalArgument",name:"includeNestedComments",type:"Boolean!"},{defaultValue:!0,kind:"LocalArgument",name:"isInitialFetch",type:"Boolean!"},{kind:"RootArgument",name:"useDefaultActor",type:"Boolean"}],kind:"Fragment",metadata:null,name:"CometUFICommentList_feedback",selections:[a,{alias:null,args:b,kind:"ScalarField",name:"can_viewer_comment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comment_composer_placeholder",storageKey:null},{alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[a],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFIComment_feedback"},{args:[{kind:"Variable",name:"includeHighlightedComments",variableName:"includeHighlightedComments"},{kind:"Variable",name:"includeNestedComments",variableName:"includeNestedComments"},{kind:"Variable",name:"isInitialFetch",variableName:"isInitialFetch"}],kind:"FragmentSpread",name:"CometUFICommentsProvider_feedback"},{args:null,kind:"FragmentSpread",name:"CometUFIComposer_feedback"},{args:null,kind:"FragmentSpread",name:"CometUFICommentEditor_feedback"}],type:"Feedback"}}();e.exports=a}),null);
__d("CometUFICommentsProviderPaginationQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"after",type:"ID"},{defaultValue:null,kind:"LocalArgument",name:"before",type:"ID"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext",type:"String"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"feedLocation",type:"FBFeedLocation"},{defaultValue:null,kind:"LocalArgument",name:"feedbackID",type:"ID!"},{defaultValue:null,kind:"LocalArgument",name:"feedbackSource",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"first",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"focusCommentID",type:"ID"},{defaultValue:!1,kind:"LocalArgument",name:"includeHighlightedComments",type:"Boolean"},{defaultValue:!0,kind:"LocalArgument",name:"includeNestedComments",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"isInitialFetch",type:"Boolean"},{defaultValue:!0,kind:"LocalArgument",name:"isPaginating",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"isComet",type:"Boolean!"},{defaultValue:!0,kind:"LocalArgument",name:"containerIsFeedStory",type:"Boolean"},{defaultValue:!1,kind:"LocalArgument",name:"containerIsWorkplace",type:"Boolean"},{defaultValue:!1,kind:"LocalArgument",name:"containerIsLiveStory",type:"Boolean"},{defaultValue:!1,kind:"LocalArgument",name:"containerIsTahoe",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"last",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"scale",type:"Float"},{defaultValue:null,kind:"LocalArgument",name:"topLevelViewOption",type:"CommentOrderingMode"},{defaultValue:null,kind:"LocalArgument",name:"useDefaultActor",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"viewOption",type:"CommentOrderingMode"},{defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey",type:"String"}],b=[{kind:"Variable",name:"id",variableName:"feedbackID"}],c={kind:"Variable",name:"after",variableName:"after"},d={kind:"Variable",name:"before",variableName:"before"},e={kind:"Variable",name:"first",variableName:"first"},f={kind:"Variable",name:"last",variableName:"last"},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},aa={alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},h={kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},i={kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},j={kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},k={kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},l={kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},m={kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},n={kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},o={kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},p={kind:"Variable",name:"is_initial_fetch",variableName:"isInitialFetch"},ba=[c,d,{kind:"Variable",name:"comment_order",variableName:"viewOption"},h,i,j,k,l,m,n,e,o,p,{kind:"Variable",name:"is_top_level",variableName:"includeNestedComments"},f,{kind:"Variable",name:"top_level_comment_order",variableName:"topLevelViewOption"}],ca={alias:null,args:null,kind:"ScalarField",name:"after_count",storageKey:null},da={alias:null,args:null,kind:"ScalarField",name:"before_count",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"legacy_fbid",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={kind:"Variable",name:"scale",variableName:"scale"},v={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},w=[v],fa={alias:"profile_picture_depth_0",args:[{kind:"Literal",name:"height",value:32},u,{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:null},x=[{kind:"Literal",name:"height",value:24},u,{kind:"Literal",name:"width",value:24}],ga={alias:"profile_picture_depth_1",args:x,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},z={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]};y={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[r,g,s,t,fa,ga,{kind:"InlineFragment",selections:[y,{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},z],type:"User"},{kind:"InlineFragment",selections:[y],type:"Page"}],storageKey:null};var ha={alias:null,args:null,kind:"ScalarField",name:"is_author_weak_reference",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null},ia={alias:null,args:null,kind:"ScalarField",name:"spam_display_mode",storageKey:null},ja={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:"style_type_renderer_comet",args:[{kind:"Literal",name:"supported",value:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer"]}],concreteType:null,kind:"LinkedField",name:"style_type_renderer",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentAnimatedImageShareAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentAnimatedImageShareStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentDonationAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentDonationStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentFallbackAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentFallbackStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentImageAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPhotoStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentStickerAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentStickerStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAutoplayAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoAutoplayStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentVideoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentVideoStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentTipJarPaymentStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPlaceInfoAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentCommentPlaceInfoStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentChatCommandStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryUFICommentAttachment_attachment",fragmentName:"CometUFICommentPageInCommentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentPageInCommentStyleRenderer"}],storageKey:'style_type_renderer(supported:["StoryAttachmentAnimatedImageShareStyleRenderer","StoryAttachmentDonationStyleRenderer","StoryAttachmentFallbackStyleRenderer","StoryAttachmentPhotoStyleRenderer","StoryAttachmentStickerStyleRenderer","StoryAttachmentVideoAutoplayStyleRenderer","StoryAttachmentVideoStyleRenderer","StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentCommentPlaceInfoStyleRenderer","StoryAttachmentChatCommandStyleRenderer","StoryAttachmentPageInCommentStyleRenderer"])'},{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},B={kind:"Variable",name:"feed_location",variableName:"feedLocation"},C=[B],ka={alias:null,args:C,kind:"ScalarField",name:"should_show_comment_menu",storageKey:null},la={alias:null,args:null,kind:"ScalarField",name:"is_author_banned_by_content_owner",storageKey:null},ma={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment_parent",plural:!1,selections:[g,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[r,s,g,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null}],type:"User"}],storageKey:null}],storageKey:null},D=[q],na={alias:null,args:null,concreteType:"EditHistoryConnection",kind:"LinkedField",name:"edit_history",plural:!1,selections:D,storageKey:null},E=[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],F={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},oa={alias:null,args:E,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[F,g],storageKey:null},G=[r,g],pa={alias:null,args:E,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:G,storageKey:null},qa={alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"supported_reactions",plural:!0,selections:[F],storageKey:null},H=[g],ra={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:H,storageKey:null};F={alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:[F,g,{alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'};var sa={alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[q,{alias:null,args:null,kind:"ScalarField",name:"count_reduced",storageKey:null}],storageKey:null},ta={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},I={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:H,storageKey:null},ua={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"page_private_reply",plural:!1,selections:[ta,{alias:null,args:null,kind:"ScalarField",name:"permalink",storageKey:null},I],storageKey:null},va={alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:H,storageKey:null},wa={alias:null,args:null,kind:"ScalarField",name:"can_viewer_demote",storageKey:null},xa={alias:null,args:null,kind:"ScalarField",name:"did_viewer_demote",storageKey:null},ya={alias:null,args:E,kind:"ScalarField",name:"can_viewer_comment",storageKey:null},za={alias:null,args:E,kind:"ScalarField",name:"can_viewer_react",storageKey:null},Aa={alias:null,args:null,kind:"ScalarField",name:"comment_composer_placeholder",storageKey:null};h=[h,i,j,k,l,m,n,o,p,{kind:"Literal",name:"is_top_level",value:!1}];i={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"highlighted_comments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[r,g,s,{alias:"profilePictureForReplyExpander",args:x,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},z],type:"User"}],storageKey:null},A,g],storageKey:null};j={alias:null,args:null,kind:"ScalarField",name:"comment_order",storageKey:null};k={alias:null,args:null,kind:"ScalarField",name:"is_initially_expanded",storageKey:null};l={alias:null,args:null,kind:"ScalarField",name:"page_size",storageKey:null};m={alias:null,args:null,kind:"ScalarField",name:"reply_comment_order",storageKey:null};n={alias:null,args:null,kind:"ScalarField",name:"should_render_composer_preemptively",storageKey:null};o={alias:"sub_replies_count",args:[{kind:"Literal",name:"orderby",value:"sub_replies"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:D,storageKey:'top_level_comments(orderby:"sub_replies")'};p={alias:null,args:null,concreteType:"PageAdminActorInfo",kind:"LinkedField",name:"page_admin_actor_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creator_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_uri",storageKey:null}],storageKey:null};x={alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"parent_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_ban_user",storageKey:null},ya,g,{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"viewer_acts_as_page",plural:!1,selections:H,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_fbid",storageKey:null},{alias:null,args:null,concreteType:"PoliticalFigureData",kind:"LinkedField",name:"political_figure_data",plural:!1,selections:[s,{alias:null,args:null,concreteType:"PoliticalOffice",kind:"LinkedField",name:"political_office",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"generic_title",storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"best_profile",plural:!1,selections:G,storageKey:null},g],storageKey:null}],storageKey:null};D={alias:null,args:null,concreteType:"PrivateReplyContext",kind:"LinkedField",name:"private_reply_context",plural:!1,selections:[I,ta],storageKey:null};I=[{kind:"Literal",name:"translation_type",value:"ORIGINAL"}];var J={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},N=[L,{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},v,M],O={alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null};O={alias:null,args:I,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"translation_type",storageKey:null},r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ImageAtRange",kind:"LinkedField",name:"image_ranges",plural:!0,selections:[J,K,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity_with_image",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:N,storageKey:null},g],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[J,K,{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:[J,K,q,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"sample_entities",plural:!0,selections:[r,g,{kind:"InlineFragment",selections:[s],type:"User"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[r,g,{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},{alias:"profile_url",args:null,kind:"ScalarField",name:"url",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"external_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_skip_redirect",storageKey:null}],type:"ExternalUrl"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"time_index",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:H,storageKey:null}],type:"VideoTimeIndex"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"category_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null}],type:"Page"},{kind:"InlineFragment",selections:[O],type:"User"},{kind:"InlineFragment",selections:[O,{alias:null,args:null,kind:"ScalarField",name:"work_official_status",storageKey:null}],type:"Group"}],storageKey:null},J,K,r,P],storageKey:null},Q,{alias:null,args:null,concreteType:"DelightAtRange",kind:"LinkedField",name:"delight_ranges",plural:!0,selections:[r,{alias:null,args:null,concreteType:"TextDelightCampaign",kind:"LinkedField",name:"campaign",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"delight_surface",value:"COMMENT"}],concreteType:"TextDelightStylePair",kind:"LinkedField",name:"delight_styles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:'delight_styles(delight_surface:"COMMENT")'},g],storageKey:null},J,K],storageKey:null}],type:"TextWithEntities"}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};var Ba={alias:null,args:null,concreteType:"PostTranslatability",kind:"LinkedField",name:"translatability_for_viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"source_dialect_name",storageKey:null}],storageKey:null},Ca={alias:null,args:null,kind:"ScalarField",name:"translation_available_for_viewer",storageKey:null};I={alias:"body_renderer",args:I,concreteType:null,kind:"LinkedField",name:"preferred_body",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyTextWithEntities_textWithEntities",fragmentPropName:"textWithEntities",kind:"ModuleImport"}],type:"TextWithEntities"},{kind:"InlineFragment",selections:[{documentName:"CometUFICommentBody_comment",fragmentName:"CometUFICommentBodyComposedTextWithEntities_composedTextWithEntities",fragmentPropName:"composedTextWithEntities",kind:"ModuleImport"}],type:"FBMarkdownCommentBody"}],storageKey:'preferred_body(translation_type:"ORIGINAL")'};var Da={alias:null,args:null,kind:"ScalarField",name:"timestamp_in_video",storageKey:null},Ea={alias:null,args:null,kind:"ScalarField",name:"written_while_video_was_live",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"tag_type",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"member_id",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null},Fa={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"small_icon",plural:!1,selections:w,storageKey:null},Ga={alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:null,args:[B,{kind:"Literal",name:"is_comet",value:!0}],concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"author_member_badges",plural:!0,selections:[R,S,T,Fa],storageKey:null},{documentName:"CometUFICommentActorLink_comment",fragmentName:"CometUFIGroupCommentActorLink_groupCommentInfo",fragmentPropName:"groupCommentInfo",kind:"ModuleImport"}],storageKey:null},Ha={alias:null,args:null,kind:"ScalarField",name:"has_constituent_badge",storageKey:null},Ia={alias:null,args:null,kind:"ScalarField",name:"can_see_constituent_badge_upsell",storageKey:null},Ja={alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null},Ka={alias:null,args:null,kind:"ScalarField",name:"is_author_original_poster",storageKey:null},La={alias:null,args:null,kind:"ScalarField",name:"is_viewer_comment_poster",storageKey:null},Ma={alias:null,args:C,concreteType:"IdentityBadge",kind:"LinkedField",name:"identity_badges_web",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"badge_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"multiple_badge_asset",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"information_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_asset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"information_description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"identity_badge_type",storageKey:null}],storageKey:null};C={alias:null,args:C,kind:"ScalarField",name:"can_show_multiple_identity_badges",storageKey:null};var Na={alias:null,args:null,kind:"ScalarField",name:"can_viewer_disable_preview",storageKey:null},Oa={alias:null,args:null,kind:"ScalarField",name:"is_hidden_by_content_owner",storageKey:null},U=[u];N={alias:null,args:null,concreteType:"InlineSurveyStoryActionLink",kind:"LinkedField",name:"inline_survey_config",plural:!1,selections:[{alias:null,args:U,concreteType:"Image",kind:"LinkedField",name:"favicon",plural:!1,selections:N,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followup_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_choices",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"main_question",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_blob",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thankyou_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tessa_survey_config_id",storageKey:null},{documentName:"CometUFIComment_comment",fragmentName:"CometUFICommentQualitySurvey_inlineSurveyConfig",fragmentPropName:"inlineSurveyConfig",kind:"ModuleImport"}],storageKey:null};var Pa={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"attached_story",plural:!1,selections:G,storageKey:null};G={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[Q,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:G,storageKey:null},P,J,K],storageKey:null}],storageKey:null};P={alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null};var Qa={alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"reply_parent_comment",plural:!1,selections:H,storageKey:null},Ra={alias:"flat_threading_depth",args:null,kind:"ScalarField",name:"depth",storageKey:null},Sa={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_locally_composed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_created_from_subscription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"client_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reply_comment_parent_fbid",storageKey:null}]},V=[Q],Ta={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"source",plural:!1,selections:V,storageKey:null},W={kind:"Literal",name:"height",value:396},X={kind:"Literal",name:"width",value:396},Y=[L,v,M],Z={alias:null,args:null,kind:"ScalarField",name:"animated_image_attribution",storageKey:null},$={alias:null,args:null,concreteType:"ObjectionableContentInfo",kind:"LinkedField",name:"objectionable_content_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"categories",storageKey:null},{alias:null,args:null,concreteType:"ObjectionableContentWarningScreenText",kind:"LinkedField",name:"strings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"blur_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"blur_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cover_media_link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"learn_more_desc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"learn_more_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_media_desc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uncover_media_link",storageKey:null}],storageKey:null}],storageKey:null};v=[v,M,L];W={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[r,{alias:"gifAnimatedImage_396",args:[W,{kind:"Literal",name:"media_type",value:"image/gif"},u,X],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:Y,storageKey:null},{alias:"image_396",args:[W,u,{kind:"Literal",name:"sizing",value:"contain-fit"},X],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Y,storageKey:null},{alias:"webPAnimatedImage_396",args:[W,{kind:"Literal",name:"media_type",value:"image/webp"},u,X],concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:Y,storageKey:null},g,{alias:"fallback_image",args:[{kind:"Literal",name:"height",value:98},u,{kind:"Literal",name:"width",value:98}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:Y,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:[Z,$,M,L,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:w,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{condition:"isComet",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_latency_tolerance_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:"playable_url_dash",args:[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:null,args:null,kind:"ScalarField",name:"dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:"playable_url_quality_hd",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null},{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{documentName:"VideoPlayerRelay_video",fragmentName:"InstreamVideoAdBreaksPlayer_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null}]}],type:"Video"},{kind:"InlineFragment",selections:[{alias:"media_id",args:null,kind:"ScalarField",name:"id",storageKey:null},Z],type:"GenericAttachmentMedia"},{kind:"InlineFragment",selections:[$,{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:"massive_image",args:U,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[M,L],storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:210},u,{kind:"Literal",name:"width",value:260}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:v,storageKey:null}],type:"Photo"}],storageKey:null};X=[{alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"single_line_full_address",storageKey:null}],storageKey:null},g,s,{alias:null,args:null,concreteType:"Location",kind:"LinkedField",name:"location",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"latitude",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"longitude",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overall_rating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price_range_description",storageKey:null},{alias:null,args:[{kind:"Literal",name:"size__height",value:60},{kind:"Literal",name:"size__width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:w,storageKey:"profile_picture(size__height:60,size__width:60)"},{alias:null,args:null,kind:"ScalarField",name:"top_category_name",storageKey:null},t];Y={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[r,g,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_add_to_attachment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_remove_from_attachment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_add_suggested_to_attachment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_remove_suggested_from_attachment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_curate_attachment",storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"pending_places_for_attachment",plural:!0,selections:X,storageKey:null},{alias:null,args:null,concreteType:"CommentPlaceInfoToPlaceListItemsConnection",kind:"LinkedField",name:"place_list_items",plural:!1,selections:[{alias:null,args:null,concreteType:"PlaceListItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"recommendation_page",plural:!1,selections:X,storageKey:null},g],storageKey:null}],storageKey:null}],type:"CommentPlaceInfo"},{kind:"InlineFragment",selections:[t],type:"ExternalUrl"}],storageKey:null};Z={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"style_infos",plural:!0,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"donation_comment_text",plural:!1,selections:[{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[r,t,g],storageKey:null},J,K],storageKey:null},Q],storageKey:null}],type:"FundraiserForStoryDonationAttachmentStyleInfo"}],storageKey:null};$={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:V,storageKey:null};U={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"object_id",storageKey:null}],type:"ArticleContextActionLink"}],storageKey:null};M={alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null};L=[s,g];X=[{kind:"Literal",name:"height",value:80},u,{kind:"Literal",name:"width",value:80}];J={alias:"sticker",args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[r,g,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"frame_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frame_rate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_column",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"frames_per_row",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"pack",plural:!1,selections:L,storageKey:null},{alias:null,args:X,concreteType:"Image",kind:"LinkedField",name:"sprite_image",plural:!1,selections:w,storageKey:null},{alias:"sticker_image",args:X,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:v,storageKey:null},{alias:"larger_sticker_image",args:[{kind:"Literal",name:"height",value:120},u,{kind:"Literal",name:"width",value:120}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:v,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sticker_type",storageKey:null}],type:"Sticker"}],storageKey:null};K={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"parent_post_story",plural:!1,selections:H,storageKey:null};Q=[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[t,Ta,W,Y,Z,$,U,M,J,{alias:"style_type_renderer_blue",args:[{kind:"Literal",name:"supported",value:["StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentChatCommandStyleRenderer"]}],concreteType:null,kind:"LinkedField",name:"style_type_renderer",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{documentName:"UFI2CommentLazyLoadAttachmentContainer_attachment",fragmentName:"UFI2CommentTipJarPaymentAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentTipJarPaymentStyleRenderer"},{kind:"InlineFragment",selections:[{documentName:"UFI2CommentLazyLoadAttachmentContainer_attachment",fragmentName:"UFI2CommentChatCommandAttachmentStyle_styleTypeRenderer",fragmentPropName:"styleTypeRenderer",kind:"ModuleImport"}],type:"StoryAttachmentChatCommandStyleRenderer"}],storageKey:'style_type_renderer(supported:["StoryAttachmentTipJarPaymentStyleRenderer","StoryAttachmentChatCommandStyleRenderer"])'}],storageKey:null},K,{alias:null,args:null,concreteType:"GroupCommentInfo",kind:"LinkedField",name:"group_comment_info",plural:!1,selections:[{alias:"legacy_author_member_badges",args:[B,{kind:"Literal",name:"is_comet",value:!1}],concreteType:"RenderableGroupMemberTag",kind:"LinkedField",name:"author_member_badges",plural:!0,selections:[R,S,T,{alias:null,args:null,kind:"ScalarField",name:"argb_background_color",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"dialog_url",storageKey:null},Fa],storageKey:null}],storageKey:null}];V={condition:"containerIsFeedStory",kind:"Condition",passingValue:!0,selections:Q};w={condition:"containerIsLiveStory",kind:"Condition",passingValue:!0,selections:Q};X={condition:"containerIsTahoe",kind:"Condition",passingValue:!0,selections:Q};u={condition:"containerIsWorkplace",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[t,Ta,W,Y,Z,$,U,M,J],storageKey:null},K,{alias:null,args:null,kind:"ScalarField",name:"is_author_non_coworker",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_author_bot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_the_comment_on_work_knowledge",storageKey:null},{alias:null,args:null,concreteType:"InternQASyncedAnswerData",kind:"LinkedField",name:"synced_intern_qa_answer",plural:!1,selections:[ta,{alias:null,args:null,kind:"ScalarField",name:"activity_uri",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"last_editor",plural:!1,selections:L,storageKey:null}],storageKey:null}]};v={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};B={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_cursor",storageKey:null}],storageKey:null};R={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"ufi2_connection_generation",storageKey:null}]};S=["feedback_source","focus_comment_id","comment_order"];T={kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometUFICommentsProviderPaginationQuery",selections:[{alias:null,args:b,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{args:[c,d,e,{kind:"Variable",name:"includeHighlightedComments",variableName:"includeHighlightedComments"},{kind:"Variable",name:"includeNestedComments",variableName:"includeNestedComments"},{kind:"Variable",name:"isInitialFetch",variableName:"isInitialFetch"},{kind:"Variable",name:"isPaginating",variableName:"isPaginating"},f,{kind:"Variable",name:"topLevelViewOption",variableName:"topLevelViewOption"},{kind:"Variable",name:"viewOption",variableName:"viewOption"}],kind:"FragmentSpread",name:"CometUFICommentsProvider_feedback"}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometUFICommentsProviderPaginationQuery",selections:[{alias:null,args:b,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,aa,{alias:null,args:ba,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[ca,da,q,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,ea,y,ha,A,ia,ja,ka,la,ma,na,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,oa,pa,qa,ra,F,sa,ua,va,wa,xa,ya,za,Aa,{condition:"includeNestedComments",kind:"Condition",passingValue:!0,selections:[{alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},{alias:null,args:E,concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[r,s,t,fa,ga,{kind:"InlineFragment",selections:[z],type:"User"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_pin_live_comments",storageKey:null},{alias:null,args:null,concreteType:"BroadcastPinnedCommentEvent",kind:"LinkedField",name:"latest_pinned_comment_event",plural:!1,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"pinned_comment",plural:!1,selections:H,storageKey:null},g],storageKey:null},aa,{alias:null,args:h,concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[i,j,k,l,m,n,ca,da,q,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[g,ea,y,ha,A,ia,ja,ka,la,ma,na,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[g,oa,pa,qa,ra,F,sa,ua,va,wa,xa,ya,za,Aa,o],storageKey:null},p,x,D,O,Ba,Ca,t,I,Da,Ea,Ga,Ha,Ia,Ja,Ka,La,Ma,C,Na,Oa,N,Pa,G,P,Qa,Ra,r,Sa,V,w,X,u],storageKey:null},v],storageKey:null},B,R],storageKey:null},{alias:null,args:h,filters:S,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:T}]},{condition:"includeNestedComments",kind:"Condition",passingValue:!1,selections:[o]}],storageKey:null},p,x,D,O,Ba,Ca,t,I,Da,Ea,Ga,Ha,Ia,Ja,Ka,La,Ma,C,Na,Oa,N,Pa,G,P,Qa,Ra,r,Sa,V,w,X,u],storageKey:null},v],storageKey:null},B,{condition:"includeHighlightedComments",kind:"Condition",passingValue:!0,selections:[i]},{condition:"isPaginating",kind:"Condition",passingValue:!1,selections:[j,k,l,m,n,R]}],storageKey:null},{alias:null,args:ba,filters:S,handle:"ufi2_comments",key:"UFI2CommentsProvider_feedback_display_comments",kind:"LinkedHandle",name:"display_comments",dynamicKey:T}],storageKey:null}]},params:{id:"3655298091211157",metadata:{},name:"CometUFICommentsProviderPaginationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometUFICommentsProviderReadCommentsPageQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"after",type:"ID"},{defaultValue:null,kind:"LocalArgument",name:"before",type:"ID"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext",type:"String"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"feedLocation",type:"FBFeedLocation"},{defaultValue:null,kind:"LocalArgument",name:"feedbackID",type:"ID!"},{defaultValue:null,kind:"LocalArgument",name:"feedbackSource",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"first",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"focusCommentID",type:"ID"},{defaultValue:!0,kind:"LocalArgument",name:"includeNestedComments",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"isInitialFetch",type:"Boolean"},{defaultValue:null,kind:"LocalArgument",name:"last",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"topLevelViewOption",type:"CommentOrderingMode"},{defaultValue:null,kind:"LocalArgument",name:"viewOption",type:"CommentOrderingMode"}],b=[{kind:"Variable",name:"id",variableName:"feedbackID"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"before",variableName:"before"},{kind:"Variable",name:"comment_order",variableName:"viewOption"},{kind:"Variable",name:"feed_context_enable_comment",variableName:"displayCommentsContextEnableComment"},{kind:"Variable",name:"feed_context_fb_feed_location",variableName:"feedLocation"},{kind:"Variable",name:"feed_context_is_ad_preview",variableName:"displayCommentsContextIsAdPreview"},{kind:"Variable",name:"feed_context_is_aggregated_share",variableName:"displayCommentsContextIsAggregatedShare"},{kind:"Variable",name:"feed_context_is_story_set",variableName:"displayCommentsContextIsStorySet"},{kind:"Variable",name:"feedback_context",variableName:"displayCommentsFeedbackContext"},{kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"},{kind:"Variable",name:"is_initial_fetch",variableName:"isInitialFetch"},{kind:"Variable",name:"is_top_level",variableName:"includeNestedComments"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"top_level_comment_order",variableName:"topLevelViewOption"}],concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"display_comments",plural:!1,selections:[{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[c],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometUFICommentsProviderReadCommentsPageQuery",selections:[{alias:null,args:b,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[d],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometUFICommentsProviderReadCommentsPageQuery",selections:[{alias:null,args:b,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[d,c],storageKey:null}]},params:{id:"3550071361673516",metadata:{},name:"CometUFICommentsProviderReadCommentsPageQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometUFICommentsProvider_displayCommentsHighlightedComments.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometUFICommentsProvider_displayCommentsHighlightedComments"};e.exports=a}),null);
__d("CometUFICommentsProvider_displayCommentsMetadata.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometUFICommentsProvider_displayCommentsMetadata"};e.exports=a}),null);
__d("CometUFICommentsProvider_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"is_created_from_subscription",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"is_locally_composed",storageKey:null};return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"after",type:"ID"},{defaultValue:null,kind:"LocalArgument",name:"before",type:"ID"},{defaultValue:null,kind:"LocalArgument",name:"first",type:"Int"},{defaultValue:null,kind:"LocalArgument",name:"last",type:"Int"},{defaultValue:!1,kind:"LocalArgument",name:"includeHighlightedComments",type:"Boolean!"},{defaultValue:!0,kind:"LocalArgument",name:"includeNestedComments",type:"Boolean!"},{defaultValue:!0,kind:"LocalArgument",name:"isInitialFetch",type:"Boolean!"},{defaultValue:!1,kind:"LocalArgument",name:"isPaginating",type:"Boolean!"},{defaultValue:null,kind:"LocalArgument",name:"topLevelViewOption",type:"CommentOrderingMode"},{defaultValue:null,kind:"LocalArgument",name:"viewOption",type:"CommentOrderingMode"},{defaultValue:!1,kind:"LocalArgument",name:"__false",type:"Boolean!"},{defaultValue:!0,kind:"LocalArgument",name:"__true",type:"Boolean!"},{kind:"RootArgument",name:"displayCommentsContextEnableComment",type:"Boolean"},{kind:"RootArgument",name:"feedLocation",type:"FBFeedLocation"},{kind:"RootArgument",name:"displayCommentsContextIsAdPreview",type:"Boolean"},{kind:"RootArgument",name:"displayCommentsContextIsAggregatedShare",type:"Boolean"},{kind:"RootArgument",name:"displayCommentsContextIsStorySet",type:"Boolean"},{kind:"RootArgument",name:"displayCommentsFeedbackContext",type:"String"},{kind:"RootArgument",name:"feedbackSource",type:"Int"},{kind:"RootArgument",name:"focusCommentID",type:"ID"},{kind:"RootArgument",name:"UFI2CommentsProvider_commentsKey",type:"String"}],kind:"Fragment",metadata:{connection:[{count:null,cursor:null,direction:"bidirectional",path:["display_comments"]}]},name:"CometUFICommentsProvider_feedback",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},{alias:"display_comments",args:[{kind:"Variable",name:"__dynamicKey",variableName:"UFI2CommentsProvider_commentsKey"},{kind:"Variable",name:"comment_order",variableName:"viewOption"},{kind:"Variable",name:"feedback_source",variableName:"feedbackSource"},{kind:"Variable",name:"focus_comment_id",variableName:"focusCommentID"}],concreteType:"DisplayCommentsConnection",kind:"LinkedField",name:"__UFI2CommentsProvider_feedback_display_comments_ufi2_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"after_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"before_count",storageKey:null},b,{alias:null,args:null,concreteType:"DisplayCommentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"legacy_fbid",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"author",plural:!1,selections:[c,a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_author_weak_reference",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"spam_display_mode",storageKey:null},{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_composer_placeholder",storageKey:null},{condition:"includeNestedComments",kind:"Condition",passingValue:!0,selections:[{args:[{kind:"Variable",name:"includeHighlightedComments",variableName:"__true"},{kind:"Variable",name:"includeNestedComments",variableName:"__false"},{kind:"Variable",name:"isInitialFetch",variableName:"isInitialFetch"}],kind:"FragmentSpread",name:"CometUFICommentList_feedback"}]},{condition:"includeNestedComments",kind:"Condition",passingValue:!1,selections:[a,{alias:"sub_replies_count",args:[{kind:"Literal",name:"orderby",value:"sub_replies"}],concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[b],storageKey:'top_level_comments(orderby:"sub_replies")'}]}],storageKey:null},{alias:null,args:null,concreteType:"InlineSurveyStoryActionLink",kind:"LinkedField",name:"inline_survey_config",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UFI2CommentQualitySurvey_inlineSurveyConfig"}],storageKey:null},{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"reply_parent_comment",plural:!1,selections:[a],storageKey:null},{alias:"flat_threading_depth",args:null,kind:"ScalarField",name:"depth",storageKey:null},c,{args:null,kind:"FragmentSpread",name:"CometUFIComment_comment"},{args:null,kind:"FragmentSpread",name:"CometUFICommentEditor_comment"},{kind:"InlineDataFragmentSpread",name:"isCometCommentFresh_comment",selections:[d,{kind:"ClientExtension",selections:[e,f]}]},{args:null,kind:"FragmentSpread",name:"UFI2CommentActorLink_comment"},{args:null,kind:"FragmentSpread",name:"UFI2CommentActorLinkBadgesDynamic_comment"},{args:null,kind:"FragmentSpread",name:"UFI2CommentQualitySurvey_comment"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"client_id",storageKey:null},f,e,{alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reply_comment_parent_fbid",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_cursor",storageKey:null}],storageKey:null},{condition:"includeHighlightedComments",kind:"Condition",passingValue:!0,selections:[{kind:"InlineDataFragmentSpread",name:"CometUFICommentsProvider_displayCommentsHighlightedComments",selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"highlighted_comments",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometUFIRepliesExpander_highlightedComments"}],storageKey:null}]}]},{condition:"isPaginating",kind:"Condition",passingValue:!1,selections:[{kind:"InlineDataFragmentSpread",name:"CometUFICommentsProvider_displayCommentsMetadata",selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_initially_expanded",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reply_comment_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_render_composer_preemptively",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"ufi2_connection_generation",storageKey:null}]}]}]}],storageKey:null}],type:"Feedback"}}();e.exports=a}),null);
__d("CometUFICommentListState",["ErrorNormalizeUtils","FBLogger","UFI2CommentsConfig","UFI2ViewOption","gkx","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){var b=a.count,c=a.direction,d=a.error,e=a.hasMore,f=a.isLoading,g=a.pageSize;a=a.totalCount;if(a!=null&&a===0)return null;if(b===0)return null;return!e?null:{__type:"PAGER",count:Math.min(b,g),direction:c,status:{error:d,pending:f}}}function h(a){var b=a.count,c=a.expanded;a=a.minCountToShowCollapser;if(!c)return null;if(a==null)return null;return b<=a?null:{__type:"REPLIES_COLLAPSER",count:b}}function i(a){var b=a.error,c=a.expanded,d=a.isLoading;a=a.totalCount;return c||a===0?null:{__type:"REPLIES_EXPANDER",count:a,status:{error:b,pending:d}}}function j(a){var b=a.direction;a=a.page;if(b==="forward"){b=Math.max(0,a.afterCount-1);return babelHelpers["extends"]({},a,{afterCount:b,hasNext:b>0})}b=Math.max(0,a.beforeCount-1);return babelHelpers["extends"]({},a,{beforeCount:b,hasPrevious:b>0})}function k(a,c){var d=l(a,c);if(a.__type!=="INITIAL_STATE"&&c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");return d}function l(a,c){if(a.__type==="INITIAL_STATE"){var d,e=a.args,f=e.afterCount,k=e.beforeCount,l=e.canViewerComment,m=e.commentIDs,n=e.commentsByID,p=e.feedbackTargetID,s=e.hasNext,t=e.hasPrevious,u=e.hiddenCommentIDs,v=e.initiallyExpanded,w=e.isListVisible,x=e.pageSize,y=e.shouldRenderComposerPreemptively,z=e.topLevelFeedbackTargetID,A=e.totalCount;e=e.viewOption;d={backward:g({count:k,direction:"backward",error:null,hasMore:t,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.backward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:x,totalCount:A}),forward:g({count:f,direction:"forward",error:null,hasMore:s,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.forward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:x,totalCount:A})};var da={};u.forEach(function(a){da[a]="COLLAPSED"});u={canViewerComment:l,commentPages:m.length>0?[{__type:"COMMENTS_PAGE",afterCount:f,beforeCount:k,commentIDs:m,hasNext:s,hasPrevious:t,state:"VISIBLE"}]:[],commentsByID:n,commentsHiddenByViewer:da,expanded:(x=c==null?void 0:c.expanded)!=null?x:v,feedbackTargetID:p,hasPaged:{backward:!1,forward:!1},isListVisible:w,locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:d,shouldComposerRenderWhenListIsExpanded:y,topLevelFeedbackTargetID:z,viewOption:e};if(a.args.depth===0)return babelHelpers["extends"]({},u,{__type:"DEPTH_0",status:{error:null,pending:!1}});l=a.args.minCountToShowCollapser;f=null;c!=null&&c.__type==="DEPTH_1"&&(f=c.repliesExpander);return babelHelpers["extends"]({},u,{__type:"DEPTH_1",repliesCollapser:h({count:m.length,expanded:v,minCountToShowCollapser:l}),repliesExpander:i({error:null,expanded:(k=c==null?void 0:c.expanded)!=null?k:v,isLoading:(n=(s=f)==null?void 0:(t=s.status)==null?void 0:t.pending)!=null?n:!1,totalCount:A})})}if(c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");switch(a.__type){case"COLLAPSE_LIST":x=a.args;p=x.depth;w=x.totalCount;if(c.expanded===!1)return c;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{expanded:!1});d=r.getCommentsCount({depth:p,state:c})===0;y=w>0&&d===!0;y&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): COLLAPSE_LIST: expected list not to be empty if connection is not empty");return babelHelpers["extends"]({},c,{expanded:!1,repliesCollapser:null,repliesExpander:i({error:c.repliesExpander?c.repliesExpander.status.error:null,expanded:!1,isLoading:!1,totalCount:w})});case"DELETE_COMMENT":z=a.args;var B=z.commentID;e=z.depth;u=c.commentPages;m=c.locallyComposedCommentIDs;var C=c.newCommentsPage;if(u.length===0&&C.commentIDs.length===0)return c;l=C.commentIDs.filter(function(a){return a!==B});k=r.getVisibleCommentsCount({depth:e,state:c});v=l.length<C.commentIDs.length;if(v){var ea={};l.forEach(function(a){ea[a]=C.visibleStates[a]});f=babelHelpers["extends"]({},C,{commentIDs:l,visibleStates:ea});s=u.map(function(a){return j({direction:"backward",page:a})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:s,newCommentsPage:f});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");t=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:s,newCommentsPage:f,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:t})})}var D=null,E=!1;n=u.map(function(a,b){if(E)return j({direction:"backward",page:a});var c=a.commentIDs.filter(function(a){return a!==B});if(c.length<a.commentIDs.length){E=!0;D=b;return babelHelpers["extends"]({},a,{commentIDs:c})}return a}).map(function(a,b){return a&&D!=null&&b<D?j({direction:"forward",page:a}):a}).filter(Boolean);if(E===!1){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried deleting a comment that isnt present");return c}A=m.filter(function(a){return a!==B});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:n,locallyComposedCommentIDs:A});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:n,locallyComposedCommentIDs:A,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:a.args.minCountToShowCollapser})});case"EXPAND_HIDDEN_COMMENTS":x=a.args.commentIDs;var fa=c.commentsHiddenByViewer,F=babelHelpers["extends"]({},fa);x.forEach(function(a){var c=fa[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried expanding a comment that is not hidden");return}c==="COLLAPSED"&&(F[a]="EXPANDED")});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:F}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:F});case"EXPAND_LIST":p=a.args;d=p.depth;y=p.totalCount;w=c.commentPages;z=c.newCommentsPage;if(c.expanded===!0&&c.shouldComposerRenderWhenListIsExpanded===!0)return c;if(d!==0&&r.isRepliesExpanderLoading({depth:d,state:c}))return c;if(y===0)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:null,repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});e=r.getVisibleCommentsCount({depth:d,state:c});if(e===0){v=r.getCommentsCount({depth:d,state:c})===0;if(v)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0,status:{error:null,pending:!0}}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!1,repliesCollapser:null,repliesExpander:i({error:null,expanded:!1,isLoading:!0,totalCount:y})});l=w.length>0?w[0]:null;s=l!=null?[babelHelpers["extends"]({},l,{state:"VISIBLE"})].concat(w.slice(1)):w;var ga={};z.commentIDs.forEach(function(a){ga[a]="VISIBLE"});f=babelHelpers["extends"]({},z,{visibleStates:ga});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:s,expanded:!0,newCommentsPage:f,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");t=(l!=null?l.commentIDs.length:0)+z.commentIDs.length;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:s,expanded:!0,newCommentsPage:f,repliesCollapser:h({count:t,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0})}if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:h({count:e,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});case"HIDE_COMMENTS":u=a.args.commentIDs;m=c.commentsHiddenByViewer;var G=babelHelpers["extends"]({},m);u.forEach(function(a){G[a]="LOCALLY_HIDDEN"});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:G}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:G});case"RECEIVE_COMMENTS_PAGE":n=c.commentPages;A=c.locallyComposedCommentIDs;var H=c.newCommentsPage;k=c.pagers;x=a.args;var I=x.commentIDs;p=x.depth;d=x.direction;v=x.feedbackTargetID;y=x.hiddenCommentIDs;w=x.pageSize;var J=r.isPagerLoading({depth:p,direction:d,state:c})===!0;l=p!==0&&r.isRepliesExpanderLoading({depth:p,state:c});var ha=p===0&&!J;z=H.commentIDs.filter(function(a){return!(I.includes(a)&&(!ha||H.visibleStates[a]==="HIDDEN"))});s=A.filter(function(a){return!I.includes(a)});var K={};z.forEach(function(a){K[a]=H.visibleStates[a]});f=babelHelpers["extends"]({},H,{commentIDs:z,visibleStates:K});var ia=new Set(n.reduce(function(a,b){return a.concat(b.commentIDs)},[]).concat(ha?z:[]));t=I.filter(function(a){return!ia.has(a)});d==="forward"&&a.args.hasNext===!0&&a.args.afterCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",v).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_next_page but after_count is 0");a.args.direction==="forward"&&a.args.hasNext===!1&&a.args.afterCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",v).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have next_page but after_count is > 0");a.args.direction==="backward"&&a.args.hasPrevious===!0&&a.args.beforeCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",v).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_previous_page but before_count is 0");a.args.direction==="backward"&&a.args.hasPrevious===!1&&a.args.beforeCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",v).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have previous_page but before_count is > 0");e=c.shouldComposerRenderWhenListIsExpanded===!0||J===!0||l===!0;var L=babelHelpers["extends"]({},c.commentsHiddenByViewer);y.forEach(function(a){Object.prototype.hasOwnProperty.call(L,a)||(L[a]="COLLAPSED")});m=ia.size;if(p!==0&&a.args.direction==="forward"&&m===0){u=a.args;x=u.afterCount;A=u.hasNext;d={backward:null,forward:g({count:x,direction:"forward",error:null,hasMore:A,isLoading:!1,pageSize:w})};var M=c.expanded||l?"VISIBLE":"HIDDEN";v={__type:"COMMENTS_PAGE",afterCount:x,beforeCount:z.length,commentIDs:t,hasNext:A,hasPrevious:!1,state:M};z.forEach(function(a){K[a]=M});f=babelHelpers["extends"]({},H,{commentIDs:z,visibleStates:K});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");if(c.__type!=="DEPTH_1")throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");y=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[v],commentsHiddenByViewer:L,expanded:M==="VISIBLE",locallyComposedCommentIDs:s,newCommentsPage:f,pagers:d,repliesCollapser:h({count:t.length,expanded:l,minCountToShowCollapser:y}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e})}m=n[0];u=n[n.length-1];x=r.getVisibleCommentsCount({depth:p,state:c});if(a.args.direction==="backward"){if(J&&m!=null&&m.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected first available page to be visible if backward pager was loading when backward comments were received","ufi2");A=a.args;v=A.beforeCount;d=A.hasPrevious;y=v<=z.length;y&&(K={},f.commentIDs.forEach(function(a){K[a]=J?"VISIBLE":"HIDDEN"}),f=babelHelpers["extends"]({},f,{visibleStates:K}));p=v-f.commentIDs.length-s.length;A=babelHelpers["extends"]({},k,{backward:J?g({count:p,direction:"backward",error:null,hasMore:d&&!y,isLoading:!1,pageSize:w}):k.backward});m={__type:"COMMENTS_PAGE",afterCount:((z=m==null?void 0:m.afterCount)!=null?z:0)+((z=m==null?void 0:(p=m.commentIDs)==null?void 0:p.length)!=null?z:0),beforeCount:v,commentIDs:t,hasNext:!0,hasPrevious:d,state:J||l?"VISIBLE":"HIDDEN"};if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[m].concat(n),commentsHiddenByViewer:L,locallyComposedCommentIDs:s,newCommentsPage:f,pagers:A,shouldComposerRenderWhenListIsExpanded:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");p=a.args.minCountToShowCollapser;z=l?!0:c.expanded;v=x+(m.state==="VISIBLE"?t.length:0)+(y&&J?f.commentIDs.length:0);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[m].concat(n),commentsHiddenByViewer:L,expanded:z,locallyComposedCommentIDs:s,newCommentsPage:f,pagers:A,repliesCollapser:h({count:v,expanded:z,minCountToShowCollapser:p}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e})}if(J&&u!=null&&u.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected last available page to be visible if forward pager was loading when forward comments were received","ufi2");d=a.args;y=d.afterCount;m=d.hasNext;A=babelHelpers["extends"]({},k,{forward:J?g({count:y,direction:"forward",error:null,hasMore:m,isLoading:!1,pageSize:w}):k.forward});d={__type:"COMMENTS_PAGE",afterCount:y,beforeCount:((v=u==null?void 0:u.beforeCount)!=null?v:0)+((p=u==null?void 0:(z=u.commentIDs)==null?void 0:z.length)!=null?p:0),commentIDs:t,hasNext:m,hasPrevious:!0,state:J||l?"VISIBLE":"HIDDEN"};var N=0;w=l?n.map(function(a){a.state==="HIDDEN"&&(N+=a.commentIDs.length);return babelHelpers["extends"]({},a,{state:"VISIBLE"})}):n;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[].concat(w,[d]),commentsHiddenByViewer:L,locallyComposedCommentIDs:s,newCommentsPage:f,pagers:A,shouldComposerRenderWhenListIsExpanded:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");k=a.args.minCountToShowCollapser;y=d.state==="VISIBLE"?x+N+t.length:x+N;v=l?!0:c.expanded;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[].concat(w,[d]),commentsHiddenByViewer:L,expanded:v,locallyComposedCommentIDs:s,newCommentsPage:f,pagers:A,repliesCollapser:h({count:y,expanded:v,minCountToShowCollapser:k}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e});case"RECEIVE_NEW_COMMENT":u=a.args;var O=u.commentID;z=u.depth;p=u.pageSize;m=u.prevTotalCount;n=u.totalCount;t=c.commentPages;x=c.commentsByID;w=c.expanded;d=c.locallyComposedCommentIDs;var P=c.newCommentsPage;s=c.pagers;f=c.viewOption;A=r.getCommentsCount({depth:z,state:c})===0;y=Object.prototype.hasOwnProperty.call(P.visibleStates,O)||t.some(function(a){return a.commentIDs.includes(O)});if(y)return c;v=x[O]!=null&&x[O].is_locally_composed===!0;var Q=!b("UFI2ViewOption").isChronologicalOrder(f)&&c.__type!=="DEPTH_0";k=c.repliesExpander!=null?babelHelpers["extends"]({},c.repliesExpander,{count:Math.min(c.repliesExpander.count+1,n)}):null;var R=(e=(l=x[O])==null?void 0:l.reply_comment_parent_fbid)!=null?e:(u=x[O])==null?void 0:(y=u.reply_parent_comment)==null?void 0:y.id;if(c.__type!=="DEPTH_0"&&a.args.depth!==0&&f==="RANKED_SUB_REPLIES"&&(R!=null||t.length===0)){var S=!1;l=t.map(function(a){if(!S&&R!=null){var b=a.commentIDs.indexOf(R);if(b>=0){S=!0;var c=[].concat(a.commentIDs);c.splice(b+1,0,O);return babelHelpers["extends"]({},a,{commentIDs:c})}}return a});e=P;if(!S&&R!=null||l.length===0){x=R!=null?P.commentIDs.indexOf(R):-1;u=[].concat(P.commentIDs);x>=0?u.splice(x,0,O):u.unshift(O);e=babelHelpers["extends"]({},P,{commentIDs:u,visibleStates:babelHelpers["extends"]({},P.visibleStates,(y={},y[O]="VISIBLE",y))});S=!0}f=v?[O].concat(d):d;if(S)return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:l,locallyComposedCommentIDs:f,newCommentsPage:e})}if(t.length===0){u=babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(x={},x[O]=w||v||z!==0&&A&&m===0?"VISIBLE":"HIDDEN",x))});y=v?[O].concat(d):d;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:y,newCommentsPage:u});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");l=a.args.minCountToShowCollapser;f=A&&m===0?!0:w;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:f,locallyComposedCommentIDs:y,newCommentsPage:u,repliesCollapser:h({count:u.commentIDs.length,expanded:w,minCountToShowCollapser:l}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}e=t[0];x=o(c);A=z===0&&r.hasMoreInDirection({depth:z,direction:"forward",state:c,totalCount:n})&&!c.commentPages.some(function(a){return a.state==="VISIBLE"});if(!A&&v){var T=!1,U=babelHelpers["extends"]({},P.visibleStates),ja=[],V=[];f=(Q?[].concat(t).reverse():t).map(function(a){if(!T&&a.state==="VISIBLE"){T=!0;P.commentIDs.forEach(function(a){U[a]==="VISIBLE"?(delete U[a],V.push(a)):ja.push(a)});return babelHelpers["extends"]({},a,{commentIDs:Q?[].concat(a.commentIDs,V.reverse(),[O]):[O].concat(V,a.commentIDs)})}return T?babelHelpers["extends"]({},a,{afterCount:Q?a.afterCount+1+V.length:a.afterCount,beforeCount:Q?a.beforeCount:a.beforeCount+1+V.length}):a});y=babelHelpers["extends"]({},P,{commentIDs:ja,visibleStates:U});u=[O].concat(d);if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:f,locallyComposedCommentIDs:u,newCommentsPage:y});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");l=a.args.minCountToShowCollapser;var W=r.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:Q?f.reverse():f,locallyComposedCommentIDs:u,newCommentsPage:y,repliesCollapser:h({count:W+1,expanded:w,minCountToShowCollapser:l}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}else if(A){u={commentPages:t.map(function(a,b){return b===0?babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0}):a}),locallyComposedCommentIDs:v?[O].concat(d):d,newCommentsPage:babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(f={},f[O]="VISIBLE",f))})};return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,u,{__type:"DEPTH_0"}):babelHelpers["extends"]({},c,u,{__type:"DEPTH_1"})}else if(x&&ba(c)){y=t.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})});l=babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(W={},W[O]="VISIBLE",W))});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:y,newCommentsPage:l});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;v=r.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:y,newCommentsPage:l,repliesCollapser:h({count:v+1,expanded:w,minCountToShowCollapser:A}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}else if(x&&P.commentIDs.length===0){d=s.backward!=null?babelHelpers["extends"]({},s,{backward:babelHelpers["extends"]({},s.backward,{count:Math.min(s.backward.count+1,p)})}):s;f=e.commentIDs.length<p;if(f){u=[babelHelpers["extends"]({},e,{commentIDs:[O].concat(e.commentIDs)})].concat(t.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,pagers:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,pagers:d,repliesExpander:k})}W=[{__type:"COMMENTS_PAGE",afterCount:e.afterCount+e.commentIDs.length,beforeCount:0,commentIDs:[O],hasNext:!0,hasPrevious:!1,state:"HIDDEN"},babelHelpers["extends"]({},e,{beforeCount:1,hasPrevious:!0})].concat(t.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:W,pagers:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:W,pagers:d,repliesExpander:k})}else{z=n<=m;y=z?t:t.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})});l=s.backward!=null?babelHelpers["extends"]({},s,{backward:babelHelpers["extends"]({},s.backward,{count:z?s.backward.count:Math.min(s.backward.count+1,p)})}):s;w=babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(v={},v[O]="HIDDEN",v))});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:y,newCommentsPage:w,pagers:l}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:y,newCommentsPage:w,pagers:l,repliesExpander:k})}case"RECEIVE_REALTIME_COMMENT":var X=a.args.commentID;A=Object.prototype.hasOwnProperty.call(c.newCommentsPage.visibleStates,X)||c.commentPages.some(function(a){return a.commentIDs.includes(X)});if(!b("UFI2ViewOption").isChronologicalOrder(c.viewOption)){b("recoverableViolation")("Unable to receive realtime comment for non chronological ordering mode "+((x=c.viewOption)!=null?x:"(null ordering mode)"),"ufi2");return c}if(A)return c;f=r.getCommentsCount({depth:a.args.depth,state:c})===0;u=q(c).length===0;e=!a.args.hideCommentInPager&&f&&c.__type==="DEPTH_1";W=a.args.hideCommentInPager||!c.expanded&&!e||!f&&!ba(c);d=W===!0&&!(u&&c.pagers.forward!=null);n=W&&!d;p={canViewerComment:c.canViewerComment,commentPages:c.commentPages.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})}),commentsByID:c.commentsByID,commentsHiddenByViewer:c.commentsHiddenByViewer,expanded:c.expanded||e,feedbackTargetID:c.feedbackTargetID,hasPaged:c.hasPaged,locallyComposedCommentIDs:c.locallyComposedCommentIDs,newCommentsPage:babelHelpers["extends"]({},c.newCommentsPage,{commentIDs:[X].concat(c.newCommentsPage.commentIDs),visibleStates:babelHelpers["extends"]({},c.newCommentsPage.visibleStates,(m={},m[X]=W?"HIDDEN":"VISIBLE",m))}),pagers:W?{backward:d?{__type:"PAGER",count:((p=(t=c.pagers)==null?void 0:(z=t.backward)==null?void 0:z.count)!=null?p:0)+1,direction:"backward",status:{error:(y=(s=c.pagers)==null?void 0:(v=s.backward)==null?void 0:v.status.error)!=null?y:null,pending:(k=(w=c.pagers)==null?void 0:(l=w.backward)==null?void 0:l.status.pending)!=null?k:!1}}:c.pagers.backward,forward:n?{__type:"PAGER",count:((f=(x=c.pagers)==null?void 0:(A=x.forward)==null?void 0:A.count)!=null?f:0)+1,direction:"forward",status:{error:(m=(u=c.pagers)==null?void 0:(e=u.forward)==null?void 0:e.status.error)!=null?m:null,pending:(z=(d=c.pagers)==null?void 0:(t=d.forward)==null?void 0:t.status.pending)!=null?z:!1}}:c.pagers.forward}:c.pagers,shouldComposerRenderWhenListIsExpanded:c.shouldComposerRenderWhenListIsExpanded,topLevelFeedbackTargetID:c.topLevelFeedbackTargetID,viewOption:c.viewOption};if(c.__type==="DEPTH_1"){return babelHelpers["extends"]({},c,p,{repliesCollapser:h({count:r.getVisibleCommentsCount({depth:a.args.depth,state:c})+(W?0:1),expanded:c.expanded,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies}),repliesExpander:i({error:(y=(s=c.repliesExpander)==null?void 0:(v=s.status)==null?void 0:v.error)!=null?y:null,expanded:c.expanded,isLoading:(k=(w=c.repliesExpander)==null?void 0:(l=w.status)==null?void 0:l.pending)!=null?k:!1,totalCount:a.args.totalCount})})}return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,p):c;case"RECEIVE_REFETCH_LIST":n=a.args.depth;x=c.feedbackTargetID;A=c.topLevelFeedbackTargetID;f=c.viewOption;if(n!==0)throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(!r.isListLoading({depth:n,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");u=aa.getInitialState({args:babelHelpers["extends"]({},a.args,{depth:0,feedbackTargetID:x,initiallyExpanded:!0,topLevelFeedbackTargetID:A,viewOption:f}),state:null});if(u.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");return babelHelpers["extends"]({},u,{__type:"DEPTH_0",expanded:c.expanded,status:{error:null,pending:!1}});case"REQUEST_COMMENTS_PAGE":e=a.args;m=e.depth;d=e.direction;t=e.pageSize;z=c.commentPages;W=c.expanded;s=c.newCommentsPage;v=c.pagers;if(!W)throw b("unrecoverableViolation")("Expected list to be expanded","ufi2");if(r.isPagerLoading({depth:m,direction:d,state:c}))throw b("unrecoverableViolation")("Cant request page if pager is loading","ufi2");if(m===0&&r.isListLoading({depth:m,state:c}))throw b("unrecoverableViolation")("Cant request page if list is loading","ufi2");if(m!==0&&r.isRepliesExpanderLoading({depth:m,state:c}))throw b("unrecoverableViolation")("Cant request page if replies expander is loading","ufi2");if(d==="backward"){y=z.findIndex(function(a){return a.state==="VISIBLE"});w=-1;if(y>-1){l=z[y];l.hasPrevious===!1&&b("FBLogger")("ufi2").mustfix("CometUFICommentList.updater(...): REQUEST_COMMENTS_PAGE - Can't request previous comments if there are no more comments available, feedbackID: %s",c.topLevelFeedbackTargetID);if(l.hasPrevious!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");w=y-1}else y===-1&&z.length>0&&(w=0);k=z[w];p=o(c)&&ca(c,"HIDDEN");if(k&&k.state==="HIDDEN"){n=[].concat(z);n[w]=babelHelpers["extends"]({},k,{state:"VISIBLE"});x=babelHelpers["extends"]({},v,{backward:g({count:k.beforeCount,direction:"backward",error:null,hasMore:k.hasPrevious,isLoading:!1,pageSize:t})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:n,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:x,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;f=r.getVisibleCommentsCount({depth:m,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:n,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:x,repliesCollapser:h({count:f+k.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:A}),shouldComposerRenderWhenListIsExpanded:!0})}else if(p){var ka={};s.commentIDs.forEach(function(a){ka[a]="VISIBLE"});u=babelHelpers["extends"]({},s,{visibleStates:ka});e=babelHelpers["extends"]({},v,{backward:null});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:u,pagers:e,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");W=a.args.minCountToShowCollapser;d=r.getVisibleCommentsCount({depth:m,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:u,pagers:e,repliesCollapser:h({count:d+u.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:W}),shouldComposerRenderWhenListIsExpanded:!0})}else{l=babelHelpers["extends"]({},v,{backward:babelHelpers["extends"]({},v.backward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:l}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:l})}}y=[].concat(z).reverse().findIndex(function(a){return a.state==="VISIBLE"});w=-1;if(y>-1){n=z.length-1-y;x=z[n];if(x.hasNext!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");w=n+1}else y===-1&&z.length>0&&(w=z.length-1);f=z[w];if(f&&f.state==="HIDDEN"){k=[].concat(z);k[w]=babelHelpers["extends"]({},f,{state:"VISIBLE"});A=babelHelpers["extends"]({},v,{forward:g({count:f.afterCount,direction:"forward",error:null,hasMore:f.hasNext,isLoading:!1,pageSize:t})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:k,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:A,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");p=a.args.minCountToShowCollapser;s=r.getVisibleCommentsCount({depth:m,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:k,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:A,repliesCollapser:h({count:s+f.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:p}),shouldComposerRenderWhenListIsExpanded:!0})}else{e=babelHelpers["extends"]({},v,{forward:babelHelpers["extends"]({},v.forward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:e}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:e})}case"REQUEST_REFETCH_LIST":d=a.args.depth;if(d!==0||c.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(r.isListLoading({depth:d,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[],expanded:!0,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:{backward:null,forward:null},status:{error:null,pending:!0}});case"SET_CAN_VIEWER_COMMENT":u=a.args.canViewerComment;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",canViewerComment:u}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",canViewerComment:u});case"SET_COMMENTS_BY_ID":W=a.args.commentsByID;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsByID:W}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsByID:W});case"SET_SERVER_COMMENT_ID":l=a.args;var Y=l.clientCommentID,Z=l.serverCommentID;x=c.commentPages;n=c.locallyComposedCommentIDs;y=c.newCommentsPage;z=y.commentIDs.indexOf(Y);w=z!==-1;t=x.some(function(a){return a.commentIDs.some(function(a){return a===Y})});if(!w&&!t)return c;m=y.commentIDs.some(function(a){return a===Z});k=x.filter(function(a){return a.state==="HIDDEN"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});A=x.filter(function(a){return a.state==="VISIBLE"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});s=c;if(k){f=x.map(function(a){var b=a.commentIDs.indexOf(Z);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});s.__type==="DEPTH_0"?s=babelHelpers["extends"]({},s,{__type:"DEPTH_0",commentPages:f}):s=babelHelpers["extends"]({},s,{__type:"DEPTH_1",commentPages:f})}if(m){p=n.filter(function(a){return a===Y});v=y.commentIDs.filter(function(a){return a!==Y});e=babelHelpers["extends"]({},y.visibleStates);delete e[Y];d=babelHelpers["extends"]({},y,{commentIDs:v,visibleStates:e});s.__type==="DEPTH_0"?s=babelHelpers["extends"]({},s,{__type:"DEPTH_0",locallyComposedCommentIDs:p,newCommentsPage:d}):s=babelHelpers["extends"]({},s,{__type:"DEPTH_1",locallyComposedCommentIDs:p,newCommentsPage:d})}if(w){u=babelHelpers["extends"]({},y.visibleStates);if(A||m){W=y.commentIDs.filter(function(a){return a!==Y});delete u[Y];l=babelHelpers["extends"]({},y,{commentIDs:W,visibleStates:u});s.__type==="DEPTH_0"?s=babelHelpers["extends"]({},s,{__type:"DEPTH_0",newCommentsPage:l}):s=babelHelpers["extends"]({},s,{__type:"DEPTH_1",newCommentsPage:l})}else{z=y.commentIDs.map(function(a){return a===Y?Z:a});u[Z]=u[Y];delete u[Y];k=babelHelpers["extends"]({},y,{commentIDs:z,visibleStates:u});s.__type==="DEPTH_0"?s=babelHelpers["extends"]({},s,{__type:"DEPTH_0",newCommentsPage:k}):s=babelHelpers["extends"]({},s,{__type:"DEPTH_1",newCommentsPage:k})}}if(t)if(A||m){f=x.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});s.__type==="DEPTH_0"?s=babelHelpers["extends"]({},s,{__type:"DEPTH_0",commentPages:f}):s=babelHelpers["extends"]({},s,{__type:"DEPTH_1",commentPages:f})}else{v=x.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),[Z],a.commentIDs.slice(b+1))})});s.__type==="DEPTH_0"?s=babelHelpers["extends"]({},s,{__type:"DEPTH_0",commentPages:v}):s=babelHelpers["extends"]({},s,{__type:"DEPTH_1",commentPages:v})}e=n.map(function(a){return a===Y?Z:a});return s.__type==="DEPTH_0"?babelHelpers["extends"]({},s,{__type:"DEPTH_0",locallyComposedCommentIDs:e}):babelHelpers["extends"]({},s,{__type:"DEPTH_1",locallyComposedCommentIDs:e});case"UNHIDE_COMMENTS":p=a.args.commentIDs;d=c.commentsHiddenByViewer;var $=babelHelpers["extends"]({},d);p.forEach(function(a){delete $[a]});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:$}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:$});case"INITIAL_STATE":default:a.__type;throw b("unrecoverableViolation")("CometUFICommentListState: Invalid action type: "+a.__type,"ufi2")}}function m(a,c){try{var d=k(a,c);return d}catch(f){d=b("ErrorNormalizeUtils").normalizeError(f);d=d.message;var e=a.__type==="REQUEST_COMMENTS_PAGE"||a.__type==="RECEIVE_COMMENTS_PAGE"?a.args.direction:"Unknown";b("FBLogger")("ufi2").catching(f).addMetadata("UFI","COMMENTS_LIST_ACTION",a.__type).addMetadata("UFI","COMMENTS_LIST_DEPTH",""+a.args.depth).addMetadata("UFI","COMMENTS_LIST_DIRECTION",e).mustfix("CometUFICommentListState.updater(...): "+d);b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&a.__type!=="SET_COMMENTS_BY_ID"&&console.groupEnd();if(!c)throw f;return c}}function a(a,b){return k(a,b)}function c(a,b){return k(a,b)}var aa={collapseList:function(a){var b=a.args;a=a.state;return m({__type:"COLLAPSE_LIST",args:b},a)},deleteComment:function(a){var b=a.args;a=a.state;return m({__type:"DELETE_COMMENT",args:b},a)},expandHiddenComments:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_HIDDEN_COMMENTS",args:b},a)},expandList:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_LIST",args:b},a)},getInitialState:function(a){var b=a.args;a=a.state;return m({__type:"INITIAL_STATE",args:b},a)},hideComments:function(a){var b=a.args;a=a.state;return m({__type:"HIDE_COMMENTS",args:b},a)},receiveCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_COMMENTS_PAGE",args:b},a)},receiveNewComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_NEW_COMMENT",args:b},a)},receiveRealtimeComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REALTIME_COMMENT",args:b},a)},receiveRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REFETCH_LIST",args:b},a)},requestCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_COMMENTS_PAGE",args:b},a)},requestRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_REFETCH_LIST",args:b},a)},setCanViewerComment:function(a){var b=a.args;a=a.state;return m({__type:"SET_CAN_VIEWER_COMMENT",args:b},a)},setCommentsByID:function(a){var b=a.args;a=a.state;return m({__type:"SET_COMMENTS_BY_ID",args:b},a)},setServerCommentID:function(a){var b=a.args;a=a.state;return m({__type:"SET_SERVER_COMMENT_ID",args:b},a)},unhideComments:function(a){var b=a.args;a=a.state;return m({__type:"UNHIDE_COMMENTS",args:b},a)}};function n(a){var b=a.direction;a=a.state;b=b==="forward"?[].concat(a.commentPages).reverse():a.commentPages;return b.find(function(a){return a.state==="VISIBLE"})}function o(a){var b=a.commentPages;a=a.newCommentsPage;b=b[0];return!b?a.commentIDs.length>0:b.beforeCount-a.commentIDs.length===0}function ba(a){var b=a.commentPages;b=b[0];return!b?o(a)&&p(a,"VISIBLE"):o(a)&&b.state==="VISIBLE"&&p(a,"VISIBLE")}function ca(a,b){var c=a.newCommentsPage;return c.commentIDs.some(function(a){return c.visibleStates[a]===b})}function p(a,b){var c=a.newCommentsPage;return c.commentIDs.every(function(a){return c.visibleStates[a]===b})}function q(a){var c=a.__type,d=a.commentPages,e=a.newCommentsPage;a=a.viewOption;c=c==="DEPTH_1"&&!b("UFI2ViewOption").isChronologicalOrder(a);a=d.filter(function(a){return a.state==="VISIBLE"}).reduce(function(a,b){return a.concat(b.commentIDs)},[]);d=e.commentIDs.filter(function(a){return e.visibleStates[a]==="VISIBLE"});return c?[].concat(a,d.reverse()):[].concat(d,a)}var r={canFetchInDirection:function(a){var b=a.depth,c=a.direction,d=a.state;a=a.totalCount;if(a===0)return!1;a=d.commentPages;var e=d.newCommentsPage,f=r.isPagerLoading({depth:b,direction:c,state:d});if(f)return!1;f=b===0&&r.isListLoading({depth:b,state:d});if(f)return!1;f=b!==0&&r.isRepliesExpanderLoading({depth:b,state:d});if(f)return!1;if(a.length===0&&c==="forward")return!0;else if(a.length===0&&c==="backward")return!1;f=a[0];a=a[a.length-1];b=r.getPagerCount({depth:b,direction:"backward",state:d});b=b===e.commentIDs.length&&p(d,"HIDDEN");return c==="backward"?f.state!=="HIDDEN"&&!b&&f.hasPrevious:a.state!=="HIDDEN"&&a.hasNext},getCommentsCount:function(a){a.depth;a=a.state;var b=a.commentPages;a=a.newCommentsPage;return a.commentIDs.concat(b.reduce(function(a,b){return a.concat(b.commentIDs)},[])).length},getCountForFetch:function(a){var c=a.depth,d=a.direction,e=a.pageSize;a=a.state;d=r.getPagerCount({depth:c,direction:d,state:a});if(d!=null)return d;if(c!==0){if(e==null)throw b("unrecoverableViolation")("CometUFICommentListState.getCountForFetch(...): Expected pageSize to compute fetch count for expanding replies","ufi2");d=r.getRepliesExpanderCount({depth:c,state:a});if(d!=null)return Math.min(d,e)}return null},getHiddenStateForComment:function(a){var b=a.commentID;a.depth;a=a.state;a=a.commentsHiddenByViewer;return a[b]||null},getPagerCount:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.count:null},getPagerError:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.status.error:null},getRepliesCollapserCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesCollapser;return b!=null?b.count:null},getRepliesExpanderCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.count:null},getRepliesExpanderError:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.status.error:null},getVisibleComments:function(a){a.depth;a=a.state;var c=a.commentsByID,d=a.locallyComposedCommentIDs,e=a.newCommentsPage,f=a.viewOption;a=q(a);var g=a.map(function(a){var d=c[a];if(!d){b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find comment locally: %s",a);return null}return d}).filter(Boolean);a.length>0&&g.length===0&&b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find ANY of the %s comments locally",a.length);return!d.length&&e.commentIDs.length>0&&!(b("gkx")("1098171")&&!b("UFI2ViewOption").isChronologicalOrder(f))?g.sort(function(a,b){return((b=b.created_time)!=null?b:0)-((b=a.created_time)!=null?b:0)}):g},getVisibleCommentsCount:function(a){a.depth;a=a.state;return q(a).length},getVisibleCommentsGroupedByCollapsedState:function(a){var b=a.depth,c=a.reverse,d=a.shouldCollapseComment;a=a.state;b=r.getVisibleComments({depth:b,state:a});a=c?b.slice().reverse():b;return a.reduce(function(a,b){var c=d(b)?"COLLAPSED":"VISIBLE";if(a.length===0)return[{comments:[b],state:c}];var e=a[a.length-1],f=e.comments[e.comments.length-1];if(!f)return a;f=e.state;if(f===c){e.comments.push(b);return a}return[].concat(a,[{comments:[b],state:c}])},[])},getVisibleCommentsWithHiddenCommentsCollapsed:function(a){var b=a.depth,c=a.reverse,d=a.state;return r.getVisibleCommentsGroupedByCollapsedState({depth:b,reverse:c,shouldCollapseComment:function(a){return r.getHiddenStateForComment({commentID:a.id,depth:b,state:d})==="COLLAPSED"},state:d})},hasLastPageLeftInDirection:function(a){a.depth;var b=a.direction,c=a.pageSize,d=a.state;a=a.totalCount;d=n({direction:b,state:d});if(!d)return b==="forward"?a<=c:!1;return b==="forward"?d.afterCount<=c:d.beforeCount<=c},hasMoreInDirection:function(a){a.depth;var b=a.direction,c=a.state;a=a.totalCount;c=n({direction:b,state:c});if(!c)return b==="forward"?a>0:!1;return b==="forward"?c.hasNext:c.hasPrevious},hasPagedInDirection:function(a){a.depth;var b=a.direction;a=a.state;a=a.hasPaged;return a[b]},hasVisibleComments:function(a){var b=a.depth;a=a.state;return r.getVisibleComments({depth:b,state:a}).length>0},isComposerVisible:function(a){a.depth;a=a.state;return a.canViewerComment&&a.expanded&&a.shouldComposerRenderWhenListIsExpanded},isListExpanded:function(a){a.depth;a=a.state;return a.expanded},isListLoading:function(a){var b=a.depth;a=a.state;return b!==0||a.__type!=="DEPTH_0"?!1:a.status.pending},isPagerLoading:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null?a.status.pending:!1},isPagerVisible:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null},isRepliesCollapserVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesCollapser;return b!=null},isRepliesExpanderLoading:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null?b.status.pending:!1},isRepliesExpanderVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null},pagerHasRealtimeComments:function(a){var b=a.direction;a=a.state;var c=Object.values(a.newCommentsPage.visibleStates).find(function(a){return a==="HIDDEN"})!=null;return b==="forward"?a.pagers.backward==null?c:!1:c}};e.exports={_updaterDepth0_DO_NOT_USE:a,_updaterDepth1_DO_NOT_USE:c,Selectors:r,StateUpdaters:aa}}),null);
__d("CometUFICommentListGetDerivedStateFromProps",["CometUFICommentListState","UFI2CommentsConfig","UserActivity","gkx","nullthrows","recoverableViolation","UFI2UserActivityIdleTimeout"],(function(a,b,c,d,e,f){"use strict";var g=b("CometUFICommentListState").Selectors,h=b("CometUFICommentListState").StateUpdaters;function i(a){var b=a.depth,c=a.feedback;a=a.topLevelFeedback;return b===0?Boolean(c.can_viewer_comment):a!=null&&a.can_viewer_comment===!0&&c!=null&&c.can_viewer_comment===!0}function a(a,c){var d=c.listState;c=c.mirroredProps;if(c===a)return{listState:d,mirroredProps:c};var e=c.connectionGeneration,f=c.feedback,k=c.isRefetchingConnection,l=c.topLevelFeedback;c=c.totalCount;var m=a.commentIDs,n=a.commentsByID,o=a.connectionGeneration,p=a.connectionPageInfo,q=a.depth,r=a.feedback,s=a.hiddenCommentIDs,t=a.isRefetchingConnection,u=a.shouldRenderComposerPreemptively,v=a.topLevelFeedback,w=a.totalCount,x=a,y=p.afterCount,z=p.beforeCount,A=p.hasNext,B=p.hasPrevious;p=p.pageSize;var C=d;C=h.setCommentsByID({args:{commentsByID:n,depth:q},state:C});if(q===0&&g.isListLoading({depth:q,state:C})){k=k===!0&&t===!1;k&&(C=h.receiveRefetchList({args:{afterCount:y,beforeCount:z,canViewerComment:i({depth:q,feedback:r,topLevelFeedback:v}),commentIDs:m,commentsByID:n,depth:q,hasNext:A,hasPrevious:B,hiddenCommentIDs:s,pageSize:p,shouldRenderComposerPreemptively:u,totalCount:w},state:C}));return{listState:C,mirroredProps:x}}if(o>e){C=j(x,d,d.isListVisible);return{listState:C,mirroredProps:x}}t=a.commentIDsUpdatedToServerIDs;k=a.newlyCreatedCommentIDs;y=a.newlyHiddenCommentIDs;z=a.newlyUnhiddenCommentIDs;m=a.removedCommentIDs;A=i({depth:q,feedback:f,topLevelFeedback:l});B=i({depth:q,feedback:r,topLevelFeedback:v});t.length>0&&t.forEach(function(a){var b=a.clientID;a=a.serverID;C=h.setServerCommentID({args:{clientCommentID:b,depth:q,serverCommentID:a},state:C})});A!==B&&(C=h.setCanViewerComment({args:{canViewerComment:B,depth:q},state:C}));y.length>0&&(C=h.hideComments({args:{commentIDs:y,depth:q},state:C}));z.length>0&&(C=h.unhideComments({args:{commentIDs:z,depth:q},state:C}));if(k.length>0){s=a.connectionPageInfo.pageSize;for(var p=k.length-1;p>=0;p--){u=k[p];if(b("gkx")("1290534")){o=n[u];if(o==null){b("recoverableViolation")("Unable to find comment for Comment ID "+u+', falling back to old "RECEIVE_NEW_COMMENT" implementation',"ufi2");continue}if(o.is_created_from_subscription===!0){C=h.receiveRealtimeComment({args:{commentID:u,depth:q,hideCommentInPager:!b("UserActivity").isActive(b("UFI2UserActivityIdleTimeout"))||!(((e=C)==null?void 0:e.isListVisible)!=null?C.isListVisible():!1),totalCount:w},state:C});continue}}q===0?C=h.receiveNewComment({args:{commentID:u,depth:q,pageSize:s,prevTotalCount:c,totalCount:w},state:C}):C=h.receiveNewComment({args:{commentID:u,depth:q,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:s,prevTotalCount:c,totalCount:w},state:C})}}else m.length>0&&m.forEach(function(a){q===0?C=h.deleteComment({args:{commentID:a,depth:q},state:C}):C=h.deleteComment({args:{commentID:a,depth:q,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies},state:C})});return{listState:C,mirroredProps:x}}function j(a,c,d){var e=a.commentIDs,f=a.commentsByID,g=a.connectionPageInfo,j=g.afterCount,k=g.beforeCount,l=g.hasNext,m=g.hasPrevious;g=g.pageSize;var n=a.depth,o=a.feedback,p=a.hiddenCommentIDs,q=a.isInitiallyExpanded,r=a.shouldRenderComposerPreemptively,s=a.topLevelFeedback,t=a.totalCount;a=a.viewOption;var u=i({depth:n,feedback:o,topLevelFeedback:s});k={afterCount:j,beforeCount:k,canViewerComment:u,commentIDs:e,commentsByID:f,feedbackTargetID:b("nullthrows")(o.id),hasNext:l,hasPrevious:m,hiddenCommentIDs:p,initiallyExpanded:q,isListVisible:d,pageSize:g,shouldRenderComposerPreemptively:r,topLevelFeedbackTargetID:(j=s==null?void 0:s.id)!=null?j:b("nullthrows")(o.id),totalCount:t,viewOption:a};return n===0?h.getInitialState({args:babelHelpers["extends"]({},k,{depth:0}),state:(u=c)!=null?u:null}):h.getInitialState({args:babelHelpers["extends"]({},k,{depth:1,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies}),state:(e=c)!=null?e:null})}e.exports={getCanViewerComment:i,getDerivedStateFromProps:a,getInitialState:j}}),null);
__d("CometUFICommentListVisibilityContext",["React","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a=b("React");c={onCommentListHidden:b("emptyFunction"),onCommentListVisible:b("emptyFunction")};e.exports=a.createContext(c)}),null);
__d("CometUFICommentsProviderState",["FBLogger","gkx","isUFI2ClientID"],(function(a,b,c,d,e,f){"use strict";function g(a){return a!=null&&(a.is_locally_composed===!0||a.is_created_from_subscription===!0||a.optimistic_error!=null||a.optimistic_action!=null)}function h(a){return!a||a.spam_display_mode==null?!1:(a==null?void 0:a.spam_display_mode)!=="none"}function a(a){a=(a=a.feedback.display_comments)==null?void 0:a.before_count;return typeof a==="number"?a:null}function i(a){return a.filter(function(a){return b("isUFI2ClientID")(a)})}function j(a){var c={};a=a?a.map(function(a){if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null edge from comments connection.");return null}a=a.node;if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null comment from comments connection.");return null}if(a.id!=null){var d=a.id;c[d]=a;return d}else{b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received comment with null id from comments connection.");return null}}).filter(Boolean):[];if(a.length>Object.keys(c).length){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received duplicate comments from comments connection");var d=new Set();return{commentIDs:a.filter(function(a){if(d.has(a))return!1;d.add(a);return!0}),commentsByID:c}}return{commentIDs:a,commentsByID:c}}function k(a,c){var d=Object.keys(a),e=Object.keys(c),f=d.length,g=e.length;if(g>=f)return[];e.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})||b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Expected next comments to be a subset of previous comments when removing a comment");g=d.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)});return g}function l(a,c,d,e){var f=[];d=a.filter(function(a){return!b("isUFI2ClientID")(a)});var g=function(){if(i){if(j>=h.length)return"break";a=h[j++]}else{j=h.next();if(j.done)return"break";a=j.value}var b=a,d=e[b],g=d&&d.client_id!=null?d.client_id:null;g!=null&&c.find(function(a){return a===g})&&f.push({clientID:g,serverID:b})};for(var h=d,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){d=g();if(d==="break")break}return f}function m(a,c,d){if(d.length<=c.length)return[];var e=a[d[0]];if(!e){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getNewlyCreatedCommentIDs(...): Next most recent comment not found");return[]}e=c.filter(function(b){return g(a[b])});c=d.filter(function(b){return g(a[b])});d=c.length-e.length>0;if(!d)return[];if(e.length===0)return c;var f=new Set(e);return c.filter(function(a){return!f.has(a)})}function n(a,b){return b.filter(function(b){b=a[b];return b!=null&&h(b)})}function o(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!1&&h(c)===!0})}function p(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!0&&h(c)===!1})}function c(a,c){var d=a.depth,e=c.commentsByID,f=c.commentIDs;a=j(a.edges);var g=a.commentIDs;a=a.commentsByID;var h=f.length,q=c.clientCommentIDs,r=g.length,s=i(g),t=c.selectedViewOption;c=c.isRefetchingConnection;var u=n(a,g),v=o(e,a,g),w=p(e,a,g);q=l(g,q,s,a);var x=r>h;h=h>r;r=x?m(a,f,g):[];x=h&&!c;f=x?k(e,a):[];h={clientCommentIDs:s,commentIDs:g,commentIDsUpdatedToServerIDs:q,commentsByID:a,hiddenCommentIDs:u,isRefetchingConnection:c,newlyCreatedCommentIDs:r,newlyHiddenCommentIDs:v,newlyUnhiddenCommentIDs:w,removedCommentIDs:f,selectedViewOption:t};b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&(console.groupCollapsed("%cUFI2 Relay Comments Connection Update at depth "+d+":",";background-color:#75DBCD;color:#1F2D3D;opacity:0.7;font-weight:bold;"),console.groupEnd());return h}function d(a){a=a.edges;a=j(a);var b=a.commentIDs;a=a.commentsByID;var c=i(b),d=n(a,b);return{clientCommentIDs:c,commentIDs:b,commentIDsUpdatedToServerIDs:[],commentsByID:a,hiddenCommentIDs:d,isRefetchingConnection:!1,newlyCreatedCommentIDs:[],newlyHiddenCommentIDs:[],newlyUnhiddenCommentIDs:[],removedCommentIDs:[],selectedViewOption:null}}e.exports={getBeforeCount:a,getClientCommentIDs:i,getCommentIDsUpdatedToServerIDs:l,getCommentsFromEdges:j,getDerivedStateFromProps:c,getHiddenCommentIDs:n,getInitialState:d,getNewlyCreatedCommentIDs:m,getNewlyHiddenCommentIDs:o,getNewlyUnhiddenCommentIDs:p,getRemovedCommentIDs:k}}),null);
__d("CometUFICommentsProvider.react",["requireDeferred","CometRelay","CometUFICommentsProviderState","FBLogger","React","RelayModern","RelayUFI2CommentsKeyContext","SiteData","UFI2Config","UFI2RealtimeContainer.react","UFI2RelayConnectionRenderer.react","gkx","relay-runtime","unrecoverableViolation","CometUFICommentsProvider_displayCommentsMetadata.graphql","CometUFICommentsProvider_displayCommentsHighlightedComments.graphql","CometUFICommentsProviderPaginationQuery.graphql","CometUFICommentsProviderReadCommentsPageQuery.graphql","CometUFICommentsProvider_feedback.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j,k;b("CometRelay").graphql;var l=b("CometRelay").readInlineData;c=b("CometUFICommentsProviderState").getDerivedStateFromProps;var m=b("CometUFICommentsProviderState").getInitialState,n=b("requireDeferred")("CometUFICreateCommentSubscription"),o=b("React");d=b("RelayModern").createRefetchContainer;var p=b("SiteData").pr,q=b("relay-runtime").createOperationDescriptor,r=b("relay-runtime").getRequest,s=50,t=function(c){babelHelpers.inheritsLoose(a,c);function a(a){var d;d=c.call(this,a)||this;d.state=m({edges:d.props.edges,feedback:d.props.feedback});d.$1=function(a){var c=a.count,e=a.direction,f=a.onCommentsFetched;a=d.props;var g=a.depth,h=a.displayCommentsContext,i=a.feedback,j=a.feedbackSource,k=a.feedLocation,l=a.focusCommentID,m=a.isLoadingNext,n=a.isLoadingPrevious,o=a.loadNext,q=a.loadPrevious,r=a.topLevelViewOption;a=a.useDefaultActor;var s=d.state.selectedViewOption;i=i.id;if(!i){b("FBLogger")("ufi2").mustfix("CometUFICommentsProvider: Cant fetch without a feedback id");return}if(e==="forward"&&m)return;if(e==="backward"&&n)return;m={containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1,displayCommentsContextEnableComment:h==null?void 0:h.enableComment,displayCommentsContextIsAdPreview:h==null?void 0:h.isAdPreview,displayCommentsContextIsAggregatedShare:h==null?void 0:h.isAggregatedShare,displayCommentsContextIsStorySet:h==null?void 0:h.isStorySet,displayCommentsFeedbackContext:h==null?void 0:h.feedbackContext,feedLocation:k,feedbackID:i,feedbackSource:j,focusCommentID:l,includeHighlightedComments:!1,includeNestedComments:g===0,isComet:!0,isInitialFetch:!1,scale:p,topLevelViewOption:r,useDefaultActor:a,viewOption:s};if(e==="backward")q(c,{onLoaded:function(a){var b=a.error;a=a.variables;return d.$2({direction:e,error:b,onCommentsFetched:f,variables:a})},queryVariables:m});else if(e==="forward")o(c,{onLoaded:function(a){var b=a.error;a=a.variables;return d.$2({direction:e,error:b,onCommentsFetched:f,variables:a})},queryVariables:m});else throw b("unrecoverableViolation")("CometUFICommentsProvider: Invalid direction","ufi2")};d.$3=function(a){var c=d.state.commentsByID[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Could not find requested comment locally: %s",a);return null}return c};d.$5=function(a){var c=a.onComplete;a=a.queryVariables;var e=d.props,f=e.depth,g=e.displayCommentsContext,h=e.feedback,i=e.feedbackSource,j=e.feedLocation,k=e.focusCommentID,l=e.relay,m=e.topLevelViewOption;e=e.useDefaultActor;var n=d.state.selectedViewOption;h=h.id;if(!h){b("FBLogger")("ufi2").mustfix("CometUFICommentsProvider: Cant refetch without a feedback id");return}var o=babelHelpers["extends"]({containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1,displayCommentsContextEnableComment:g==null?void 0:g.enableComment,displayCommentsContextIsAdPreview:g==null?void 0:g.isAdPreview,displayCommentsContextIsAggregatedShare:g==null?void 0:g.isAggregatedShare,displayCommentsContextIsStorySet:g==null?void 0:g.isStorySet,displayCommentsFeedbackContext:g==null?void 0:g.feedbackContext,feedLocation:j,feedbackID:h,feedbackSource:i,focusCommentID:k,includeHighlightedComments:f>0&&((a==null?void 0:a.isPaginating)==null||(a==null?void 0:a.isPaginating)===!1),includeNestedComments:!0,isComet:!0,isInitialFetch:!1,scale:p,topLevelViewOption:m,useDefaultActor:e,viewOption:n},a);d.setState({isRefetchingConnection:!0},function(){l.refetch(function(a){return babelHelpers["extends"]({},a,o)},null,function(a){return d.$4(a||null,c)})})};d.$6=function(a){var b=a.onComplete;a=a.viewOption;d.setState({selectedViewOption:a},function(){d.$5({onComplete:b,queryVariables:{isPaginating:!1}})})};d.$7=function(){var a=d.props,c=a.commentsKey,e=a.depth,f=a.feedback,g=a.feedbackSource,h=a.feedLocation,i=a.focusCommentID,j=a.onNext,k=a.relay,l=a.useDefaultActor;if(b("gkx")("1352852")&&(g===1||g===69))return null;var m=f.id,o=f.subscription_target_id;if(e===1||!m||!o)return null;var p=!1,q={dispose:function(){p=!0}};n.load().then(function(a){if(p)return;q.dispose=a.subscribe({commentsKey:c,containerMapping:{containerIsFeedStory:!0,containerIsLiveStory:!1,containerIsTahoe:!1,containerIsWorkplace:!1},environment:k.environment,feedLocation:h,feedbackSource:g,focusCommentID:i,isComet:!0,onNext:j,subscriptionTargetID:o,topLevelFeedbackTargetID:m,useDefaultActor:l}).dispose})["catch"](function(a){return b("FBLogger")("ufi2").catching(a).mustfix("Error subscribing to CometUFICreateCommentSubscription, this is probably because the arguments didn't line up with what we're expected or someone has been tinkering with its implementation")});return q};return d}var d=a.prototype;d.$2=function(a){var b=a.direction,c=a.error,d=a.onCommentsFetched;a=a.variables;if(c){d&&d({commentIDs:[],direction:b,error:c});return}c=this.props.relay.environment;var e=r(v);e=q(e,a);a=c.lookup(e.fragment).data;c=(a=a==null?void 0:(c=a.feedback)==null?void 0:(e=c.display_comments)==null?void 0:e.edges)!=null?a:[];e=c.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.id}).filter(Boolean);d&&d({commentIDs:e||[],direction:b,error:null})};d.$4=function(a,b){this.setState({isRefetchingConnection:!1},function(){b&&b(a)})};d.render=function(){var a,c,d,e=this.props,f=e.children,i=e.depth,j=e.feedback,k=e.hasNext,m=e.hasPrevious,n=e.isLoadingNext;e=e.isLoadingPrevious;var p=this.state,q=p.commentIDs,r=p.commentIDsUpdatedToServerIDs,t=p.commentsByID,u=p.hiddenCommentIDs,v=p.isRefetchingConnection,w=p.newlyCreatedCommentIDs,x=p.newlyHiddenCommentIDs,y=p.newlyUnhiddenCommentIDs,z=p.removedCommentIDs;p=p.selectedViewOption;var A=l(g!==void 0?g:g=b("CometUFICommentsProvider_displayCommentsMetadata.graphql"),j.display_comments);a=Math.ceil(((a=A==null?void 0:A.page_size)!=null?a:s)*(i>0?b("UFI2Config").legacyReplyFetchShortfallSimulationFactor:b("UFI2Config").legacyTopLevelFetchShortfallSimulationFactor));c=(c=A==null?void 0:A.ufi2_connection_generation)!=null?c:0;d={afterCount:(d=(d=j.display_comments)==null?void 0:d.after_count)!=null?d:0,beforeCount:(d=(d=j.display_comments)==null?void 0:d.before_count)!=null?d:0,hasNext:k,hasPrevious:m,pageSize:a};k=null;try{m=l(h!==void 0?h:h=b("CometUFICommentsProvider_displayCommentsHighlightedComments.graphql"),j.display_comments);k=(a=m==null?void 0:m.highlighted_comments)!=null?a:[]}catch(a){}m=(A==null?void 0:A.is_initially_expanded)===!0;a=(j=(a=j.display_comments)==null?void 0:a.count)!=null?j:0;j=(A==null?void 0:A.comment_order)||p;p=(p=A==null?void 0:A.reply_comment_order)!=null?p:null;return o.jsx(b("UFI2RealtimeContainer.react"),{subscribe:this.$7,children:f({commentIDs:q,commentIDsUpdatedToServerIDs:r,commentsByID:t,connectionGeneration:c,connectionPageInfo:d,fetchComments:this.$1,getComment:this.$3,hiddenCommentIDs:u,highlightedComments:k,isFetchingNextComments:n,isFetchingPreviousComments:e,isInitiallyExpanded:m,isRefetchingConnection:v,newlyCreatedCommentIDs:w,newlyHiddenCommentIDs:x,newlyUnhiddenCommentIDs:y,refetchConnection:this.$5,removedCommentIDs:z,replyViewOption:p,setViewOption:this.$6,shouldRenderComposerPreemptively:(f=A==null?void 0:A.should_render_composer_preemptively)!=null?f:i===0,totalCount:a,viewOption:j})})};return a}(o.PureComponent);t.displayName="CometUFICommentsProviderInternal";t.getDerivedStateFromProps=c;function a(a){var c=a.feedback.display_comments;if(!c){var d;return(d=a.fallback)!=null?d:null}return o.jsx(b("RelayUFI2CommentsKeyContext").Consumer,{children:function(d){return o.jsx(b("UFI2RelayConnectionRenderer.react"),{commentsKey:d,connection:c,paginationQuery:u,children:function(b){return o.jsx(t,babelHelpers["extends"]({commentsKey:d,depth:0},a,b))}})}})}var u=i!==void 0?i:i=b("CometUFICommentsProviderPaginationQuery.graphql"),v=j!==void 0?j:j=b("CometUFICommentsProviderReadCommentsPageQuery.graphql");e.exports=d(a,{feedback:k!==void 0?k:k=b("CometUFICommentsProvider_feedback.graphql")},u)}),null);
__d("CometUFICommentList.react",["fbt","CometRelay","CometUFICommentListGetDerivedStateFromProps","CometUFICommentListState","CometUFICommentListVisibilityContext","CometUFICommentsProvider.react","FBLogger","React","SearchableEntry","SubscriptionsHandler","UFI2CommentsConfig","debounce","emptyFunction","recoverableViolation","scrollIntoView","unrecoverableViolation","CometUFICommentList_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("CometRelay").useRelayEnvironment,k=b("CometUFICommentListGetDerivedStateFromProps").getCanViewerComment;c=b("CometUFICommentListGetDerivedStateFromProps").getDerivedStateFromProps;var l=b("CometUFICommentListGetDerivedStateFromProps").getInitialState,m=b("CometUFICommentListState").Selectors,n=b("CometUFICommentListState").StateUpdaters,o=b("React");function p(a,b){return(a=a.comment_composer_placeholder)!=null?a:b>0?g._("Write a reply\u2026"):g._("Write a comment\u2026")}var q=function(c){babelHelpers.inheritsLoose(a,c);function a(a){var d;d=c.call(this,a)||this;d.$3=!1;d.$4=function(){return d.$3};d.$5=function(){d.$3=!0};d.$6=function(){d.$3=!1};d.state={listState:l(d.props,void 0,d.$4),mirroredProps:d.props};d.$10=null;d.$11=null;d.$12=new Map();d.$9=[];d.$13={};d.$14=!1;d.$15=!1;d.$16=!1;d.$17=!1;d.$8=new(b("SubscriptionsHandler"))();d.$18=null;d.$21=function(a){d.$9.indexOf(a)<0&&d.$9.push(a)};d.$22=function(a){d.$9=d.$9.map(function(b){return b===a?null:b}).filter(Boolean)};d.$23=function(){var a=d.props,b=a.depth,c=a.totalCount;d.$24(function(a){return n.collapseList({args:{depth:b,totalCount:c},state:a})})};d.$25=function(a){var c=a.focusComposer,e=a.scrollToComposer;a=a.scrollToNode;var f=d.props,g=f.connectionPageInfo.pageSize,h=f.depth,i=f.fetchComments,j=f.refetchConnection,k=f.totalCount;c&&(d.$14=!0);e===!0&&(d.$15=!0);a!=null&&(d.$18=a);d.$19();var l=!1;d.$24(function(a){var c=h===0&&m.isListLoading({depth:h,state:a})||h!==0&&m.isRepliesExpanderLoading({depth:h,state:a});if(c)return null;c=h===0?n.expandList({args:{depth:h,totalCount:k},state:a}):n.expandList({args:{depth:h,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,totalCount:k},state:a});if(h===0){a=m.isListLoading({depth:h,state:c});l=a;return c}a=m.isRepliesExpanderLoading({depth:h,state:c});l=a;return c},function(a){if(!l)return;if(h===0){j({});return}a=m.getCountForFetch({depth:h,direction:"forward",pageSize:g,state:a});if(a==null)return;i({count:a,direction:"forward",onCommentsFetched:d.$26})})};d.$27=function(a){var b=d.props.depth;d.$24(function(c){return n.expandHiddenComments({args:{commentIDs:a,depth:b},state:c})})};d.$28=function(){var a=d.props,c=a.depth,e=a.feedback,f=a.feedbackSource,g=a.feedLocation,h=a.focusCommentID;a=a.useDefaultActor;if(e.id==null)throw b("unrecoverableViolation")("CometUFICommentList: Expected feedback to have an id","ufi2");return{feedLocation:g,feedback:e,feedbackSource:f,feedbackTargetID:e.id,focusCommentID:h,placeholder:p(e,c),useDefaultActor:a}};d.$29=function(a){var b=d.props,c=b.depth,e=b.environment,f=b.feedback,g=b.feedbackSource,h=b.topLevelFeedback,i=b.totalCount;b=b.useDefaultActor;h=h==null?void 0:h.id;a={Selectors:m,comment:a,depth:c,environment:e,feedback:f,feedbackSource:g,onDeeplinkToComment:d.$30,onReplyToComment:d.$31,totalCount:i,useDefaultActor:b};return h==null?a:babelHelpers["extends"]({},a,{topLevelFeedbackID:h})};d.$32=function(){var a=d.props,b=a.commentParent,c=a.depth,e=a.feedback,f=a.feedbackSource,g=a.feedLocation,h=a.focusCommentID,i=a.topLevelFeedback;a=a.useDefaultActor;i=i==null?void 0:i.id;b={commentParent:b,componentRef:c===0?d.$33:d.$34,feedLocation:g,feedback:e,feedbackSource:f,focusCommentID:h,placeholder:p(e,c),useDefaultActor:a};return i==null?b:babelHelpers["extends"]({},b,{topLevelFeedbackID:i})};d.$36=function(){return d.$35("forward")};d.$37=function(){return d.$35("backward")};d.$38=function(){var a=d.props,b=a.depth,c=a.environment;a=a.totalCount;var e=d.state.listState;return{Selectors:m,depth:b,environment:c,expandHiddenComments:d.$27,listState:e,totalCount:a}};d.$39=function(a){var c=d.props,e=c.depth,f=c.displayCommentsContext,g=c.feedback,h=c.feedbackSource,i=c.feedLocation,j=c.focusCommentID,k=c.getComment,l=c.useDefaultActor;c=c.viewOption;k=k(a);var m=k&&k.feedback,n=function(b){d.$13[a]=b,d.$40()};if(m==null)throw b("unrecoverableViolation")("CometUFICommentList: Expected comment to have a `feedback` in order to render a replies list.","ufi2");return{commentParent:k,depth:e+1,displayCommentsContext:f,feedLocation:i,feedback:m,feedbackSource:h,focusCommentID:j,listRef:n,topLevelFeedback:g,topLevelViewOption:c,useDefaultActor:l}};d.$45=function(){return d.$41("forward")};d.$46=function(){return d.$41("backward")};d.$47=function(){var a=d.props,b=a.connectionPageInfo.pageSize,c=a.depth,e=a.environment;a=a.totalCount;var f=d.state.listState;return{Selectors:m,depth:c,environment:e,listState:f,pageSize:b,totalCount:a}};d.$48=function(){var a=d.props,c=a.depth,e=a.environment;a=a.totalCount;var f=d.state.listState;if(c===0)throw b("unrecoverableViolation")("CometUFICommentList: Expected a replies list to get replies collapser props","ufi2");return{Selectors:m,collapseList:d.$23,depth:c,environment:e,listState:f,totalCount:a}};d.$49=function(){var a=d.props,c=a.depth,e=a.environment,f=a.highlightedComments,g=a.totalCount;a=a.viewOption;var h=d.state.listState;if(c===0)throw b("unrecoverableViolation")("CometUFICommentList: Expected a replies list to get replies expander props","ufi2");return{Selectors:m,depth:c,environment:e,expandList:d.$25,highlightedComments:f,listState:h,onMouseEnter:function(){return d.$44("forward")},totalCount:g,viewOption:a}};d.$26=function(a){var c=a.commentIDs,e=a.direction;a=a.error;if(a)return;a=d.props;var f=a.connectionPageInfo,g=a.depth,h=a.feedback,i=a.hiddenCommentIDs,j=a.totalCount,k=f.afterCount,l=f.beforeCount,m=f.hasNext,o=f.hasPrevious,p=f.pageSize,q=h.id;if(q==null)throw b("unrecoverableViolation")("CometUFICommentList: Expected feedback to have an id","ufi2");var r=!1;d.$24(function(a){r=!0;if(g===0)if(e==="backward")return n.receiveCommentsPage({args:{beforeCount:l,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasPrevious:o,hiddenCommentIDs:i,pageSize:p,totalCount:j},state:a});else return n.receiveCommentsPage({args:{afterCount:k,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasNext:m,hiddenCommentIDs:i,pageSize:p,totalCount:j},state:a});else if(e==="backward")return n.receiveCommentsPage({args:{beforeCount:l,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasPrevious:o,hiddenCommentIDs:i,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:p,totalCount:j},state:a});else return n.receiveCommentsPage({args:{afterCount:k,commentIDs:c,depth:g,direction:e,feedbackTargetID:q,hasNext:m,hiddenCommentIDs:i,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:p,totalCount:j},state:a})},function(a){r&&d.$50(e)})};d.$51=function(){d.$2()};d.$52=function(){d.$2.reset()};d.$33=function(a){d.$10=a,d.$19()};d.$34=function(a){d.$33(a);if(a&&d.$11){var b=d.$11;d.$11=null;d.$53(b,a)}a&&d.$17&&(d.$54(d.$1),d.$1=void 0,d.$17=!1);a&&d.$16&&(d.$55(),d.$16=!1)};d.$31=function(a){var b=a.authorId,c=a.authorIsWeakReference,e=a.authorName,f=a.authorType,g=a.commentComposerPlaceholderText;a=a.commentId;var h=d.props,i=h.depth,j=h.feedback,l=h.getComment;h=h.topLevelFeedback;if(k({depth:i,feedback:j,topLevelFeedback:h})===!1)return;var m=l(a);m!=null&&d.$9.forEach(function(a){return a(m)});if(i!==0){d.$11=null;if(b!==((h=j.viewer_actor)==null?void 0:h.id)){l=d.$10;h={authorId:b,authorIsWeakReference:c,authorName:e,authorType:f};l?d.$53(h,l):d.$11=h}}if(i===0){b=d.$13[a];b!=null&&(b.$54(void 0),b.$55())}else d.$54({commentComposerPlaceholderText:g,id:a}),d.$55();d.$30({canViewerComment:j.can_viewer_comment!==!1,commentId:a,scrollToComposer:!0,scrollToNode:void 0})};d.$56=function(a){a=d.$13[a.id];return a!=null?m.isComposerVisible({depth:a.props.depth,state:a.state.listState}):!1};d.$57=function(a){a=d.$13[a.id];return a!=null?a.props.totalCount:0};d.$58=[];d.$59=new Map();d.$30=function(a){var b=a.canViewerComment,c=a.commentId,e=a.scrollToComposer;a=a.scrollToNode;var f=d.props,g=f.depth,h=f.feedback;f=f.topLevelFeedback;h=k({depth:g,feedback:h,topLevelFeedback:f});if(!h)return;f=!0;a!=null&&(d.$59.has(c)&&(f=!1),d.$59.set(c,!0));if(g===0)if(b){h=c;a!=null&&(d.$58=d.$58.map(function(a){a=a.commentID;return{commentID:a,scrollToComposer:!1,scrollToNode:null}}));d.$58.push({commentID:h,scrollToComposer:!!e,scrollToNode:f?a:null});d.$40()}else{g=d.$10;g&&g.focus()}else d.$25({focusComposer:!0,scrollToComposer:e,scrollToNode:f?a:null})};d.$42=function(a){a=a?a.onCommentsRendered:void 0;d.$60("forward",a)};d.$43=function(a){a=a?a.onCommentsRendered:void 0;d.$60("backward",a)};d.$61=function(a){var b=a.onComplete,c=a.viewOption;a=d.props;var e=a.depth,f=a.setViewOption;if(e!==0){b&&b(null);return}var g=!1;d.$24(function(a){if(m.isListLoading({depth:e,state:a}))return null;g=!0;return n.requestRefetchList({args:{depth:e},state:a})},function(a){g?f({onComplete:b,viewOption:c}):b&&b(null)})};d.$62=function(a){a=a.focusComposer;var b=d.props,c=b.depth;b=b.totalCount;var e=d.state.listState;!m.isListExpanded({depth:c,state:e})?d.$25({focusComposer:a,scrollToComposer:!1}):b>0&&m.getVisibleCommentsCount({depth:0,state:e})===0?e.pagers.forward?d.$42():e.pagers.backward&&d.$43():d.$23()};d.Actions={collapseList:d.$23,expandList:d.$25,loadNewerComments:d.$43,loadOlderComments:d.$42,setViewOption:d.$61,toggleList:d.$62};d.$63={onCommentListHidden:d.$6,onCommentListVisible:d.$5};d.$2=b("debounce")(b("UFI2CommentsConfig").paginationPrefetchingStrategy==="no_prefetching"?b("emptyFunction"):function(){return d.$7("forward")},b("UFI2CommentsConfig").firstPagePreloadDelay,babelHelpers.assertThisInitialized(d),!0);d.$8.addSubscriptions(d.$2);return d}var d=a.prototype;d.componentWillUnmount=function(){this.$8.release(),this.$9=[]};d.$19=function(){var a=this.props.depth,c=this.state.listState;c=a===0&&!m.isListLoading({depth:a,state:c});a=a!==0;var d=this.$10;if(this.$14===!0&&d!=null&&(c||a)){this.$14=!1;c=d.getElementToScrollTo();a=this.$18;if(a!=null){this.$18=null;b("scrollIntoView")(a,{behavior:"smooth",onScrollComplete:function(){d.focus()},verticalAlign:"center"});return}a=this.$15;this.$15=!1;if(a===!1){d.focus();return}if(c==null)return;if(c instanceof Text){b("FBLogger")("ufi2").mustfix("The composer is a Text node! I don't know what happened but this is UNACCEPTABLE, we found this out because we were trying to scroll to this component. You can look into and possibly fix this issue by asserting the composerRef on CometUFICommentList is being set correctly");d.focus();return}b("scrollIntoView")(c,{behavior:"smooth",onScrollComplete:function(){return d.focus()},verticalAlign:"center"})}};d.$20=function(a,b){var c=this.$12.get(a)||[];c.push(b);this.$12.set(a,c)};d.$7=function(a){var b=this.props,c=b.connectionPageInfo.pageSize,d=b.depth,e=b.fetchComments;b=b.totalCount;var f=this.state.listState;if(!m.canFetchInDirection({depth:d,direction:a,state:f,totalCount:b}))return;b=m.getCountForFetch({depth:d,direction:a,pageSize:c,state:f});if(b==null)return;e({count:b,direction:a,onCommentsFetched:this.$26})};d.$35=function(a){var b=this.props,c=b.depth,d=b.environment,e=b.totalCount;b=b.viewOption;var f=this.state.listState;return{Selectors:m,depth:c,direction:a,environment:d,listState:f,totalCount:e,viewOption:b}};d.$41=function(a){var b=this,c=this.props,d=c.connectionPageInfo.pageSize,e=c.depth,f=c.feedback,g=c.totalCount;c=c.viewOption;var h=this.state.listState,i=a==="forward"?this.$42:this.$43;return{Selectors:m,depth:e,direction:a,listState:h,loadMoreComments:i,onMouseEnter:function(){return b.$44(a)},pageSize:d,summaryTotalNumComments:(h=(e=f.comment_count)==null?void 0:e.total_count)!=null?h:0,totalCount:g,viewOption:c}};d.$44=function(a){b("UFI2CommentsConfig").paginationPrefetchingStrategy==="prefetch_enter_pager_1000ms_list"&&this.$7(a)};d.$54=function(a){var b=this.$10;b!=null?b.execCommand({__type:"SetReplyAssociation",commentAssociatedWithReply:a}):(this.$1=a,this.$17=!0)};d.$55=function(){var a=this.$10;a!=null?a.execCommand({__type:"SetReplyClicked"}):this.$16=!0};d.$40=function(){var a=this;this.$58=this.$58.filter(function(b){var c=b.commentID,d=b.scrollToComposer;b=b.scrollToNode;c=a.$13[c];if(c!=null){c.$25({focusComposer:!0,scrollToComposer:d,scrollToNode:b});return!1}return!0})};d.$60=function(a,c){var d=this,e=this.props,f=e.connectionPageInfo.pageSize,g=e.depth,h=e.fetchComments,i=!1;this.$24(function(c){var d=m.isPagerLoading({depth:g,direction:a,state:c})||g===0&&m.isListLoading({depth:g,state:c})||g!==0&&m.isRepliesExpanderLoading({depth:g,state:c});if(d)return null;d=g===0?n.requestCommentsPage({args:{depth:0,direction:a,pageSize:f},state:c}):n.requestCommentsPage({args:{depth:g,direction:a,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies,pageSize:f},state:c});i=m.isPagerLoading({depth:g,direction:a,state:d});return d},function(b){if(!i){c&&c();return}b=m.getCountForFetch({depth:g,direction:a,pageSize:f,state:b});if(b==null)return;c!=null&&d.$20(a,c);h({count:b,direction:a,onCommentsFetched:d.$26})})};d.$53=function(a,c){var d=a.authorId,e=a.authorIsWeakReference,f=a.authorName;a=a.authorType;c.execCommand({__type:"PrefillMention",mentionableEntity:new(b("SearchableEntry"))({auxiliaryData:{authorativePerson:void 0,connectedPage:void 0,disableAutosuggest:void 0,indexRank:void 0,renderType:e?"non_member":"member",verified:void 0,workForeignEntity:void 0,workUser:void 0},title:f,type:a==="User"?"user":"non_user",uniqueID:d})})};d.$50=function(a){var b=this.$12.get(a)||[];for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e()}this.$12["delete"](a)};d.$24=function(a,b){var c=this;this.setState(function(b){b=a(b.listState);return!b?null:{listState:b}},function(){return b&&b(c.state.listState)})};d.render=function(){var a=this.props,c=a.children,d=a.commentParent,e=a.depth,f=a.environment,g=a.getComment,h=a.isInitiallyExpanded,i=a.replyViewOption,j=a.totalCount;a=a.viewOption;var k=this.state.listState;f={Actions:this.Actions,Selectors:m,addReplyToCommentCallback:this.$21,clearReplyToCommentCallback:this.$22,environment:f,getComment:g,getCommentEditorProps:this.$28,getCommentProps:this.$29,getComposerProps:this.$32,getFilterWarningPropsForNewerComments:this.$37,getFilterWarningPropsForOlderComments:this.$36,getHiddenCommentsPlaceholderProps:this.$38,getNestedCommentsListProps:this.$39,getPagerPropsForNewerComments:this.$46,getPagerPropsForOlderComments:this.$45,getPaginationProgressProps:this.$47,getTotalRepliesCountForComment:this.$57,isInitiallyExpanded:h,isReplyComposerVisibleForComment:this.$56,listState:k,onCommentsListMouseEnter:this.$51,onCommentsListMouseLeave:this.$52,replyViewOption:i,totalCount:j,viewOption:a};g=e===0?babelHelpers["extends"]({},f,{depth:0}):babelHelpers["extends"]({},f,{commentParent:d,depth:e,getRepliesCollapserProps:this.$48,getRepliesExpanderProps:this.$49});return o.jsx(b("CometUFICommentListVisibilityContext").Provider,{value:this.$63,children:c(g)})};return a}(o.PureComponent);q.displayName="CometUFICommentListInternal";q.getDerivedStateFromProps=c;function a(a){var c=a.children,d=a.commentParent,e=a.depth,f=e===void 0?0:e,g=a.displayCommentsContext;e=a.fallback;var k=a.feedback,l=a.feedbackSource,m=a.feedLocation,n=a.focusCommentID,p=a.listRef,r=a.topLevelFeedback,s=a.topLevelViewOption,t=a.useDefaultActor;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","commentParent","depth","displayCommentsContext","fallback","feedback","feedbackSource","feedLocation","focusCommentID","listRef","topLevelFeedback","topLevelViewOption","useDefaultActor"]);var u=j(),v=i(h!==void 0?h:h=b("CometUFICommentList_feedback.graphql"),k);if(f!==0&&r==null){b("recoverableViolation")("CometUFICommentList: topLevelFeedback is required to render a replies list","ufi2");return null}return o.jsx(b("CometUFICommentsProvider.react"),babelHelpers["extends"]({depth:f,displayCommentsContext:g,fallback:e,feedLocation:m,feedback:v,feedbackSource:l,focusCommentID:n,topLevelFeedback:r,topLevelViewOption:s,useDefaultActor:t},a,{children:function(a){return o.createElement(q,babelHelpers["extends"]({},a,{children:c,commentParent:d,depth:f,displayCommentsContext:g,environment:u,feedLocation:m,feedback:v,feedbackSource:l,focusCommentID:n,key:[l,n,(a=v.id)!=null?a:""].join("_"),ref:p,topLevelFeedback:r,useDefaultActor:t}))}}))}e.exports=a}),null);
__d("useCometUFICodedErrorDialog",["CometPlaceholder.react","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useState,j=b("lazyLoadComponent")(b("JSResource")("CometUFICodedErrorDialog.react").__setRef("useCometUFICodedErrorDialog"));function a(){var a=i(null),c=a[0],d=a[1];a=h(function(a){a.code!=null&&d(a)},[d]);var e=h(function(){return d(null)},[d]);return c==null?{errorDialog:null,setError:a}:{errorDialog:g.jsx(b("CometPlaceholder.react"),{fallback:g.jsx(g.Fragment,{}),children:g.jsx(j,{error:c,onClose:e})}),setError:a}}e.exports=a}),null);